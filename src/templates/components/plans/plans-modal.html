<div rv-spinner rv-spinner-key="plans-modal" rv-spinner-start-active="1">
  <div class="modal-header">
    <button type="button" class="close" ng-click="dismiss()" aria-hidden="true">
      <i class="fa fa-times"></i>
    </button>
    <h3 id="modalTitle" class="modal-title" translate>common-header.plans.choose-plan</h3>
  </div>

  <div id="plans-modal" class="modal-body u_padding-lg" stop-event="touchend">
    <div class="text-center">
      <div class="btn-group" role="group" aria-label="...">
        <button ng-click="monthlyPrices = true" type="button" class="btn btn-default" ng-class="{  active: monthlyPrices }">Monthly</button>
        <button ng-click="monthlyPrices = false" type="button" class="btn btn-default" ng-class="{  active: !monthlyPrices }">Yearly</button>
      </div>
      <p class="u_padding-sm-vertical">Pay yearly, get one month free!</p>
    </div>

    <div class="pricing-table">
      <div id="planHeader" class="monthly">
        <div class="planColumn" ng-class="{ currentPlan: currentPlanLabelVisible(plan) }" ng-repeat="plan in plans">
          <div id="current-plan" class="currentPlanLabel" ng-show="currentPlanLabelVisible(plan)" translate>
            common-header.plans.current
          </div>

          <h2>{{plan.name}}</h2>
          <h3 class="planColumnPrice" ng-show="!isFree(plan) && !isStarter(plan)">
            <span>$10</span>${{ monthlyPrices ? plan.monthly.priceDisplayMonth : plan.yearly.priceDisplayMonth }}
          </h3>
          <h3 class="planColumnPrice" ng-show="isStarter(plan)">
            ${{ monthlyPrices ? plan.monthly.priceDisplayMonth : plan.yearly.priceDisplayMonth }}
          </h3>
          <p ng-show="!isFree(plan) && monthlyPrices" class="text-muted" translate translate-values="{ price: plan.monthly.billAmount }">
            common-header.plans.perDisplayBilledMonthly
          </p>
          <p ng-show="!isFree(plan) && !monthlyPrices" class="text-muted" translate translate-values="{ price: plan.yearly.billAmount }">
            common-header.plans.perDisplayBilledYearly
          </p>
          <div ng-show="!isFree(plan)">
            <h3>{{plan.proLicenseCount}}</h3>
            <span ng-show="plan.proLicenseCount === 1" translate>common-header.plans.displayIncluded</span>
            <span ng-show="plan.proLicenseCount > 1" translate>common-header.plans.displaysIncluded</span>
          </div>
          <p ng-show="showSavings(plan)" class="planSavings" translate translate-values="{ save: (monthlyPrices ? plan.monthly.save : plan.yearly.save) }">
            common-header.plans.saveEachYear
          </p>
          <p ng-show="!isFree(plan) && isCurrentPlanSubscribed(plan)" translate>
            common-header.plans.needMoreDisplays
          </p>
          <a ng-show="!isFree(plan) && isCurrentPlanSubscribed(plan)" href="https://www.risevision.com/purchaseadditionaldisplaylicenses"
            target="_blank" translate>
              common-header.plans.individual-licenses
            </a>

          <!-- Trial remaining days -->
          <p id="trial-days-remaining" class="small u_margin-sm-bottom" ng-show="isCurrentPlan(plan) && isOnTrial(plan)" translate
            translate-values="{ count: currentPlan.trialPeriod }">common-header.plans.days-left-trial</p>
          <!-- Trial expired notice -->
          <p class="small u_margin-sm-bottom text-danger" ng-show="isCurrentPlan(plan) && isTrialExpired(plan)" translate>common-header.plans.trial-expired</p>

          <a id="subscribe-plan" ng-show="getVisibleAction(plan) === 'subscribe'" x class="btn btn-primary btn-block" translate>common-header.plans.subscribe</a>
          <a id="downgrade-plan" ng-show="getVisibleAction(plan) === 'downgrade'" target="_blank" href="https://www.risevision.com/downgradeplan"
            class="btn btn-default btn-block" translate>common-header.plans.downgrade</a>
          <a id="start-trial-plan" ng-show="getVisibleAction(plan) === 'start-trial'" target="_blank" ng-click="startTrial(plan)" class="btn btn-primary btn-block"
            translate>common-header.plans.start-trial</a>
        </div>
        <!--plan-column-->

      </div>
      <div id="planFeatures">
        <div class="planFeatureColumn" id="planFreeFeatures">
          <h4 id="planFeatures" class="planFeatureColumnTitle" style="column-span: all;">You can use the following features for free on any of your displays!</h4>
          <div class="planFeature">
            <p class="featureTitle">Text</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Image by URL</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Video by URL</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">RSS</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Time & Date</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">HTML</p>
          </div>
        </div>
        <div class="planFeatureColumn" id="planPaidFeatures">
          <h4 class="planFeatureColumnTitle" style="column-span: all;">Key Features Included With All Paid Plans <span class="u_padding-sm-vertical">Everything in 'Free' +</span></h4>
          <div class="planFeature">
            <p class="featureTitle">Image Slideshows</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Video Playlists</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Unlimited Image & Video File Storage</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Pre-made Templates</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Centralized Content Control</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Scheduling</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Google Calendar</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Google Spreadsheet</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Twitter</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Web Pages</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Google Reliability & Security</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Account / Sub-Account Hierarchy</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">User Role Permissioning</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Display Monitoring Notifications</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Content Shows Offline</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Alert Integration</p>
          </div>
          <div class="planFeature">
            <p class="featureTitle">Display On/Off Control</p>
          </div>
          <h4 class="text-center" style="column-span: all;"><a href="https://www.risevision.com/pricing" target="_blank">Learn More About Key Features</a></h4>
        </div>
      </div>
      <div id="planFooter"></div>
    </div>
    <div class="text-center u_padding-sm-vertical">
      <h3><a href="https://www.risevision.com/contact-us" target="_blank">Questions? We can help!</a></h3>
      <h3><a href="https://www.risevision.com/licensesubcompany" target="_blank">Need to license your Sub-Company?</a></h3>
    </div>
  </div>
  <!-- //Modal Body -->

  <style>
    /* .progress-bar-step {
      cursor: pointer;
    }

    .progress-bar-step p {
      text-align: center;
      position: relative;
      top: -39px;
      margin: 0;
      font-size: 13px;
      color: #5b5b5b;
      word-spacing: 100vw;
    }

    .progress-bar-step--active p {
      color: #4ab766;
    }

    .progress-bar-step--complete {
      background-color: #a4dbff !important;
    }

    .progress-bar-step--complete p {
      color: #a4dbff;
    }

    .progress-bar-step--complete p::before {
      content: "\f00c";
      margin-right: 4px;
      font-family: FontAwesome;
      font-style: normal;
      font-weight: normal;
      text-decoration: inherit;
    } */

    .bordered-right {
      border-right: 1px solid #DDD;
    }

    @media (max-width: 768px) {
      .bordered-right {
        border-right: 0;
      }
    }

    .lead {
      margin-bottom: 10px;
    }

    .text-block {
      font-size: 12px;
    }

    small {
      color: #5b5b5b;
    }

    #security-branding {
      margin-bottom: 0;
      background: #f2f2f2;
      overflow: hidden;
      border-radius: 0 0 4px 4px;
      border-top: 1px solid #e5e5e5;
      min-height: 16.43px;
      width: 100%;
    }

    #security-branding img {
      width: 25px;
      height: 14px;
      position: relative;
      top: -2px;
      margin-right: 10px;
    }

    .flex-horizontal {
      display: flex;
      flex-direction: row;
      justify-content: center;
      height: 100%;
    }

    .flex-horizontal>div:nth-of-type(even) {
      flex: 1;
    }

    .flex-horizontal>div:nth-of-type(odd) {
      flex: 5;
    }

    .pagination-container {
      margin-top: 120px;
    }

    /* RENAME THIS */

    .pagination {
      width: 100%;
      text-align: center;
      padding: 0;
      display: inline-block;
      margin: 30px 0 0 0;
    }

    .indicator {
      width: 15px;
      height: 15px;
      border: 4px solid #dddddd;
      border-radius: 50%;
      display: inline-block;
      position: relative;
    }

    .indicator .tag {
      position: absolute;
      top: -40px;
      left: 50%;
      transform: translateX(-50%);
      color: #dddddd;
      font-size: 12px;
      cursor: default;
    }

    .indicator.active,
    .indicator.complete {
      border-color: #4ab767;
    }

    .indicator.active .tag,
    .indicator.complete .tag {
      color: #4ab767;
    }

    .indicator.complete .tag:before {
      content: "\f00c";
      margin-right: 4px;
      font-family: FontAwesome;
      font-style: normal;
      font-weight: normal;
      text-decoration: inherit;
      color: #4ab767;
      font-size: 14px;
    }

    .progress-bar-container {
      width: 17%;
      height: 2px;
      display: inline-block;
      background-color: #dddddd;
      position: relative;
      top: -6px;
    }

    .progress-bar-container:last-of-type {
      display: none;
    }

    .progress-bar-container .progress-bar {
      width: 0;
      height: 100%;
      background-color: #4ab767;
    }

    .indicator.complete+.progress-bar-container.complete {
      background-color: #4ab767;
    }

    /* .progress-step {
      display: inline;
    } */
  </style>

  <!-- //Checkout Start -->
  <div id="checkout-modal" class="modal-body" style="padding: 16px 32px" stop-event="touchend">
    <!-- <div style="display:flex;">
      <div class="text-center" style="flex: 1; display: inline-block;">Subscriptions</div>
      <div class="text-center" style="flex: 1; display: inline-block;">Billing Address</div>
      <div class="text-center" style="flex: 1; display: inline-block;">Shipping Address</div>
      <div class="text-center" style="flex: 1; display: inline-block;">Payment Methods</div>
      <div class="text-center" style="flex: 1; display: inline-block;">Review Purchase</div>
    </div> -->

    <!-- <div class="app-launcher-wizard_progress-bar hidden-sm hidden-xs" style="padding-top: 32px;">
      <div id="step-one" class="progress-bar-step progress-bar-step--active">
        <p>Subscription Details</p>
      </div>
      <div id="step-two" class="progress-bar-step">
        <p>Billing Address</p>
      </div>
      <div id="step-three" class="progress-bar-step">
        <p>Shipping Address</p>
      </div>
      <div id="step-four" class="progress-bar-step">
        <p>Payment Method</p>
      </div>
      <div id="step-five" class="progress-bar-step">
        <p>Purchase Review</p>
      </div>
    </div> -->

    <div class="sized-container">
      <div class="pagination">

        <div class="indicator active" id="step-one">
          <div class="tag">Subscription Details</div>
        </div>
        <div class="progress-bar-container">
          <div class="progress-bar"></div>
        </div>



        <div class="indicator" id="step-two">
          <div class="tag">Billing Address</div>
        </div>
        <div class="progress-bar-container">
          <div class="progress-bar"></div>
        </div>



        <div class="indicator" id="step-three">
          <div class="tag">Shipping Address</div>
        </div>
        <div class="progress-bar-container">
          <div class="progress-bar"></div>
        </div>



        <div class="indicator" id="step-four">
          <div class="tag">Payment Method</div>
        </div>
        <div class="progress-bar-container">
          <div class="progress-bar"></div>
        </div>



        <div class="indicator" id="step-five">
          <div class="tag">Purchase Review</div>
        </div>
        <div class="progress-bar-container">
          <div class="progress-bar"></div>
        </div>


      </div>
    </div>

    <div ng-include="'plans/checkout-subscriptions.html'"></div>
    <div ng-include="'plans/checkout-billing-address.html'"></div>
    <div ng-include="'plans/checkout-billing-address-error.html'"></div>
    <div ng-include="'plans/checkout-shipping-address.html'"></div>
    <div ng-include="'plans/checkout-payment-methods.html'"></div>
    <div ng-include="'plans/checkout-review-purchase.html'"></div>
    <div ng-include="'plans/tax-exemption.html'"></div>
  </div>
  <!-- //Checkout End -->

  <script>
    //SETUP
    $(document).ready(function () {
      $(".prototype-show").hide();
      $(".prototype-show-ready").show();

      //INCREMENT SPINNER doesnt work
      (function ($) {
        $('.spinner .btn:first-of-type').on('click', function () {
          $('.spinner input').val(parseInt($('.spinner input').val(), 10) + 1);
        });
        $('.spinner .btn:last-of-type').on('click', function () {
          $('.spinner input').val(parseInt($('.spinner input').val(), 10) - 1);
        });
      })(jQuery);
    });

    //CYCLE
    $(document).on("click", "#step-one", function () {
      $(".prototype-show").hide();
      $("#content-one").show();
    });
    $(document).on("click", "#step-two", function () {
      $(".prototype-show").hide();
      $("#content-two").show();
    });
    $(document).on("click", "#step-three", function () {
      $(".prototype-show").hide();
      $("#content-three").show();
    });
    $(document).on("click", "#step-four", function () {
      $(".prototype-show").hide();
      $("#content-four").show();
      $("#security-branding").show();
    });
    $(document).on("click", "#step-five", function () {
      $(".prototype-show").hide();
      $("#content-five").show();
      $("#security-branding").show();
    });

    // STEP THROUGH CHECKOUT NAV 
    $(document).on("click", ".indicator", function () {
      var target = $(this);
      $(".indicator").removeClass("active");
      $(this).removeClass("complete");
      $(this).addClass("active");
      $(this).prevAll().addClass("complete");
    });

    // HIGHLIGHT PAYMENT CYCLE
    $(document).on('change', 'input[type=radio][name=optionsRadios]', function () {
      if (this.value == 'option1') {
        $(".radio").css("background", "white");
        $("#optionsRadios1").closest(".radio").css("background", "aliceblue");
      } else if (this.value == 'option2') {
        $(".radio").css("background", "white");
        $("#optionsRadios2").closest(".radio").css("background", "aliceblue");
      }
    });

    //PAYMENT METHOD DROPDOWN
    $(document).on('change', '#paymentMethodSelector', function () {
      $("#existingCardCC").hide();
      $("#firstTimeCC").show();
    });

    //CONTROL MODAL
    $(document).on("click", "#subscribe-plan", function () {
      $("#plans-modal").hide();
      $("#checkout-modal").show();

      $("h3#modalTitle").text("Checkout");

      $(".modal-dialog").removeClass("modal-lg");
      $(".modal-dialog").addClass("modal-md");
    });

    //HIDE CC ADDRESS
    $(document).on("click", "#toggleMatchBillingAddress", function () {
      this.checked ? $('#targetCCAddress').hide(400) : $('#targetCCAddress').show(400);
    });

    //SHOW ERROR STATE 
    $(document).on("click", "#reveal-billing-error", function () {
      $(".prototype-show").hide();
      $(".sized-container").hide();
      $("#content-two-error").show();
    });

    //CLEAR ERROR STATE 
    $(document).on("click", "#hide-billing-error", function () {
      $(".prototype-show").hide();
      $("#content-two").show();
      $(".sized-container").show();
    });

    //SHOW TAX EXEMPTION
    $(document).on("click", "#showTaxExempt", function () {
      $(".prototype-show").hide();
      $("#tax-exemption-form").show();
    });
  </script>

  <div id="security-branding" class="text-center prototype-show">
    <small>
    <img src="https://s3.amazonaws.com/Rise-Images/UI/chargebee-icon.svg">
    <img src="https://s3.amazonaws.com/Rise-Images/UI/stripe-icon.svg">
    Secure Checkout from Chargebee and Stripe 
  </small>
  </div>
