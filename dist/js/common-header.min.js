!function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("add-user-email.html",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n  <meta name="viewport" content="width=device-width"/>\n</head>\n<body>\n  <div style="background:#f9f9f9;margin:0px;padding:20px" bgcolor="f9f9f9">\n      <table cellspacing="0" border="0" cellpadding="0" align="center" width="595" bgcolor="white" style="border-collapse:separate;border-spacing:0;font-family:Helvetica,Arial,sans-serif;letter-spacing:0;table-layout:fixed">\n          <tbody>\n              <tr>\n                  <td style="border:1px solid #dddddd;border-radius:2px;font-family:Helvetica,Arial,sans-serif;font-size:16px;padding:40px 60px">\n                      <table width="100%" style="border-collapse:separate;border-spacing:0;table-layout:fixed">\n                          <tbody>\n                              <tr>\n                                  <td style="font-family:Helvetica,Arial,sans-serif;font-size:16px;padding:0;text-align:center" align="left">\n                                      <img src="https://ci4.googleusercontent.com/proxy/tIn39Uu_-8P30B-NjHrQ6M6cn10CNDo8yKsbzHxTVxQDdshB0RN9KmjFHpgXqGvxfJy7jhFQFRMnvpkBo-cGxyTaPHX-YnB8cvvmC5v4FbYHFSbiRAgMRCOGqol3psI81bf9vVzerfYrewyW=s0-d-e1-ft#http://s3.amazonaws.com/Rise-Images/UI/logo.svg" width="165" height="62" style="padding:15px 0 30px;text-align:left" class="CToWUd">\n                                  </td>\n                              </tr>\n                          </tbody>\n                      </table>\n                      <table width="100%" style="border-collapse:separate;border-spacing:0;table-layout:fixed">\n                          <tbody>\n                              <tr>\n                                  <td style="color:#525252;font-family:Helvetica,Arial,sans-serif;font-size:15px;line-height:22px;padding:0">\n                                      <p style="line-height:1.5;margin:0 0 17px;text-align:left!important" align="left">Hi there,</p>\n                                      <p style="line-height:1.5;margin:0 0 17px;text-align:left!important" align="left">You\'ve been added to <b>{{user.companyName}}</b> with Rise Vision!</p>\n                                      <p style="line-height:1.5;margin:0 0 17px;text-align:left!important" align="left">If you’re new to Rise Vision, please read below on how to proceed. Your email address will need Google authentication to be fully compatible.</p>\n\n                                        <div style="width: 100%;\n                      display: inline-block;\n                      padding: 10px;\n                      background-color: #f5f5f5; text-align:center;">\n                                          <p><span>The email address used for your account is:</span>\n                                          <p><b style="border: none;\n                      outline: none!important;\n                      font-size: 26px;\n                      line-height: 18px;\n                      padding: 0;\n                      margin: 0 18px;">{{user.username}}</b></p>\n                                             </p>\n                                      </div>\n\n                                      <p></p>\n                                      <p style="line-height:1.5;margin:0 0 17px;text-align:left!important" align="left"><b>If your email address is a Google account:</b>\n                                          <br>Click <a href="http://apps.risevision.com" target="_blank">here</a> to sign in with your Google credentials.\n                                          <br>\n                                      </p>\n\n                                      <p style="line-height:1.5;margin:0 0 17px;text-align:left!important" align="left"></p>\n                                      <div style="margin-bottom:16px;text-align:center!important" align="center"><a href="http://apps.risevision.com" style="background:#47b767;border:none;border-radius:3px;color:#fff;display:inline-block;font-size:14px;font-weight:bold;outline:none!important;padding:12px 35px;text-decoration:none" target="_blank">Sign In</a></div>\n                                      <p style="line-height:1.5;margin:0 0 17px;text-align:left!important" align="left">\n\n\n                                          <p style="line-height:1.5;margin:0 0 17px;text-align:left!important" align="left">\n                                           <br><b>If your email  address is not a  Google account yet:</b><br>\n                                     You can create one for free by clicking <a href="https://accounts.google.com/signup" target="_blank">this link</a>. You can authenticate <b>ANY</b> email with Google. Just select "I prefer to use my current email address", and then set your password. Once you have a Google account, you can <a href="http://apps.risevision.com" target="_blank">sign in</a> to Rise Vision.\n                                     </p>\n                                    \n                                    <img src="https://help.risevision.com/hc/article_attachments/115010258046/Sign_In_page_.png" width="475" height="180" style="padding:15px 0 30px;text-align:left" class="CToWUd">\n\n                                      <div style="margin-bottom:16px;text-align:center!important" align="center"><a href="http://apps.risevision.com" style="background:#47b767;border:none;border-radius:3px;color:#fff;display:inline-block;font-size:14px;font-weight:bold;outline:none!important;padding:12px 35px;text-decoration:none" target="_blank">Go Now</a></div>\n                                      <br/>\n                                       <p style="line-height:1.5;margin:0 0 17px;text-align:left!important" align="left">You can find more details about getting started with Rise Vision in our <a href="https://help.risevision.com/hc/en-us/articles/115002868706-Get-started-with-Rise-Vision" target="_blank">Help Center</a>.</p>\n\n                                       <p style="line-height:1.5;margin:0 0 17px;text-align:left!important" align="left"> If you have any questions at all, just reply to this email. &nbsp;We’re here to help!</p>\n                                      <p style="line-height:1.5;margin:0 0 17px;text-align:left!important" align="left">-Robb\n                                          <br>Rise Vision Community Manager</p>\n                                  </td>\n                              </tr>\n                              <tr>\n                              </tr>\n                          </tbody>\n                      </table>\n                      <div style="width: 100%;\n      display: inline-block;\n      padding: 10px;\n      background-color: #f5f5f5;">\n                          <p style="text-align:center"><a href="http://blog.risevision.com/" style="border:none;outline:none!important" target="_blank" style="font-size: 14px;\n      line-height: 22px;\n      padding: 0;\n      color: #9C9C9C;\n      margin: 0 22px;">Follow Our Blog</a>\n                              <span style="margin:6px;">|</span>\n                              <a href="https://community.risevision.com/" style="border:none;outline:none!important" target="_blank" style="font-size: 14px;\n      line-height: 22px;\n      padding: 0;\n      color: #9C9C9C;\n      margin: 0 22px;">Join Our Community</a></p>\n                      </div>\n                  </td>\n              </tr>\n          </tbody>\n      </table>\n      <table width="100%" align="middle" style="border-collapse:separate;border-spacing:0;table-layout:fixed">\n          <tbody>\n              <tr>\n                  <td style="font-family:Helvetica,Arial,sans-serif;font-size:16px;padding:0">\n                      <table cellspacing="0" border="0" cellpadding="0" align="center" width="600" bgcolor="transparent" style="border-collapse:separate;border-spacing:0;font-family:Helvetica,Arial,sans-serif;letter-spacing:0;table-layout:fixed">\n                          <tbody>\n                              <tr>\n                                  <td style="font-family:Helvetica,Arial,sans-serif;font-size:16px;padding:21px 30px 15px;text-align:center" align="center">\n                                      <p style="color:#b7b7b7;font-size:12px;font-weight:300;margin:0 0 6px;text-decoration:none">Rise Vision 545 King Street West Toronto, Ontario Canada M5V 1M1\n                                      </p>\n                                  </td>\n                              </tr>\n                          </tbody>\n                      </table>\n                  </td>\n              </tr>\n          </tbody>\n      </table>\n  </div>\n </body>\n</html>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("app-nav-buttons-menu.html",'<ul>\n  <li class="new-app">  \n    <a href="https://apps.risevision.com/editor" target="_blank" link-cid>\n      <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/editor-image.png"></div>\n      <span>Presentations</span>\n    </a>\n  </li>\n\n  <li class="new-app">\n      <a href="https://apps.risevision.com/schedules" target="_blank" link-cid>\n        <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/schedule-image.png"></div>\n        <span>Schedules</span>\n      </a>\n  </li>\n  \n  <li class="new-app"> \n      <a href="https://apps.risevision.com/displays" target="_blank" link-cid>\n        <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/displays-image.png"></div>\n        <span>Displays</span>\n      </a>\n  </li>\n\n  <li>\n      <a href="https://store.risevision.com/" target="_blank" link-cid>\n        <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/store-image.png"></div>\n        <span>Store</span>\n      </a>\n  </li>\n\n  <li>\n      <a href="https://apps.risevision.com/storage" target="_blank" link-cid>\n        <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/storage-image.png"></div>\n        <span>Storage</span>\n      </a>\n  </li>\n\n   <li>\n      <a href="https://rva.risevision.com/#PRESENTATIONS" target="_blank" class="old-app" link-cid>\n        <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/editor-image-gray.png"></div>\n        <span>Classic Editor</span>\n      </a>\n  </li>\n\n \n</ul>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("app-nav-buttons.html",'<li dropdown class="dropdown hidden-xs">\n  <button dropdown-toggle class="dropdown-toggle btn btn-link"><i class="fa fa-lg fa-th"></i></button>\n  <div class="dropdown-menu app-navigation" role="menu">\n    <ng-include \n      replace-include\n      src="\'app-nav-buttons-menu.html\'">\n    </ng-include>\n  </div>\n</li>\n\n<!-- Mobile -->\n<li class="visible-xs-inline-block" >\n  <a href="" class="company-buttons-icon-mobile"\n  action-sheet="\'app-nav-buttons-menu.html\'"\n  action-sheet-class="app-navigation">\n    <i class="fa fa-th"></i>\n  </a>\n</li>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("auth-buttons-menu.html",'<company-buttons\n  ng-show="isRiseVisionUser"\n  ng-controller="CompanyButtonsCtrl"\n></company-buttons>\n\n<ul>\n  <li ng-show="isRiseVisionUser">\n    <a href="" ng-click="alertSettings()" class="alert-settings-button action">\n      <i class="fa fa-bullhorn"></i>\n      <span class="item-name">Alert Settings</span>\n    </a>\n  </li>\n\n  <li ng-show="isRiseVisionUser">\n    <a href="" ng-click="userSettings()" class="user-settings-button action">\n      <i class="fa fa-user"></i>\n      <span class="item-name">User Settings</span>\n    </a>\n  </li>\n\n  <li ng-show="isRiseVisionUser">\n    <a href="https://store.risevision.com/account" target="_blank" class="store-account-button action" link-cid >\n      <i class="fa fa-shopping-cart"></i>\n      <span class="item-name">Store Account</span>\n    </a>\n  </li>\n\n  <span ng-if="isLoggedIn && !isRiseVisionUser" class="google-account" class="username">{{username}}</span>\n\n  <li class="dropdown-footer text-right" ng-show="isLoggedIn">\n    <button class="sign-out-button btn btn-sm btn-default u_margin-sm-bottom" ng-controller="SignOutButtonCtrl" ng-click="logout()">Sign Out<i class="fa fa-sign-out icon-right"></i>\n  </li>\n</ul>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("auth-buttons.html",'<!-- Desktop and tablet -->\n<li\n  ng-show="isLoggedIn && !isRiseVisionUser && !loading">\n  <button type="button" ng-controller="RegisterButtonCtrl" ng-click="register()"\n    class="btn btn-danger register-user-menu-button">\n    Complete Registration\n  </button>\n</li>\n<li\n  dropdown\n  class="dropdown user-profile-dropdown desktop-menu-item"\n  ng-class="{\'hidden-xs\': isLoggedIn}"\n  ng-show="isLoggedIn"\n  >\n    <a href="" dropdown-toggle class="dropdown-toggle">\n      <div class="user-id pull-left">\n        <span ng-class="{\'pending-registration\' : isLoggedIn && !isRiseVisionUser && !loading}" class="username">{{username}}</span>\n        <span><strong>{{companyName}}</strong></span>\n      </div>\n      <img ng-src="{{userPicture}}"\n        class="profile-pic" width="30" height="30" alt="User" />\n    </a>\n    <div class="dropdown-menu" role="menu">\n      <ng-include\n        src="\'auth-buttons-menu.html\'"\n        replace-include\n      ></ng-include>\n    </div>\n</li>\n<!-- Mobile -->\n<li\n  dropdown\n  class="dropdown user-profile-dropdown mobile-menu-item"\n  ng-class="{\'visible-xs-inline-block\': isLoggedIn}"\n  ng-show="isLoggedIn"\n  >\n    <a href="" dropdown-toggle class="visible-xs dropdown-toggle" action-sheet="\'auth-buttons-menu.html\'"\n      action-sheet-class="user-profile-dropdown">\n      <div class="user-id">\n        <span>{{username}}</span>\n        <span><strong>{{companyName}}</strong></span>\n      </div>\n    </a>\n</li>\n<!-- If User NOT Authenticated -->\n<li ng-show="!undetermined && isLoggedIn === false">\n  <button type="button" class="btn-primary btn u_margin-right" ui-sref="apps.launcher.createaccount">\n    Sign Up Free\n  </button>\n</li>\n<li ng-show="!undetermined && isLoggedIn === false">\n  <button type="button" class="sign-in top-auth-button" ui-sref="apps.launcher.unauthorized">\n    Sign In\n  </button>\n</li>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("authorization-modal.html",'<div class="modal-header">\n  <button type="button" class="close" ng-click="closeModal()">\n  \t\t<i class="fa fa-times"></i>\n  \t</button>\n</div>\n<div class="modal-body authorization-modal"\n  stop-event="touchend"\n  rv-spinner="spinnerOptions"\n  rv-spinner-key="authenticate-button"\n  rv-spinner-start-active="0"\n>\n  <img src="//rise-vision.github.io/style-guide/img/avatar_2x.jpg" class="profile-img">\n  <p>Please authorize your Google Account to register with Rise Vision.</p>\n\n  <button type="button" class="btn btn-success btn-fixed-width btn-block authorize-button" ng-click="authenticate(true)">\n    Authorize <i class="fa fa-white fa-check icon-right"></i>\n  </button>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("close-frame-button.html",'<li class="close-frame">\n  <a href="" class="close-frame-button" ng-click="closeIFrame()">\n    <i class="fa fa-times"></i>\n  </a>\n</li>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("common-header.html",'<!-- Common Header Navbar -->\n<nav class="navbar navbar-default navbar-static-top hidden-print"\n\tng-class="{\'active-banner\': isSubcompanySelected() || isTestCompanySelected()}" role="navigation">\n\t<div class="container">\n\t\t<div class="navbar-header" style="width: 100%;">\n\t\t\t<a class="navbar-brand visible-md visible-lg"\n\t\t\t  href="http://www.risevision.com/" target="{{newTabHome ? \'_blank\' : \'_self\'}}" ng-if="!inRVAFrame">\n\t\t\t\t<img src="//s3.amazonaws.com/Rise-Images/UI/logo.svg" class="img-responsive logo-small" width="113" height="42" alt="Rise Vision">\n\t\t\t</a>\n\t\t\t<a class="navbar-brand hidden-md hidden-lg text-center"\n\t\t\t\thref="" off-canvas-toggle>\n\t\t\t\t<i class="fa fa-bars"></i>\n\t\t\t</a>\n\t\t\t<!-- If User Authenticated -->\n\t\t\t<!-- Action Nav -->\n\t\t\t<ul class="nav navbar-nav navbar-right actions-nav pull-right">\n\t\t\t\t<!-- Help Dropdown -->\n\t\t\t\t<ng-include\n\t\t\t\t\treplace-include\n\t\t\t\t\tng-controller="HelpDropdownButtonCtrl"\n\t\t\t\t\tsrc="\'help-dropdown.html\'"\n\t\t\t\t></ng-include>\n\t\t\t\t<!-- END Help Dropdown -->\n\t\t\t\t<!-- Notifications -->\n\t\t\t\t<ng-include\n\t\t\t\t\treplace-include\n\t\t\t\t\tng-if="!inRVAFrame"\n\t\t\t\t  ng-controller="SystemMessagesButtonCtrl"\n\t\t\t\t\tsrc="\'system-messages-button.html\'"\n\t\t\t\t></ng-include>\n\t\t\t\t<!-- Shopping Cart -->\n\t\t\t\t<ng-include\n\t\t\t\t\treplace-include\n\t\t\t\t\tng-controller="ShoppingCartButtonCtrl"\n\t\t\t\t\tsrc="\'shoppingcart-button.html\'"\n\t\t\t\t></ng-include>\n\t\t\t\t<!-- Shopping Cart -->\n\t\t\t\t<ng-include\n\t\t\t\t\treplace-include\n\t\t\t\t\tng-if="inRVAFrame"\n\t\t\t\t\tng-controller="CloseFrameButtonCtrl"\n\t\t\t\t\tsrc="\'close-frame-button.html\'"\n\t\t\t\t></ng-include>\n\t\t\t\t<!-- Current App -->\n\t\t\t\t<ng-include\n\t\t\t\t\tng-if="!inRVAFrame"\n\t\t\t\t\treplace-include\n\t\t\t\t\tsrc="\'app-nav-buttons.html\'"\n\t\t\t\t></ng-include>\n\t\t\t\t<!-- END Current App -->\n\t\t\t\t<!-- Auth -->\n\t\t\t\t<ng-include\n\t\t\t\t\treplace-include\n\t\t\t\t\tng-if="!inRVAFrame"\n\t\t\t\t  ng-controller="AuthButtonsCtr"\n\t\t\t\t\tsrc="\'auth-buttons.html\'"\n\t\t\t\t></ng-include>\n\t\t\t\t<li ng-if="inRVAFrame"\n\t\t\t\t  ng-controller="AuthButtonsCtr"></li>\n\t\t\t</ul>\n\t\t\t<!-- END Action Nav -->\n\n\t\t\t<!-- Nav Links -->\n\t\t\t<div class="navbar-collapse navbar-left hidden-xs hidden-sm">\n\t\t\t\t<ul class="nav navbar-nav">\n\t\t\t\t\t<li ng-repeat="opt in navOptions">\n\t\t\t\t\t\t<a ng-if="opt.cid" ng-href="{{opt.link}}" link-cid target="{{opt.target}}" ng-class="{\'selected\': opt.states && opt.states.indexOf(navSelected) > -1}">{{opt.title}}</a>\n\t\t\t\t\t\t<a ng-if="!opt.cid" ng-href="{{opt.link}}" target="{{opt.target}}" ng-class="{\'selected\': opt.states && opt.states.indexOf(navSelected) > -1}">{{opt.title}}</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li ng-if="!inRVAFrame && !hideHelpMenu">\n\t\t\t\t\t\t<a href="http://www.risevision.com/help/" target="_blank">\n\t\t\t\t\t\t\tHelp\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<!-- END Nav Links -->\n\t\t</div>\n\n\t\t<ng-include\n\t\treplace-include\n\t\tng-controller="TestCompanyBannerCtrl"\n\t\tsrc="\'test-company-banner.html\'"></ng-include>\n\t\t\n\t\t<ng-include\n\t\treplace-include\n\t\tng-controller="SubcompanyBannerCtrl"\n\t\tsrc="\'subcompany-banner.html\'"></ng-include>\n\t</div>\n</nav>\n\n<div ng-show="cookieEnabled === false" class="bg-warning text-center u_padding-sm">\n    <small><strong>Cookies Are Disabled.</strong> Rise Vision needs to use cookies to properly function. Please enable Cookies and Third-Party Cookies on your web browser and refresh this page.</small>\n</div>\n\n<ng-include\n\treplace-include\n\tng-controller="GlobalAlertsCtrl"\n\tsrc="\'global-alerts.html\'"></ng-include>\n\n<!-- END Common Header Navbar -->\n\n<!-- Off Canvas Version of the Nav -->\n<nav class="off-canvas-nav" off-canvas-nav>\n  <ul class="nav nav-pills nav-stacked">\n  \t<li off-canvas-toggle>\n  \t\t<i class="fa fa-times fa-2x pull-right"></i>\n  \t\t<img src="//s3.amazonaws.com/rise-common/images/logo-small.png" class="img-responsive logo-small" width="113" height="42" alt="Rise Vision">\n  \t</li>\n    <li ng-repeat="opt in navOptions">\n\t\t\t<a ng-if="opt.cid" ng-href="{{opt.link}}" link-cid target="{{opt.target}}">{{opt.title}}</a>\n\t\t\t<a ng-if="!opt.cid" ng-href="{{opt.link}}" target="{{opt.target}}">{{opt.title}}</a>\n\t\t</li>\n\t\t<li ng-if="!hideHelpMenu">\n\t\t\t<a target="_blank" href="http://www.risevision.com/help">Help</a>\n\t\t</li>\n  </ul>\n</nav>\n<iframe name="logoutFrame" id="logoutFrame" style=\'display:none\'></iframe>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-buttons-menu.html",'<ul>\n  <li class="dropdown-header" ng-show="!isSubcompanySelected">\n    <p>{{username}}</p>\n    <p><strong>{{selectedCompanyName}}</strong>\n      <span class="text-muted" ng-show="isRiseVisionUser && !isSubcompanySelected">|</span>\n      <a id="select-subcompany-button" href="" ng-click="switchCompany()" ng-show="isRiseVisionUser && !isSubcompanySelected">Select Sub-Company</a>\n    </p>\n  </li>\n\n  <li class="dropdown-header sub-company-header" ng-show="isSubcompanySelected">\n    <p>You are in Sub-Company <strong>{{selectedCompanyName}}</strong>\n    <span class="text-muted">|</span>\n     <a id="change-subcompany-button" href="" ng-click="switchCompany()" ng-show="isRiseVisionUser">Change</a></p>\n    <p><a id="reset-subcompany-button" href="" ng-click="resetCompany()">Switch to My Company</a></p>\n  </li>\n  <hr>\n  <li ng-show="isUserAdmin || isRiseAdmin">\n    <a href="" ng-click="addSubCompany()" class="action add-subcompany-menu-button">\n      <i class="fa fa-plus"></i>\n      <span class="item-name">Add Sub-Company</span>\n    </a>\n  </li>\n  <li ng-show="isUserAdmin || isRiseAdmin">\n    <a href="" ng-click="companySettings()" class="action company-settings-menu-button">\n      <i class="fa fa-building"></i>\n      <span class="item-name">Company Settings</span>\n    </a>\n  </li>\n  <li ng-show="isUserAdmin || isRiseAdmin">\n    <a href="" data-toggle="modal" ng-click="companyUsers()" class="action company-users-menu-button">\n      <i class="fa fa-users"></i>\n      <span class="item-name">Company Users</span>\n    </a>\n  </li>\n</ul>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-fields.html",'<div class="form-group" ng-class="{\'has-error\': forms.companyForm.name.$invalid && !forms.companyForm.name.$pristine}">\n  <label for="company-settings-name">\n    Company Name *\n  </label>\n  <input required id="company-settings-name" type="text" class="form-control"\n    ng-model="company.name" name="name" />\n  <p ng-show="forms.companyForm.name.$invalid && !forms.companyForm.name.$pristine"\n    class="help-block validation-error-message-name">Company Name is required.</p>\n</div>\n<div class="row">\n  <div class="col-md-6">\n    <div class="form-group">\n      <label for="company-size" class="control-label">\n        Company Size\n      </label>\n      <select id="company-size" class="form-control" ng-model="company.companySize">\n        <option value="" ng-show="false">&lt; Select Size &gt;</option>\n        <option ng-repeat="size in COMPANY_SIZE_FIELDS" value="{{size[0]}}">{{size[1]}}</option>\n      </select>\n    </div>\n  </div>\n  <div class="col-md-6">\n    <div class="form-group">\n      <label for="company-industry" class="control-label">\n        Industry\n      </label>\n      <select id="company-industry" class="form-control selectpicker" ng-model="company.companyIndustry">\n        <option value="" ng-show="false">&lt; Select Industry &gt;</option>\n        <option ng-repeat="industry in COMPANY_INDUSTRY_FIELDS" value="{{industry[0]}}">{{industry[1]}}</option>\n      </select>\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-6">\n    <div class="form-group">\n      <label for="company-settings-street" class="control-label">\n        Street\n      </label>\n      <input id="company-settings-street" type="text" class="form-control" ng-model="company.street" />\n    </div>\n  </div>\n  <div class="col-md-6">\n    <div class="form-group">\n      <label for="company-settings-unit" class="control-label">\n        Unit\n      </label>\n      <input id="company-settings-unit" type="text" class="form-control" ng-model="company.unit" />\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-md-3">      \n    <div class="form-group">\n      <label for="company-settings-city" class="control-label">\n        City\n      </label>\n      <input id="company-settings-city" type="text" class="form-control" ng-model="company.city" />\n    </div>\n  </div>\n  <div class="col-md-3">\n    <div class="form-group">\n      <label for="company-settings-country" class="control-label">\n        Country\n      </label>\n      <select id="company-settings-country" class="form-control selectpicker"\n        ng-model="company.country" ng-options="c.code as c.name for c in countries" empty-select-parser>\n        <option ng-show="false" value="">&lt; Select Country &gt;</option>\n      </select>\n    </div>\n  </div>\n  <div class="col-md-3">\n    <div class="form-group">\n      <label for="company-settings-state" class="control-label">\n        State/Province/Region\n      </label>\n      <input id="company-settings-state" type="text" class="form-control" ng-model="company.province" ng-hide="company.country == \'US\' || company.country == \'CA\'" />\n      <select class="form-control selectpicker" ng-model="company.province" ng-options="c[1] as c[0] for c in regionsCA" ng-show="company.country == \'CA\'" empty-select-parser>\n        <option ng-show="false" value="">&lt; Select Province &gt;</option>\n      </select>\n      <select class="form-control selectpicker" ng-model="company.province" ng-options="c[1] as c[0] for c in regionsUS" ng-show="company.country == \'US\'" empty-select-parser>\n        <option ng-show="false" value="">&lt; Select State &gt;</option>\n      </select>\n    </div>\n  </div>\n  <div class="col-md-3">\n    <div class="form-group">\n      <label for="company-settings-zip" class="control-label">\n        ZIP/Postal Code\n      </label>\n      <input id="company-settings-zip" type="text" class="form-control" ng-model="company.postalCode" />\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-md-6">\n    <div class="form-group">\n      <label for="company-settings-website" class="control-label">\n        Website\n      </label>\n      <input id="company-settings-website" type="text" class="form-control" ng-model="company.website"/>\n    </div>\n  </div>\n  <div class="col-md-6">\n    <div class="form-group">\n      <label for="company-settings-phone" class="control-label">\n        Phone\n      </label>\n      <input id="company-settings-phone" type="tel" class="form-control" ng-model="company.telephone"/>\n    </div>\n  </div>\n</div>\n<div class="form-group">\n  <label for="company-settings-timezone" class="control-label">Time Zone</label>\n  <select class="form-control" ng-model="company.timeZoneOffset" integer-parser>\n    <option ng-show="false" value="">&lt; Select Time Zone &gt;</option>\n    <option value="{{c[1]}}" ng-repeat="c in timezones">{{c[0]}}</option>\n  </select>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-icp-modal.html",'<div id="companyIcpModal">\n  <div class="modal-header">\n    <button type="button" class="close" ng-click="dismiss()" aria-hidden="true">\n      <i class="fa fa-times"></i>\n    </button>\n    <h3 id="icpModalTitle" class="modal-title">Customize your Rise Vision experience!</h3>\n  </div>\n  <div class="modal-body u_padding-lg" stop-event="touchend">    \n    <form id="companyIcpForm" role="form" name="forms.companyIcpForm">\n      <div class="row">\n        <div class="col-md-4">\n          <div class="form-group">\n            <label for="company-name" class="control-label">\n              Company Name\n            </label>\n          <input required id="company-name" type="text" class="form-control"\n            ng-model="company.name" name="name" />\n          </div>\n        </div>\n\n        <div class="col-md-4">\n          <div class="form-group">\n            <label for="company-size" class="control-label">\n              Company Size\n            </label>\n            <select id="company-size" class="form-control" ng-model="company.companySize">\n              <option value="" ng-show="false">&lt; Select Size &gt;</option>\n              <option ng-repeat="size in COMPANY_SIZE_FIELDS" value="{{size[0]}}">{{size[1]}}</option>\n            </select>\n          </div>\n        </div>\n        <div class="col-md-4">\n          <div class="form-group">\n            <label for="company-role" class="control-label">\n              What\'s your title?\n            </label>\n            <select id="company-role" class="form-control selectpicker" ng-model="user.companyRole">\n              <option value="" ng-show="false">&lt; Select Role &gt;</option>\n              <option ng-repeat="role in COMPANY_ROLE_FIELDS" value="{{role[0]}}">{{role[1]}}</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      <div class="text-center">\n        <h1 class="u_margin-xs-top">What\'s Your Industry?</h1>\n        <h4 class="u_margin-xs-top u_margin-xs-bottom"> (Pick One) </h4>\n      </div>\n\n      <div class="scrollable-list">\n        <ul id="" class="u_margin-md-top list-unstyled pt-media-list pt-onboarding-list text-center">\n          <li class="no-select" ng-class="{\'selected-border\' : company.companyIndustry === industry[0]}" ng-if="industry[2]" ng-repeat="industry in COMPANY_INDUSTRY_FIELDS"  ng-click="selectIndustry(industry[0])"> \n            <img ng-class="{{imgClasses}}" src="{{industry[2]}}"/>\n            <input type="checkbox" class="checkbox" ng-checked="company.companyIndustry === industry[0]" />\n            <span class="u_ellipsis-md ng-binding"> <b>{{industry[1]}}</b> </span>\n          </li>\n        </ul>\n      </div>\n    </form>\n  </div> <!-- //Modal Body -->\n\n  <div class="modal-footer"> \n    <button id="saveButton" class="btn btn-primary ng-binding" ng-click="save()" ng-disabled="forms.companyIcpForm.$invalid">\n      Apply \n      <i class="fa fa-check icon-right"></i>\n    </button> \n\n    <button id="cancelButton" class="btn btn-link pull-left" ng-click="dismiss()">Ask Me Later </button> \n  </div>\n\n\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[]);
}app.run(["$templateCache",function(e){"use strict";e.put("company-selector-modal.html",'\n<form role="form">\n\t<div class="modal-header">\n\t\t<button type="button" class="close" data-dismiss="modal"\n\t\t  aria-hidden="true" ng-click="closeModal()">\n\t\t\t<i class="fa fa-times"></i>\n\t\t</button>\n\t\t<h2 id="switch-company" class="modal-title">\n\t\t\tSelect Sub-Company\n\t\t</h2>\n\t</div>\n\t<div class="modal-body select-subcompany-modal" stop-event="touchend">\n\t  <!-- Search -->\n\t\t<search-filter filter-config="filterConfig" search="search" do-search="doSearch"></search-filter> \n\n\t\t<!-- List of Companies -->\n\t\t<div class="panel panel-default scrollable-list u_margin-sm-top"\n\t\t  scrolling-list="loadCompanies()"\n\t\t  rv-spinner rv-spinner-key="company-selector-modal-list"\n\t\t\trv-spinner-start-active="1"\n\t\t>\n\t\t\t<div class="list-group-item"  ng-repeat="company in companies.list" ng-click="setCompany(company)">\n\t\t\t\t<p class="list-group-item-text"><strong>{{company.name}}</strong><br/><small class="text-muted">{{company | fullAddress}}</small>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="modal-footer">\n\t\t<button type="button" class="btn btn-default btn-fixed-width" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">Cancel\n\t\t\t<i class="fa fa-white fa-times icon-right"></i>\n\t\t</button>\n\t</div>\n</form>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-settings-modal.html",'<div rv-spinner\n  rv-spinner-key="company-settings-modal"\n  rv-spinner-start-active="1">\n\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="company-settings-label" class="modal-title">Company Settings</h2>\n</div>\n<div class="modal-body company-settings-modal" stop-event="touchend">\n  <form id="companyForm" role="form" name="forms.companyForm">\n    <div ng-include="\'company-fields.html\'"></div>\n    <div class="form-group">\n      <label>\n        Authentication Key\n      </label>\n      <a class="action-link ps-reset-auth-key" href="" ng-click="resetAuthKey()">Reset</a>\n      <div class="ps-auth-key">\n        {{company.authKey}}\n      </div>\n    </div>\n    <div class="form-group">\n      <label>\n        Claim ID\n      </label>\n      <a class="action-link ps-reset-claim-id" href="" ng-click="resetClaimId()">Reset</a>\n      <div class="ps-claim-id">\n        {{company.claimId}}\n      </div>\n    </div>\n    <div class="form-group" ng-hide="true">\n      <label>\n        Sub-Company Home Page Presentation\n      </label>\n      <a class="action-link" href="" ng-click="showSelector()">Select</a>\n      <a class="action-link" href="">Default</a>\n      <div id="presentation-name">Rise Vision Default (ID=a6789044-ae4a-48c7-b6fd-b5d4ffea2f24)</div>\n      <div class="presentation-selector" ng-show="isSelectorVisible">\n        <div class="panel panel-default">\n          <ul class="list-unstyled selector-header">\n            <li ng-class="{active : selected == \'list\'}">\n              <a href="" ng-click="showPresentationView($event, \'list\')">Search Presentations</a>\n            </li>\n            <li ng-class="{active : selected == \'search\'}">\n              <a href="" ng-click="showPresentationView($event, \'search\')">Enter Presentation ID</a>\n            </li>\n            <li class="close-button">\n              <button type="button" class="close" aria-hidden="true" ng-click="closeSelector()">\n                <i class="fa fa-times"></i>\n              </button>\n            </li>\n          </ul>\n          <div class="panel-body">\n            <div class="presentation-list" ng-show="selected == \'list\'">\n              <div class="input-group search">\n                <input type="text" class="form-control" placeholder="Search Presentations">\n                <span class="input-group-btn">\n                  <button class="btn btn-primary" type="submit">\n                    <i class="fa fa-search fa-white"></i>\n                  </button>\n                </span>\n              </div>\n              <div class="list-group scrollable-list">\n                <a href="" class="list-group-item" ng-click="setPresentation($event, \'Demo Presentation\')">\n                  Demo Presentation\n                </a>\n                <a href="" class="list-group-item" ng-click="setPresentation($event, \'My First Presentation\')">\n                  My First Presentation\n                </a>\n              </div>\n            </div>\n            <div class="presentation-search" ng-show="selected == \'search\'">\n              <form role="form">\n                <div class="form-group">\n                  <input id="presentation-id" type="text" class="form-control" placeholder="Enter Presentation ID" />\n                </div>\n                <div class="form-group">\n                  <a href="" ng-click="setPresentation($event)">Retrieve Presentation</a>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="form-group" ng-hide="true">\n        <label for="company-settings-community-url">\n          Sub-Company Community URL\n        </label>\n        <a class="action-link" href="">Default</a>\n        <input id="company-settings-community-url" type="url" class="form-control" />\n      </div>\n      <div class="form-group" ng-hide="true">\n        <label for="company-settings-support-url">\n          Sub-Company Support URL\n        </label>\n        <a class="action-link" href="">Default</a>\n        <input id="company-settings-support-url" type="url" class="form-control" />\n      </div>\n      <div class="checkbox" ng-if="isRiseStoreAdmin">\n        <label>\n          <input type="checkbox" ng-model="company.isSeller" />\n          Registered Seller\n        </label>\n      </div>\n      <div class="checkbox" ng-if="isRiseStoreAdmin">\n        <label>\n          <input type="checkbox" ng-model="company.isTest" />\n          Test Company\n        </label>\n      </div>\n      <div class="form-group" ng-hide="true">\n        <label for="company-settings-status">\n          Status\n        </label>\n        <select id="company-settings-status" class="form-control selectpicker">\n          <option value="active">Active</option>\n          <option value="inactive">Inactive</option>\n        </select>\n      </div>\n    </form>\n  </div>\n  <div class="modal-footer">\n    <p class="visible-xs text-right"><last-modified change-date="company.changeDate" changed-by="company.changedBy"></last-modified></p>\n    <button type="button" id="delete-button" class="btn btn-danger btn-fixed-width pull-left"\n      ng-show="!isDeletingCompany" ng-click="deleteCompany()">\n      Delete <i class="fa fa-white fa-trash-o icon-right"></i>\n    </button>\n    <button type="button" class="btn btn-danger btn-confirm-delete" data-dismiss="modal" ng-show="isDeletingCompany" ng-click="closeModal()">\n      Confirm Deletion <i class="fa fa-white fa-warning icon-right"></i>\n    </button>\n    <div class="pull-right">\n      <span class="hidden-xs"><last-modified change-date="company.changeDate" changed-by="company.changedBy"></last-modified></span>\n      <button type="button" id="save-button"\n        class="btn btn-primary btn-fixed-width" ng-click="save()"\n        ng-disabled="forms.companyForm.$invalid">Save\n        <i class="fa fa-white fa-check icon-right"></i>\n      </button>\n      <button type="button" id="close-button"\n        class="btn btn-default btn-fixed-width" data-dismiss="modal" ng-click="closeModal()">Cancel\n        <i class="fa fa-white fa-times icon-right"></i>\n      </button>\n    </div>\n  </div>\n</div>\n</div> <!--spinner -->\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-users-modal.html",'<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal"\n    aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="company-users-label" class="modal-title">Company Users</h2>\n</div>\n<div class="modal-body company-users-modal" stop-event="touchend">\n  <!-- Search -->\n  <search-filter filter-config="filterConfig" search="search" do-search="doSearch"></search-filter> \n\n  <!-- List of Users -->\n  <div class="panel panel-default scrollable-list company-users-list u_margin-sm-top"\n    rv-spinner\n    rv-spinner-key="company-users-list"\n    rv-spinner-start-active="1">\n    <div class="list-group-item  company-users-list-item"\n      ng-repeat="user in users | orderBy:sort.field:sort.descending | filter:userSearchString" ng-click="editUser(user.username)">\n      <p class="list-group-item-text"><strong>{{user.firstName}} {{user.lastName}}</strong> <small class="text-muted">{{user.email}}</small></p>\n    </div>\n  </div>\n</div>\n<div class="modal-footer">\n  <button type="button" class="btn btn-success add-company-user-button"\n    ng-click="addUser()">Add User\n    <i class="fa fa-white fa-plus icon-right"></i>\n  </button>\n  <button type="button" class="btn btn-default close-company-users-button"\n    data-dismiss="modal" ng-click="closeModal()">\n    Cancel <i class="fa fa-white fa-times icon-right"></i>\n  </button>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("global-alerts.html",'<div class="container">\n  <div class="row">\n    <div class="col-md-12">\n      <div class="alert alert-danger" role="alert" ng-repeat="msg in errors">\n        <span ng-bind-html="msg"></span>\n        <button type="button" class="close pull-right"\n          ng-click="dismiss(\'errors\', $index);">\n          <i class="fa fa-times"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("help-dropdown-menu.html",'\n<ul>\n    <li><a id="getStartedButton" href="https://help.risevision.com/hc/en-us/articles/115002868706-Get-started-with-Rise-Vision" target="_blank">Get Started</a></li>\n    <li><a id="documentationButton" href="https://help.risevision.com" target="_blank">Help Center</a></li>\n    <li><a id="askCommunityButton" href="https://community.risevision.com" target="_blank">Ask the Community</a></li>\n    <li><a id="getSupportButton" ng-click="getSupport()" href="">Get Support</a></li>\n    <li><a id="askSalesButton" href="https://www.risevision.com/contact-us#sales" target="_blank">Ask Sales</a></li>\n</ul>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("help-dropdown.html",'<li ng-show="!isLoggedIn || (isLoggedIn && isRiseVisionUser)" dropdown class="dropdown hidden-xs">\n  <button id="helpDropdownButton" dropdown-toggle class="dropdown-toggle btn btn-primary"><span class="hidden-sm hidden-xs hidden-md">Need Help</span><i class="fa fa-question u_icon-white"></i></button>\n  <div class="dropdown-menu app-navigation" role="menu">\n      <ng-include\n              replace-include\n              src="\'help-dropdown-menu.html\'">\n      </ng-include>\n  </div>\n</li>\n\n<!-- Mobile -->\n<li ng-show="!isLoggedIn || (isLoggedIn && isRiseVisionUser)" class="visible-xs-inline-block" >\n    <button class="dropdown-toggle btn btn-primary"\n       action-sheet="\'help-dropdown-menu.html\'"\n       action-sheet-class="app-navigation">\n        <i class="fa fa-question u_icon-white"></i>\n    </button>\n</li>\n\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("help-priority-support-modal.html",'<div id="prioritySupportModal">\n    <div class="modal-header">\n        <button id="prioritySupportModalCloseButton" ng-click="dismiss()" type="button" class="close">\n            <i class="fa fa-times"></i>\n        </button>\n        <h2 class="modal-title">Priority Support</h2>\n    </div>\n    <div class="modal-body" stop-event="touchend">\n\n        <div class="u_margin-lg-bottom blank-state">\n            <div class="product-graphic" ng-show="[\'trial-available\', \'not-subscribed\'].indexOf(subscriptionStatus.statusCode) >= 0">\n                <img itemprop="image" class="img-responsive" src="https://s3.amazonaws.com/Store-Products/Rise-Vision/support_image.png">\n            </div>\n\n            <div class="content-box-body" ng-show="subscriptionStatus.statusCode != \'subscribed\'">\n                <div class="product-intro">\n                    <h1>Priority Support</h1>\n                    <p class="lead">Get the help you need in 10 minutes or less, 8-5 CST Monday through Friday, or let us remotely connect, diagnose and correct display problems all without the need for you to intervene!</p>\n                    <p class="lead">$75 per Company per Month.</p>\n                    <a class="btn btn-hg btn-primary" href="{{supportProductUrl}}" ng-click="dismiss()" target="_blank">\n                        <span>Subscribe Now!</span>\n                    </a>\n                </div>\n            </div>\n        </div><!--blank-state-->\n    </div>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("help-send-us-a-note-modal.html",'<div id="sendUsANoteModal">\n    <div class="modal-header">\n        <button id="sendUsANoteModalCloseButton" ng-click="dismiss()" type="button" class="close">\n            <i class="fa fa-times"></i>\n        </button>\n        <h2 class="modal-title"></h2>\n    </div>\n    <div class="modal-body text-center" stop-event="touchend">\n        <p class="lead">Send us a note and we typically get back to you within 2-3 business days.</p>\n\n        <a ng-if="!loggedIn" href="https://www.risevision.com/contact/" target="_blank" class="btn btn-primary btn-lg">\n          Contact Support\n        </a>\n        <button ng-if="loggedIn" class="btn btn-primary btn-lg" ng-click="sendUsANote()">\n          Contact Support\n        </button>\n\n        <div class="content-box u_margin-md-top u_remove-bottom">\n          <div class="content-box-body">\n            <p class="lead u_margin-left u_margin-right">\n                <strong>Need help fast?</strong>\n                Check out Priority Support and have a response in <strong>10 minutes</strong>. We are online 8-5 CST Monday through Friday.\n            </p>\n\n            <a class="btn btn-primary btn-lg" href="{{supportProductUrl}}" ng-click="dismiss();" target="_blank">\n                Subscribe Now\n            </a>\n      </div><!--content-box-body-->\n    </div>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("move-company-modal.html",'<div rv-spinner\n  rv-spinner-key="move-company-modal"\n  rv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="move-company-label" class="modal-title">Move Company</h2>\n</div>\n<div class="modal-body move-company-modal" stop-event="touchend">\n  <form role="form">\n    <div class="form-group">\n      <label for="auth-key">\n        Enter the Authentication Key of the Company that you want to move.\n      </label>\n      <div class="row">\n        <div class="col-sm-6">\n          <input id="auth-key" type="text" class="form-control"\n          ng-model="company.authKey" />\n        </div>\n        <div class="col-sm-6">\n          <a href="" class="btn btn-secondary retrieve-company-details-button"\n          ng-disabled="!company.authKey"\n          ng-click="getCompany()">Retrieve Company Details</a>\n        </div>\n      </div>\n    </div>\n  </form>\n  <div ng-show="company.name" class="company-details-info">\n    <h3>Details of the Company You Want to Move</h3>\n    <div>\n      {{company.name}}<br>\n      {{company.address}}\n      {{company.city}}, {{company.province}}, {{company.country}} {{company.postalCode}}\n    </div>\n    <h3>Details of the Company You Are Moving the Above Company Under</h3>\n    <div class="to-company">\n      {{selectedCompany.name}}<br>\n      {{selectedCompany.address}}<br>\n      {{selectedCompany.city}}, {{selectedCompany.province}},\n      {{selectedCompany.country}} {{selectedCompany.postalCode}}\n    </div>\n  </div>\n  <div ng-show="errors.length > 0">\n    <div class="alert alert-danger" ng-repeat="error in errors">\n      {{error}}\n    </div>\n  </div>\n  <div ng-show="messages.length > 0">\n    <div class="alert alert-success" ng-repeat="message in messages">\n      {{message}}\n    </div>\n  </div>\n</div>\n<div class="modal-footer">\n  <button type="button"\n    class="btn btn-success move-company-button"\n    ng-show="company.name && !moveSuccess" ng-click="moveCompany()">Move Company\n    <i class="fa fa-white fa-check icon-right"></i>\n  </button>\n  <button type="button" class="btn btn-default btn-fixed-width close-move-company-button" data-dismiss="modal" ng-click="closeModal()">\n    {{dismissButtonText}} <i class="fa fa-white fa-times icon-right"></i>\n  </button>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("registration-modal.html",'<div rv-spinner\nrv-spinner-key="registration-modal"\nrv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close registration-cancel-button" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 class="modal-title">Let\'s finish with your details</h2>\n</div>\n<div class="modal-body registration-modal" stop-event="touchend">\n  \n  <div class="row">\n    <div class="col-sm-8">\n\n      <form id="registrationForm" novalidate role="form" name="forms.registrationForm">\n        <!-- First Name -->\n        <div class="form-group" ng-class="{ \'has-error\' : forms.registrationForm.firstName.$invalid && !forms.registrationForm.firstName.$pristine }">\n          <label for="firstName">First Name</label>\n          <input type="text" class="form-control firstName"\n          name="firstName"\n          id="firstName" required\n          ng-model="profile.firstName">\n          <p ng-show="forms.registrationForm.firstName.$invalid && !forms.registrationForm.firstName.$pristine"\n            class="help-block validation-error-message-first-name">Enter First Name.</p>\n        </div>\n        <!-- Last Name -->\n        <div class="form-group" ng-class="{ \'has-error\' : forms.registrationForm.lastName.$invalid && !forms.registrationForm.lastName.$pristine }">\n          <label for="lastName">Last Name</label>\n          <input type="text" class="form-control lastName"\n          name="lastName"\n          id="lastName" required\n          ng-model="profile.lastName">\n          <p ng-show="forms.registrationForm.lastName.$invalid && !forms.registrationForm.lastName.$pristine"\n            class="help-block validation-error-message-last-name">Enter Last Name.</p>\n        </div>\n        <!-- Email -->\n        <div class="form-group" ng-class="{ \'has-error\' : forms.registrationForm.email.$invalid && !forms.registrationForm.email.$pristine }">\n          <label for="email">Email <span>(We\'ll only send you system notices and other critical information)</span></label>\n          <input type="email" class="form-control email"\n          name="email"\n          id="email" required\n          ng-model="profile.email">\n          <p ng-show="forms.registrationForm.email.$invalid && !forms.registrationForm.email.$pristine"\n            class="help-block validation-error-message-email">Enter a valid email.</p>\n        </div>\n        <!-- Website -->\n        <div class="form-group" ng-show="newUser">\n          <label for="website">Company Website</label>\n          <input type="text" class="form-control website"\n          name="website"\n          id="website"\n          ng-model="company.website">\n        </div>\n        <!-- Terms of Service and Privacy -->\n        <div class="checkbox form-group" ng-class="{ \'has-error\' : forms.registrationForm.accepted.$invalid && !userForm.accepted.$pristine }">\n          <label>\n          <input type="checkbox" name="accepted"\n            ng-model="profile.accepted"\n            class="accept-terms-checkbox" required />\n          I accept the terms of <a href="https://www.risevision.com/terms-of-service" target="_blank">Service and Privacy</a>\n          <p ng-show="forms.registrationForm.accepted.$invalid && !forms.registrationForm.accepted.$pristine"\n            class="help-block validation-error-message-accepted">You must accept terms and condtions.</p>\n          </label>\n        </div>\n        <!-- Newsletter -->\n        <div class="checkbox form-group">\n          <label>\n            <input type="checkbox" class="sign-up-newsletter-checkbox" ng-model="profile.mailSyncEnabled"> Sign up for our newsletter\n          </label>\n        </div>\n        <div class="u_margin-md-top">\n          <button ng-click="save()"\n            name="create-account"\n            type="button"\n            class="btn btn-lg btn-success btn-block registration-save-button"\n            ng-disabled="registering">\n            Create Account <i class="fa fa-white fa-check icon-right"></i>\n          </button>\n          <button type="button" class="btn hidden btn-lg btn-link btn-fixed-width"\n          ng-disabled="registering"\n          ng-click="closeModal()">\n            Cancel\n          </button>\n        </div>\n      </form>\n\n    </div>\n    <div class="col-sm-4">\n      <div class="signup-counters">\n        <div class="counter">\n          <p>129</p>\n          <span>New Companies Added Yesterday</span>\n        </div>\n        <div class="counter">\n          <p>72,990</p>\n          <span>Total Companies</span>\n        </div>\n        <div class="counter">\n          <p>120</p>\n          <span>Countries with Active Displays</span>\n        </div>\n      </div>\n    </div>\n  </div>  \n\n  \n</div>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("safe-delete-modal.html",'<form id="safeDeleteForm">\n  <div class="modal-header">\n    <button type="button" class="close" ng-click="dismiss()" data-dismiss="modal" aria-hidden="true">\n      <i class="fa fa-times"></i>\n    </button>\n    <h3 class="modal-title" translate>common.safeDelete.title</h3>\n  </div>\n  <div class="modal-body" stop-event="touchend">\n    <p translate>common.safeDelete.message</p>\n    <input id="safeDeleteInput" type="text" ng-model="inputText" class="form-control" />\n  </div>\n  <div class="modal-footer">\n    <button id="deleteForeverButton" class="btn btn-primary" ng-click="confirm()" ng-disabled="!canConfirm">\n      <span translate>common.delete-forever</span> <i class="fa fa-white fa-check icon-right"></i>\n    </button>\n    <button class="btn btn-default btn-fixed-width" ng-click="cancel()">\n      <span translate>common.cancel</span> <i class="fa fa-white fa-times icon-right"></i>\n    </button>\n  </div>\n</form>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("shoppingcart-button.html",'<li class="shopping-cart" ng-show="!hideShoppingCart && isRiseVisionUser">\n<a href="{{shoppingCartUrl}}" class="shopping-cart-button">\n  <i class="fa fa-shopping-cart"></i>\n  <span id="cartBadge" class="label label-primary" ng-show="cart.items.length">\n    {{cart.items.length | surpressZero}}</span>\n</a>\n</li>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("signout-modal.html",'<div class="modal-header">\n  <button type="button" class="close" ng-click="closeModal()" aria-hidden="true">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="sign-out-label" class="modal-title">Sign Out</h2>\n</div>\n<div class="modal-body sign-out-modal" stop-event="touchend">\n  <form role="form">\n    <p>\n      Signing out does not sign you out of your Google Account.\n    </p>\n    <p>\n      If you are on a shared computer you should sign out of your Google Account.\n    </p>\n    <p>\n      <button type="button" class="btn btn-default sign-out-rv-only-button" ng-click="signOut(false)">Sign Out\n        <i class="fa fa-sign-out fa-lg icon-right"></i>\n      </button>\n    </p>\n      <button type="button" class="btn btn-default sign-out-google-account" ng-click="signOut(true)">Sign Out of your Google Account\n        <i class="fa fa-google-plus-square fa-lg icon-right"></i>\n      </button>\n    <p>\n    </p>\n  </form>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("signup-modal.html",'<div class="modal-body text-center" stop-event="touchend">\n  <div class="signup-modal">\n    <div class="logo u_margin-lg-bottom hidden">\n      <img style="width:120px" src="//s3.amazonaws.com/Rise-Images/UI/logo.svg" alt="Rise Vision">\n    </div>\n    <h1 class="modal-title u_margin-md-top u_remove-bottom">New to Rise Vision?</h1>\n    <p class="text-muted">CREATE A FREE ACCOUNT</p>\n\n    <a class="u_margin-md-top btn btn-hg btn-google-auth" id="google-registration-button" ng-click="login(\'registrationComplete\')"><strong>Sign Up with Google</strong> <i class="fa fa-google fa-lg icon-right"></i></a>\n    <p class="text-muted u_remove-bottom u_margin-sm-top"><a href="https://accounts.google.com/signup" target="_blank">I don\'t have a Google Account</a></p>\n    <p class="text-muted hidden">Already a Rise Vision User? <a ng-click="$event.preventDefault(); login(\'registrationComplete\');" ng-href="#">Sign In</a></p>\n\n    <div class="signup-offer">\n      <p>Get <strong>Unlimited Access To All Features</strong> Including Our Most Popular Widgets</p>\n      <ul class="list-unstyled widgets-offer">\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Icons/web.png"><span>Web <br>Page</span></li>\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Icons/spreadsheet.png"><span>Google Spreadsheet</span></li>\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Icons/calendar.png"><span>Google Calendar</span></li>\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Icons/rss.png"><span>RSS <br>Feed</span></li>\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Icons/news.png"><span>News <br>Headlines</span></li>\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Icons/video.png"><span>Video <br>Folder</span></li>\n      </ul>\n    </div>\n  </div><!--signup-modal-->  \n</div><!--modal-body-->\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("subcompany-banner.html",'<div ng-show="isSubcompanySelected && !inRVAFrame"\n  class="common-header-alert sub-company-alert">\n  You\'re in Sub-Company {{selectedCompanyName}}&nbsp;\n  <a href="" ng-click="switchToMyCompany()" class="link-button">Switch to My Company</a>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("subcompany-modal.html",'<div rv-spinner\n  rv-spinner-key="add-subcompany-modal"\n  rv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" ng-click="closeModal()" aria-hidden="true">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="sub-company-label" class="modal-title">Add Sub-Company</h2>\n</div>\n<div class="modal-body add-subcompany-modal" stop-event="touchend">\n  <form role="form" name="forms.companyForm">\n    <div ng-include="\'company-fields.html\'"></div>\n    <div class="form-group">\n      <a href="" data-dismiss="modal" data-toggle="modal" class="move-subcompany-button"\n        ng-click="moveCompany()">Move a Company Under Your Company</a>\n    </div>\n  </form>\n</div>\n<div class="modal-footer">\n  <button type="button"\n    class="btn btn-success btn-fixed-width add-subcompany-save-button"\n    ng-click="save()" ng-disabled="forms.companyForm.$invalid">Save\n    <i class="fa fa-white fa-check icon-right"></i>\n  </button>\n  <button type="button" class="btn btn-default btn-fixed-width cancel-add-subcompany-button" ng-click="closeModal()">Cancel\n    <i class="fa fa-white fa-times icon-right"></i>\n  </button>\n</div>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("system-messages-button-menu.html",'<ul>\n  <li class="dropdown-header dropdown-title system-message">\n    Notifications\n  </li>\n  <li class="divider"></li>\n  <li class="system-message"\n    ng-repeat="message in messages"\n    ng-bind-html="renderHtml(message.text)">\n  </li>\n</ul>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("system-messages-button.html",'<!-- Desktop and tablet -->\n<li dropdown class="dropdown system-messages hidden-xs"\nng-show="isRiseVisionUser && messages.length > 0">\n  <a href="" dropdown-toggle class="dropdown-toggle system-messages-button">\n    <i class="fa fa-bell"></i>\n    <span class="label label-danger system-messages-badge">{{messages.length | surpressZero}}</span>\n  </a>\n  <div class="dropdown-menu system-messages system-message-list" role="menu">\n    <ng-include\n      src="\'system-messages-button-menu.html\'"\n    ></ng-include>\n  </div>\n</li>\n\n<!-- Mobile -->\n<li\n  class="system-messages"\n  ng-show="isRiseVisionUser  && messages.length > 0"\n  ng-class="{\'visible-xs-inline-block\': isRiseVisionUser && messages.length > 0}">\n    <a href=""\n      class="system-messages-button"\n      action-sheet="\'system-messages-button-menu.html\'"\n      action-sheet-class="system-message-list">\n        <i class="fa fa-bell"></i>\n        <span class="label label-danger system-messages-badge">{{messages.length}}</span>\n    </a>\n</li>\n');
}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("test-company-banner.html",'<div ng-show="isTestCompanySelected"\n  class="sub-company-alert test-company-alert">\n  This is a Test Company\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("user-settings-modal.html",'<div rv-spinner="spinnerOptions"\nrv-spinner-key="user-settings-modal"\nrv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="user-settings-label" class="modal-title">\n  <span ng-if="!isAdd">User Settings</span>\n  <span ng-if="isAdd">Add User</span>\n  </h2>\n</div>\n<div class="modal-body user-settings-modal" stop-event="touchend">\n  <form id="userSettingsForm" role="form" novalidate name="forms.userSettingsForm">\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.username.$invalid && !forms.userSettingsForm.username.$pristine }"\n    >\n      <label>\n        Username *\n      </label>\n      <div ng-if="!isAdd">{{user.username}}</div>\n      <input id="user-settings-username"\n        type="email" required name="username"\n        class="form-control"\n        ng-if="isAdd"\n        ng-model="user.username"\n        />\n        <p ng-show="forms.userSettingsForm.username.$invalid && !forms.userSettingsForm.username.$pristine"\n          class="help-block validation-error-message-email">User name must be a valid email address.</p>\n    </div>\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.firstName.$invalid && !forms.userSettingsForm.firstName.$pristine }">\n      <label for="user-settings-first-name">\n        First Name *\n      </label>\n      <input id="user-settings-first-name"\n        type="text" required name="firstName"\n        class="form-control"\n        ng-model="user.firstName"\n        />\n        <p ng-show="forms.userSettingsForm.firstName.$invalid && !forms.userSettingsForm.firstName.$pristine"\n          class="help-block validation-error-message-firstName">First Name is required.</p>\n    </div>\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.lastName.$invalid && !forms.userSettingsForm.lastName.$pristine }">\n      <label for="user-settings-last-name">\n        Last Name *\n      </label>\n      <input id="user-settings-last-name"\n        type="text" required name="lastName"\n        class="form-control"\n        ng-model="user.lastName"\n        />\n        <p ng-show="forms.userSettingsForm.lastName.$invalid && !forms.userSettingsForm.lastName.$pristine"\n          class="help-block validation-error-message-lastName">Last Name is required.</p>\n    </div>\n    <div class="form-group">\n      <label for="company-role">\n        Company Role\n      </label>\n      <select id="company-role" class="form-control selectpicker" ng-model="user.companyRole">\n        <option value="" ng-show="false">&lt; Select Role &gt;</option>\n        <option ng-repeat="role in COMPANY_ROLE_FIELDS" value="{{role[0]}}">{{role[1]}}</option>\n      </select>\n    </div>\n\n    <div class="form-group">\n      <label for="user-settings-phone">\n        Phone\n      </label>\n      <input\n        id="user-settings-phone"\n        type="tel"\n        name="phone"\n        class="form-control"\n        ng-model="user.telephone"\n         />\n    </div>\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.email.$invalid && !forms.userSettingsForm.email.$pristine }">\n      <label for="user-settings-email">\n        Email *\n      </label>\n      <input\n        id="user-settings-email"\n        type="email" required name="email"\n        class="form-control"\n        ng-model="user.email"\n        />\n        <p ng-show="forms.userSettingsForm.email.$invalid && !forms.userSettingsForm.email.$pristine"\n          class="help-block validation-error-message-email">A valid email address is required.</p>\n    </div>\n    <div class="form-group">\n      <label>\n        Roles\n      </label>\n      <div class="checkbox" ng-repeat="role in availableRoles"\n        ng-show="editRoleVisible(role)">\n        <label>\n          <input type="checkbox"\n            id="user-settings-{{role.key}}"\n            checklist-model="user.roles"\n            ng-disabled="!editRoleAllowed(role)"\n            checklist-value="role.key"> {{role.name}}\n        </label>\n      </div>\n    </div>\n    <div class="form-group" ng-if="user.lastLogin">\n      <label>\n        Last Login\n      </label>\n      <div>{{user.lastLogin | date:\'d-MMM-yyyy h:mm a\'}}</div>\n    </div>\n    <div class="form-group" ng-if="!editingYourself && !isAdd">\n      <label for="user-settings-status">\n        Status\n      </label>\n      <select id="user-settings-status"\n        class="form-control selectpicker" ng-model="user.status" integer-parser>\n        <option value="1">Active</option>\n        <option value="0">Inactive</option>\n      </select>\n    </div>\n  </form>\n</div>\n<div class="modal-footer">\n  <p class="text-right"><last-modified change-date="user.changeDate" changed-by="user.changedBy"></last-modified></p>\n  <button type="button" id="delete-button" class="btn btn-danger btn-fixed-width pull-left"\n    ng-if="!isAdd" ng-click="deleteUser()">\n    Delete <i class="fa fa-white fa-trash-o icon-right"></i>\n  </button>\n  <div class="pull-right">\n    <button type="button"\n      class="btn btn-primary btn-fixed-width"\n      data-dismiss="modal"\n      ng-click="save()" id="save-button">\n      Save <i class="fa fa-white fa-check icon-right"></i>\n    </button>\n    <button type="button" class="btn btn-default btn-fixed-width" ng-click="closeModal()">\n      Cancel <i class="fa fa-white fa-times icon-right"></i>\n    </button>\n  </div>\n</div>\n')}])}(),angular.module("risevision.common.header",["ui.router","risevision.common.account","risevision.common.gapi","risevision.common.config","risevision.core.cache","risevision.core.company","risevision.common.cookie","risevision.common.header.templates","risevision.common.header.directives","risevision.common.loading","risevision.common.i18n","risevision.ui-flow","risevision.common.systemmessages","risevision.core.systemmessages","risevision.core.countries","risevision.core.oauth2","risevision.common.geodata","risevision.store.data-gadgets","risevision.core.userprofile","risevision.common.registration","risevision.common.shoppingcart","checklist-model","ui.bootstrap","ngSanitize","ngCsv","ngTouch","risevision.common.components.userstate","risevision.common.components.last-modified","risevision.common.components.search-filter","risevision.common.components.scrolling-list","risevision.common.components.stop-event","risevision.common.components.analytics","risevision.common.components.message-box","risevision.common.components.svg","risevision.common.support","risevision.common.email"]).factory("bindToScopeWithWatch",[function(){return function(e,n,t){t.$watch(function(){return e.call()},function(e){t[n]=e})}}]).directive("commonHeader",["$modal","$rootScope","$q","$loading","$interval","oauth2APILoader","$log","$templateCache","userState","$location","bindToScopeWithWatch","$document","cookieTester","companyIcpFactory",function(e,n,t,o,a,s,i,r,l,c,u,d,m,p){return{restrict:"E",template:r.get("common-header.html"),scope:!1,link:function(e,t,o){p.init(),m.checkCookies().then(function(){e.cookieEnabled=!0},function(){e.cookieEnabled=!1}),e.navCollapsed=!0,e.inRVAFrame=l.inRVAFrame(),e.isSubcompanySelected=l.isSubcompanySelected,e.isTestCompanySelected=l.isTestCompanySelected,e[o.navOptions]||(e.navOptions=[{title:"Home",link:"#/"},{title:"Store",link:""},{title:"Account",link:""},{title:"Sellers",link:""},{title:"Platform",link:"http://rva.risevision.com/",target:"_blank"}]),e.hideShoppingCart="0"!==o.hideShoppingCart&&"false"!==o.hideShoppingCart,e.hideHelpMenu="0"!==o.hideHelpMenu&&"false"!==o.hideHelpMenu,n.redirectToRoot="0"!==o.redirectToRoot&&"false"!==o.redirectToRoot,n.newTabHome="0"!==o.newTabHome&&"false"!==o.newTabHome,u(l.isRiseVisionUser,"isRiseVisionUser",e),n.$on("$stateChangeSuccess",function(){e.inRVAFrame&&c.search("inRVA",e.inRVAFrame)});var a=d[0].createElement("meta");a.id="viewport",a.name="viewport",a.content="width=device-width, initial-scale=1, user-scalable=no",d[0].getElementsByTagName("head")[0].appendChild(a)}}}]).run(["segmentAnalytics","SEGMENT_API_KEY","ENABLE_INTERCOM_MESSAGING","analyticsEvents","$document",function(e,n,t,o,a){o.initialize(),e.load(n,t),a.on("keydown",function(e){var n=!1;if(8===e.keyCode){var t=e.srcElement||e.target;n=("INPUT"!==t.tagName.toUpperCase()||"TEXT"!==t.type.toUpperCase()&&"PASSWORD"!==t.type.toUpperCase()&&"FILE"!==t.type.toUpperCase()&&"SEARCH"!==t.type.toUpperCase()&&"EMAIL"!==t.type.toUpperCase()&&"NUMBER"!==t.type.toUpperCase()&&"DATE"!==t.type.toUpperCase()&&"TEL"!==t.type.toUpperCase())&&"TEXTAREA"!==t.tagName.toUpperCase()||(t.readOnly||t.disabled)}n&&e.preventDefault()})}]).directive("ngEnter",function(){return function(e,n,t){n.bind("keydown keypress",function(n){13===n.which&&(e.$apply(function(){e.$eval(t.ngEnter)}),n.preventDefault())})}}),angular.module("risevision.common.header.directives",[]),angular.module("risevision.common.header.directives").directive("integerParser",[function(){return{require:"ngModel",link:function(e,n,t,o){o.$parsers.push(function(e){return parseInt(e,10)||0}),o.$formatters.push(function(e){return"undefined"==typeof e?"":""+e})}}}]),angular.module("risevision.common.header.directives").directive("emptySelectParser",[function(){return{require:"ngModel",link:function(e,n,t,o){o.$parsers.unshift(function(e){return null===e?"":e})}}}]),angular.module("risevision.common.header.directives").directive("companyButtons",["$templateCache",function(e){return{restrict:"E",scope:!1,replace:!0,template:e.get("company-buttons-menu.html"),link:function(){}}}]),angular.module("risevision.common.header.directives").directive("requireRole",["userState",function(e){return{restrict:"A",priority:1e5,scope:!1,compile:function(n,t){var o=!0,a=t.requireRole.split(" ");for(var s in a)e.hasRole(a[s])&&(o=!1);o&&(angular.forEach(n.children(),function(e){try{e.remove()}catch(n){}}),n.remove())}}}]),angular.module("risevision.common.header").controller("GlobalAlertsCtrl",["$scope","$rootScope",function(e,n){e.errors=[],e.$on("risevision.user.authorized",function(){e.errors.length=0}),n.$on("risevision.common.globalError",function(n,t){e.errors.push(t)}),e.dismiss=function(n,t){e[n].splice(t,1)}}]),angular.module("risevision.common.header").controller("HelpDropdownButtonCtrl",["zendesk","$scope","supportFactory","userState",function(e,n,t,o){n.$watch(function(){return o.isLoggedIn()},function(t){n.isLoggedIn=t,t&&e.ensureScript()}),n.$watch(function(){return o.isRiseVisionUser()},function(e){n.isRiseVisionUser=e}),n.getSupport=function(){t.handleGetSupportAction()}}]),angular.module("risevision.common.header").controller("HelpPrioritySupportModalCtrl",["$scope","$modalInstance","subscriptionStatus","supportFactory","SUPPORT_PRODUCT_URL",function(e,n,t,o,a){e.subscriptionStatus=t,e.supportProductUrl=a,e.dismiss=function(){n.dismiss()}}]),angular.module("risevision.common.header").controller("HelpSendUsANoteModalCtrl",["$scope","$modalInstance","supportFactory","zendesk","userState","SUPPORT_PRODUCT_URL",function(e,n,t,o,a,s){e.loggedIn=a.isLoggedIn(),e.supportProductUrl=s,e.sendUsANote=function(){o.showSendNote(),e.dismiss()},e.prioritySupport=function(){o.showWidget(),e.dismiss()},e.startTrial=function(){t.initiateTrial().then(function(){e.dismiss()})},e.dismiss=function(){n.dismiss()}}]),angular.module("risevision.common.header").controller("AuthButtonsCtr",["$scope","$modal","$templateCache","userState","userAuthFactory","$loading","cookieStore","$log","uiFlowManager","oauth2APILoader","bindToScopeWithWatch","$window","APPS_URL",function(e,n,t,o,a,s,i,r,l,c,u,d,m){window.$loading=s,e.inRVAFrame=o.inRVAFrame(),e.spinnerOptions={color:"#999",hwaccel:!0,radius:10},e.$on("risevision.user.signedOut",function(){i.remove("surpressRegistration")}),e.$on("risevision.uiStatus.validationCancelled",function(){i.remove("surpressRegistration")}),e.$watch(function(){return l.isStatusUndetermined()},function(n){e.undetermined=n,e.loading=n}),e.$watch(function(){return l.getStatus()},function(a,s){a&&(r.debug("status changed from",s,"to",a),"registeredAsRiseVisionUser"===a?(!o.registrationModalInstance&&o.isLoggedIn()&&(o.registrationModalInstance=n.open({template:t.get("registration-modal.html"),controller:"RegistrationModalCtrl",backdrop:"static",resolve:{account:["getUserProfile","getAccount",function(e,n){return e(o.getUsername()).then(null,function(e){return e&&"User has not yet accepted the Terms of Service"===e.message?n():null})["catch"](function(){return null})}]}})),o.registrationModalInstance.result["finally"](function(){o.registrationModalInstance=null,l.invalidateStatus()})):"signedInWithGoogle"===a&&e.login())}),e.$watch(function(){return o.isLoggedIn()},function(n){e.isLoggedIn=n,n===!0&&(e.userPicture=o.getUserPicture())}),e.$watch(function(){return o.getUserCompanyName()},function(){e.companyName=o.getUserCompanyName()}),e.$watch(function(){return o.getUsername()},function(){e.username=o.getUsername()}),u(o.isRiseVisionUser,"isRiseVisionUser",e),e.login=function(e){s.startGlobal("auth-buttons-login"),a.authenticate(!0).then()["finally"](function(){s.stopGlobal("auth-buttons-login"),l.invalidateStatus(e)})},e.alertSettings=function(){var e=m+"/alerts?cid="+o.getSelectedCompanyId();d.location.href=e},e.userSettings=function(e){n.open({template:t.get("user-settings-modal.html"),controller:"UserSettingsModalCtrl",size:e,resolve:{username:function(){return o.getUsername()},add:function(){return!1}}})},s.startGlobal("auth-buttons-silent"),c().then()["finally"](function(){a.authenticate(!1).then()["finally"](function(){s.stopGlobal("auth-buttons-silent"),l.isStatusUndetermined()||l.invalidateStatus("registrationComplete")})})}]),angular.module("risevision.common.header").controller("SignUpModalCtrl",["$scope","userAuthFactory","uiFlowManager","$loading",function(e,n,t,o){e.login=function(e){o.startGlobal("auth-buttons-login"),n.authenticate(!0).then()["finally"](function(){o.stopGlobal("auth-buttons-login"),t.invalidateStatus(e)})}}]),angular.module("risevision.common.header").controller("SignUpButtonCtrl",["$scope","$modal",function(e,n){e.openSignUpModal=function(){n.open({templateUrl:"signup-modal.html",controller:"SignUpModalCtrl"})}}]),angular.module("risevision.common.header").controller("CompanyButtonsCtrl",["$scope","$modal","$templateCache","userState","getCoreCountries",function(e,n,t,o,a){e.inRVAFrame=o.inRVAFrame(),e.$watch(function(){return o.isSubcompanySelected()},function(){e.isSubcompanySelected=o.isSubcompanySelected()}),e.$watch(function(){return o.getSelectedCompanyName()},function(n){n&&(e.selectedCompanyName=o.getSelectedCompanyName())}),e.$watch(function(){return o.isRiseVisionUser()},function(n){e.isRiseVisionUser=n,n===!0&&(e.isUserAdmin=o.isUserAdmin(),e.isPurchaser=o.isPurchaser())}),e.$watch(function(){return o.isRiseAdmin()},function(n){e.isRiseVisionAdmin=n}),e.addSubCompany=function(){n.open({template:t.get("subcompany-modal.html"),controller:"SubCompanyModalCtrl",size:"lg",resolve:{countries:function(){return a()}}})},e.companySettings=function(){n.open({template:t.get("company-settings-modal.html"),controller:"CompanySettingsModalCtrl",size:"lg",resolve:{companyId:function(){return o.getSelectedCompanyId()},countries:function(){return a()}}})},e.companyUsers=function(e){n.open({template:t.get("company-users-modal.html"),controller:"CompanyUsersModalCtrl",size:e,backdrop:!0,resolve:{company:function(){return o.getCopyOfSelectedCompany()}}})},e.switchCompany=function(){var e=n.open({template:t.get("company-selector-modal.html"),controller:"companySelectorCtr",backdrop:!0,resolve:{companyId:function(){return o.getSelectedCompanyId()}}});e.result.then(o.switchCompany)},e.moveCompany=function(e){n.open({template:t.get("move-company-modal.html"),controller:"MoveCompanyModalCtrl",size:e})},e.resetCompany=function(){o.resetCompany()}}]),angular.module("risevision.common.header").filter("surpressZero",function(){return function(e){return e?e:""}}).controller("ShoppingCartButtonCtrl",["$scope","shoppingCart","userState","$log","STORE_URL",function(e,n,t,o,a){e.shoppingCartUrl=a+"shopping-cart",e.cart={},e.cart.items=n.getItems(),e.$watch(function(){return t.isRiseVisionUser()},function(t){e.isRiseVisionUser=t,n.get()})}]),angular.module("risevision.common.header").controller("CloseFrameButtonCtrl",["$scope","$log","gadgetsService",function(e,n,t){e.closeIFrame=function(){n.debug("gadgetsService.closeIFrame"),t.closeIFrame()}}]),angular.module("risevision.common.header").controller("SystemMessagesButtonCtrl",["$scope","userState","$log","$sce","getCoreSystemMessages","systemMessages",function(e,n,t,o,a,s){e.messages=s,e.$watch(function(){return n.isRiseVisionUser()},function(n){e.isRiseVisionUser=n}),e.renderHtml=function(e){return o.trustAsHtml(e)},s.registerRetriever(function(){return a(n.getSelectedCompanyId())}),e.$watch(function(){return n.getSelectedCompanyId()},function(n){null!==n?s.resetAndGetMessages().then(e.apply):s.clear()})}]),angular.module("risevision.common.header").controller("RegisterButtonCtrl",["$scope","cookieStore","uiFlowManager",function(e,n,t){e.register=function(){n.remove("surpressRegistration"),t.invalidateStatus("registrationComplete")}}]),angular.module("risevision.common.header").controller("RegistrationModalCtrl",["$scope","$modalInstance","$loading","registerAccount","$log","cookieStore","userState","pick","uiFlowManager","humanReadableError","agreeToTermsAndUpdateUser","account","segmentAnalytics","bigQueryLogging","analyticsEvents","updateCompany","$q",function(e,n,t,o,a,s,i,r,l,c,u,d,m,p,g,f,h){e.newUser=!d;var v=d?d:i.getCopyOfProfile()||{};e.company={},s.remove("surpressRegistration"),e.profile=r(v,"email","mailSyncEnabled","firstName","lastName"),e.registering=!1,e.profile.accepted=angular.isDefined(v.termsAcceptanceDate)&&null!==v.termsAcceptanceDate,angular.isDefined(e.profile.mailSyncEnabled)||(e.profile.mailSyncEnabled=!1),e.closeModal=function(){s.put("surpressRegistration",!0),n.dismiss("cancel")};var y=e.$watch(function(){return l.isStatusUndetermined()},function(e){e===!0?t.start("registration-modal"):e===!1&&("registrationComplete"===l.getStatus()&&(n.close("success"),y()),t.stop("registration-modal"))}),b=function(){return e.newUser&&e.company.website?f(i.getUserCompanyId(),e.company):h.defer().resolve()};e.save=function(){if(e.forms.registrationForm.accepted.$pristine=!1,e.forms.registrationForm.firstName.$pristine=!1,e.forms.registrationForm.lastName.$pristine=!1,e.forms.registrationForm.email.$pristine=!1,!e.forms.registrationForm.$invalid){e.registering=!0,t.start("registration-modal");var a;a=e.newUser?o(i.getUsername(),e.profile):u(i.getUsername(),e.profile),a.then(function(){i.refreshProfile().then()["finally"](function(){b(),g.identify(),m.track("User Registered",{companyId:i.getUserCompanyId(),companyName:i.getUserCompanyName(),isNewCompany:e.newUser}),p.logEvent("User Registered"),n.close("success"),t.stop("registration-modal")})},function(e){alert("Error: "+c(e)),console.error(e)})["finally"](function(){e.registering=!1,i.refreshProfile()})}},e.forms={}}]),angular.module("risevision.common.header").controller("MoveCompanyModalCtrl",["$scope","$modalInstance","moveCompany","lookupCompany","userState","$loading",function(e,n,t,o,a,s){e.company={},e.errors=[],e.messages=[],e.$watch("loading",function(e){e?s.start("move-company-modal"):s.stop("move-company-modal")}),e.selectedCompany=a.getCopyOfSelectedCompany(),e.closeModal=function(){n.dismiss("cancel")},e.moveCompany=function(){e.messages=[],e.loading=!0,t(e.company.authKey,a.getSelectedCompanyId()).then(function(){e.messages.push("Success. The company has been moved under your company."),e.moveSuccess=!0},function(n){e.errors.push("Error: "+JSON.stringify(n))})["finally"](function(){e.loading=!1})},e.getCompany=function(){e.errors=[],e.messages=[],e.loading=!0,o(e.company.authKey).then(function(n){angular.extend(e.company,n)},function(n){e.errors.push("Failed to retrieve company. "+n.message)})["finally"](function(){e.loading=!1})},e.$watch("moveSuccess",function(n){n?e.dismissButtonText="Close":e.dismissButtonText="Cancel"})}]),angular.module("risevision.common.header").controller("CompanySettingsModalCtrl",["$scope","$modalInstance","updateCompany","companyId","countries","REGIONS_CA","REGIONS_US","TIMEZONES","getCompany","regenerateCompanyField","$window","$loading","humanReadableError","userState","userAuthFactory","deleteCompany","segmentAnalytics","$modal","$templateCache","COMPANY_INDUSTRY_FIELDS","COMPANY_SIZE_FIELDS",function(e,n,t,o,a,s,i,r,l,c,u,d,m,p,g,f,h,v,y,b,C){function S(n){e.isRiseStoreAdmin?n.sellerId=n.isSeller?"yes":null:(delete n.sellerId,delete n.isTest)}e.company={id:o},e.countries=a,e.regionsCA=s,e.regionsUS=i,e.timezones=r,e.COMPANY_INDUSTRY_FIELDS=b,e.COMPANY_SIZE_FIELDS=C,e.isRiseStoreAdmin=p.isRiseStoreAdmin(),e.$watch("loading",function(e){e?d.start("company-settings-modal"):d.stop("company-settings-modal")}),e.loading=!1,e.forms={},o&&(e.loading=!0,l(o).then(function(n){e.company=n,e.company.isSeller=!(!n||!n.sellerId)},function(e){u.alert("An error has occurred. "+m(e))})["finally"](function(){e.loading=!1})),e.closeModal=function(){n.dismiss("cancel")},e.save=function(){e.loading=!0;var o=angular.copy(e.company);S(o),t(e.company.id,o).then(function(){h.track("Company Updated",{companyId:p.getSelectedCompanyId(),companyName:p.getSelectedCompanyName(),isUserCompany:!p.isSubcompanySelected()}),p.updateCompanySettings(e.company),n.close("success")})["catch"](function(e){u.alert("Error(s): "+m(e))})["finally"](function(){e.loading=!1})},e.deleteCompany=function(){var t=v.open({template:y.get("safe-delete-modal.html"),controller:"SafeDeleteModalCtrl"});t.result.then(function(){e.loading=!0,f(e.company.id).then(function(){h.track("Company Deleted",{companyId:p.getSelectedCompanyId(),companyName:p.getSelectedCompanyName(),isUserCompany:!p.isSubcompanySelected()}),p.getUserCompanyId()===e.company.id?g.signOut():p.getSelectedCompanyId()===e.company.id&&p.resetCompany(),n.close("success")})["catch"](function(e){u.alert("Error(s): "+m(e))})["finally"](function(){e.loading=!1})})},e.resetAuthKey=function(){u.confirm("Resetting the Company Authentication Key will cause existing Data Gadgets to no longer report data until they are updated with the new Key.")&&(d.start("company-settings-modal"),c(e.company.id,"authKey").then(function(n){e.company.authKey=n.item,u.alert("Successfully changed Authentication Key.")},function(e){u.alert("Error: "+m(e))})["finally"](function(){d.stop("company-settings-modal")}))},e.resetClaimId=function(){u.confirm("Resetting the Company Claim Id will cause existing installations to no longer be associated with your Company.")&&(d.start("company-settings-modal"),c(e.company.id,"claimId").then(function(n){e.company.claimId=n.item,u.alert("Successfully changed Claim ID.")},function(e){u.alert("Error: "+m(e))})["finally"](function(){d.stop("company-settings-modal")}))}}]),angular.module("risevision.common.header").controller("SubCompanyModalCtrl",["$scope","$modalInstance","$modal","$templateCache","createCompany","countries","REGIONS_CA","REGIONS_US","TIMEZONES","userState","$loading","humanReadableError","segmentAnalytics","bigQueryLogging",function(e,n,t,o,a,s,i,r,l,c,u,d,m,p){e.company={},e.countries=s,e.regionsCA=i,e.regionsUS=r,e.timezones=l,e.forms={},e.$watch("loading",function(e){e?u.start("add-subcompany-modal"):u.stop("add-subcompany-modal")}),e.closeModal=function(){n.dismiss("cancel")},e.save=function(){e.loading=!0,a(c.getSelectedCompanyId(),e.company).then(function(e){m.track("Company Created",{companyId:e.id,companyName:e.name}),p.logEvent("Company Created",e.name,null,c.getUsername(),e.id),n.close("success")},function(e){alert("Error: "+d(e))})["finally"](function(){e.loading=!1})},e.moveCompany=function(e){t.open({template:o.get("move-company-modal.html"),controller:"MoveCompanyModalCtrl",size:e})}}]),angular.module("risevision.common.header").controller("companySelectorCtr",["$scope","$modalInstance","companyService","companyId","BaseList","$loading",function(e,n,t,o,a,s){var i=40;e.companies=new a(i),e.search={query:""},e.filterConfig={placeholder:"Search Companies"},e.$watch("loading",function(e){e?(s.start("company-selector-modal"),s.start("company-selector-modal-list")):(s.stop("company-selector-modal"),s.stop("company-selector-modal-list"))}),e.closeModal=function(){n.dismiss("cancel")},e.loadCompanies=function(){e.companies.endOfList||(e.loading=!0,t.getCompanies(o,e.search.query,e.companies.cursor,i,null).then(function(n){n&&n.items&&e.companies.add(n.items,n.cursor)})["finally"](function(){e.loading=!1}))},0===e.companies.list.length&&e.loadCompanies(),e.doSearch=function(){e.companies.clear(),e.loadCompanies()},e.setCompany=function(e){n.close(e.id)}}]),angular.module("risevision.common.header").controller("SubcompanyBannerCtrl",["$scope","$modal","$loading","userState",function(e,n,t,o){e.inRVAFrame=o.inRVAFrame(),e.$watch(function(){return o.getSelectedCompanyId()},function(){e.isSubcompanySelected=o.isSubcompanySelected(),e.selectedCompanyName=o.getSelectedCompanyName()}),e.switchToMyCompany=function(){o.resetCompany()}}]),angular.module("risevision.common.header").controller("TestCompanyBannerCtrl",["$scope","userState",function(e,n){e.$watch(function(){return n.isTestCompanySelected()},function(n){e.isTestCompanySelected=n})}]),angular.module("risevision.common.header").filter("roleLabel",["userRoleMap",function(e){return function(n){return e[n]}}]).controller("CompanyUsersModalCtrl",["$scope","$modalInstance","$modal","$templateCache","company","getUsers","$loading",function(e,n,t,o,a,s,i){e.$watch("loading",function(e){e?i.start("company-users-list"):i.stop("company-users-list")}),e.sort={field:"username",descending:!1},e.search={query:""},e.filterConfig={placeholder:"Search Users"},e.changeSorting=function(n){var t=e.sort;t.field===n?t.descending=!t.descending:(t.field=n,t.descending=!1)};var r=function(){e.loading=!0,s({companyId:a.id,search:e.search.query}).then(function(n){e.users=n})["finally"](function(){e.loading=!1})};r(),e.addUser=function(e){var n=t.open({template:o.get("user-settings-modal.html"),controller:"AddUserModalCtrl",size:e,resolve:{companyId:function(){return a.id}}});n.result["finally"](r)},e.editUser=function(e,n){var a=t.open({template:o.get("user-settings-modal.html"),controller:"UserSettingsModalCtrl",size:n,resolve:{username:function(){return e},add:function(){return!1}}});a.result["finally"](r)},e.closeModal=function(){n.dismiss("cancel")},e.doSearch=function(){e.users=[],r()}}]),angular.module("risevision.common.header").controller("AddUserModalCtrl",["$scope","$filter","addUser","userEmail","$modalInstance","companyId","userState","userRoleMap","humanReadableError","messageBox","$loading","segmentAnalytics","COMPANY_ROLE_FIELDS",function(e,n,t,o,a,s,i,r,l,c,u,d,m){e.isAdd=!0,e.COMPANY_ROLE_FIELDS=m,e.availableRoles=[],angular.forEach(r,function(n,t){e.availableRoles.push({key:t,name:n})}),e.$watch("user.status",function(n){e.user&&"string"==typeof e.user.status&&(e.user.status=parseInt(n))}),e.$watch("loading",function(e){e?u.start("user-settings-modal"):u.stop("user-settings-modal")}),e.save=function(){e.forms.userSettingsForm.email.$pristine=!1,e.forms.userSettingsForm.username.$pristine=!1,e.forms.userSettingsForm.firstName.$pristine=!1,e.forms.userSettingsForm.lastName.$pristine=!1,e.forms.userSettingsForm.$invalid||(e.loading=!0,t(s,e.user.username,e.user).then(function(){d.track("User Created",{userId:e.user.username,companyId:s}),o.send(e.user.username,e.user.email),a.close("success")},function(t){var o="Error: "+l(t);409===t.code&&(o=n("translate")("common-header.user.error.duplicate-user",{username:e.user.username})),c("common-header.user.error.add-user",o)})["finally"](function(){e.loading=!1}))},e.closeModal=function(){a.dismiss("cancel")},e.editRoleAllowed=function(e){return!!i.isRiseAdmin()||!!i.isUserAdmin()&&("sa"!==e.key&&"ba"!==e.key)},e.editRoleVisible=function(e){return i.isRiseAdmin()?!i.isSubcompanySelected()||"sa"!==e.key&&"ba"!==e.key:!(!i.isUserAdmin()&&!i.isRiseVisionUser())&&("sa"!==e.key&&"ba"!==e.key)},e.forms={}}]),angular.module("risevision.common.header").controller("UserSettingsModalCtrl",["$scope","$filter","$modalInstance","updateUser","getUserProfile","deleteUser","username","userRoleMap","$log","$loading","userState","userAuthFactory","uiFlowManager","humanReadableError","messageBox","$rootScope","segmentAnalytics","COMPANY_ROLE_FIELDS",function(e,n,t,o,a,s,i,r,l,c,u,d,m,p,g,f,h,v){e.user={},e.$watch("loading",function(e){e?c.start("user-settings-modal"):c.stop("user-settings-modal")}),e.availableRoles=[],angular.forEach(r,function(n,t){e.availableRoles.push({key:t,name:n})}),e.COMPANY_ROLE_FIELDS=v,e.$watch("user.status",function(n){"string"==typeof e.user.status&&(e.user.status=parseInt(n))}),e.isUserAdmin=u.isUserAdmin(),e.username=i,e.loading=!0,a(i).then(function(n){e.user=n,e.editingYourself=u.checkUsername(n.username)})["finally"](function(){e.loading=!1}),e.closeModal=function(){t.dismiss("cancel")},e.deleteUser=function(){confirm("Are you sure you want to delete this user?")&&s(e.username).then(function(){h.track("User Deleted",{userId:e.username,companyId:u.getSelectedCompanyId(),isSelf:u.checkUsername(i)}),u.checkUsername(i)&&d.signOut().then()["finally"](function(){m.invalidateStatus("registrationComplete")})})["finally"](function(){t.dismiss("deleted")})},e.save=function(){e.forms.userSettingsForm.email.$pristine=!1,e.forms.userSettingsForm.firstName.$pristine=!1,e.forms.userSettingsForm.lastName.$pristine=!1,e.forms.userSettingsForm.$invalid||(e.loading=!0,o(i,e.user).then(function(n){u.checkUsername(i)&&u.updateUserProfile(n.item),h.track("User Updated",{userId:e.username,companyId:u.getSelectedCompanyId(),isSelf:u.checkUsername(i)}),t.close("success")},function(t){l.debug(t);var o="Error: "+p(t);409===t.code&&(o=n("translate")("common-header.user.error.duplicate-user",{username:e.user.username})),g("common-header.user.error.update-user",o)})["finally"](function(){e.loading=!1}))},e.editRoleAllowed=function(n){return!!u.isRiseAdmin()||!!u.isUserAdmin()&&("sa"!==n.key&&"ba"!==n.key&&("ua"!==n.key||!u.checkUsername(e.user.username)))},e.editRoleVisible=function(e){return u.isRiseAdmin()?!u.isSubcompanySelected()||"sa"!==e.key&&"ba"!==e.key:!(!u.isUserAdmin()&&!u.isRiseVisionUser())&&("sa"!==e.key&&"ba"!==e.key)},e.forms={}}]),angular.module("risevision.common.header").controller("CompanyIcpModalCtrl",["$scope","$modalInstance","company","user","COMPANY_INDUSTRY_FIELDS","COMPANY_SIZE_FIELDS","COMPANY_ROLE_FIELDS",function(e,n,t,o,a,s,i){e.company=t,e.user=o,e.COMPANY_INDUSTRY_FIELDS=a,e.COMPANY_SIZE_FIELDS=s,e.COMPANY_ROLE_FIELDS=i,e.dismiss=function(){n.dismiss(o)},e.save=function(){n.close({user:o,company:t})},e.selectIndustry=function(e){t.companyIndustry!==e?t.companyIndustry=e:t.companyIndustry=""}}]),angular.module("risevision.common.header").controller("SignOutButtonCtrl",["$scope","$modal","$templateCache","uiFlowManager",function(e,n,t,o){e.logout=function(){var e=n.open({template:t.get("signout-modal.html"),controller:"SignOutModalCtrl"
});e.result["finally"](function(){o.invalidateStatus("registrationComplete")})}}]),angular.module("risevision.common.header").controller("SignOutModalCtrl",["$scope","$modalInstance","$log","userAuthFactory",function(e,n,t,o){e.closeModal=function(){n.dismiss("cancel")},e.signOut=function(e){o.signOut(e).then(function(){t.debug("user signed out")},function(e){console.error("sign out failed",e)})["finally"](function(){n.dismiss("success")})}}]),angular.module("risevision.common.header").controller("SafeDeleteModalCtrl",["$scope","$modalInstance",function(e,n){e.inputText=null,e.canConfirm=!1,e.$watch("inputText",function(){e.canConfirm="DELETE"===e.inputText}),e.confirm=function(){e.canConfirm&&n.close()},e.cancel=function(){n.dismiss("cancel")},e.dismiss=function(){n.dismiss()}}]),angular.module("risevision.common.header").service("offCanvas",["$window",function(e){var n={visible:!1,enabled:!1};return n.enabled=angular.element(e).width()<=1200,n.toggle=function(e){e&&e.stopPropagation(),(n.enabled||n.visible)&&(n.visible=!n.visible,n.visible?n.nav.addClass("is-off-canvas-opened"):n.nav.removeClass("is-off-canvas-opened"))},n.registerNav=function(e){n.nav=e,n.nav.addClass("off-canvas--container")},window.onresize=function(){n.enabled=angular.element(e).width()<=1200},n}]).directive("offCanvasNav",["offCanvas",function(e){return{restrict:"A",link:function(n,t){t.addClass("off-canvas--nav"),e.registerNav(t),t.bind("tap",e.toggle),t.bind("click",e.toggle)}}}]).directive("offCanvasToggle",["offCanvas",function(e){return{restrict:"A",link:function(n,t){t.bind("tap",e.toggle),t.bind("click",e.toggle)}}}]),angular.module("risevision.common.header").directive("actionSheet",["$document","$compile","$timeout",function(e,n,t){return{restrict:"A",link:function(o,a,s){var i=e.find("body").eq(0),r=!1,l=document.getElementById("action-sheet-backdrop");angular.isObject(l)?l=angular.element(l):(l=angular.element('<div id="action-sheet-backdrop" class="modal-backdrop"></div>'),i.append(l)),o.templateUrl=o.$eval(s.actionSheet),o.title=o.$eval(s.title);var c=angular.element('<div class="action-sheet is-action-sheet-closed"><ng-include src="templateUrl"></ng-include></div>'),u=n(c)(o);i.append(u);var d=function(){r=!r,r?(u.toggleClass("is-action-sheet-closed"),t(function(){u.toggleClass("is-action-sheet-opened"),l.toggleClass("is-action-sheet-opened")})):(u.toggleClass("is-action-sheet-opened"),l.toggleClass("is-action-sheet-opened"),t(function(){u.toggleClass("is-action-sheet-closed")},500)),r?(l.bind("tap",d),l.bind("click",d)):(l.unbind("tap"),l.unbind("click"))};s.actionSheetClass&&s.actionSheetClass.split(" ").forEach(function(e){u.addClass(e)}),a.bind("tap",d),a.bind("click",d),c.bind("tap",d),c.bind("click",d)}}}]).directive("replaceInclude",function(){return{require:"ngInclude",restrict:"A",link:function(e,n){n.replaceWith(n.children())}}}),angular.module("risevision.common.geodata",[]).value("REGIONS_CA",[["Alberta","AB"],["British Columbia","BC"],["Manitoba","MB"],["New Brunswick","NB"],["Newfoundland and Labrador","NL"],["Northwest Territories","NT"],["Nova Scotia","NS"],["Nunavut","NU"],["Ontario","ON"],["Prince Edward Island","PE"],["Quebec","QC"],["Saskatchewan","SK"],["Yukon Territory","YT"]]).value("REGIONS_US",[["Alabama","AL"],["Alaska","AK"],["Arizona","AZ"],["Arkansas","AR"],["California","CA"],["Colorado","CO"],["Connecticut","CT"],["Delaware","DE"],["District of Columbia","DC"],["Florida","FL"],["Georgia","GA"],["Hawaii","HI"],["Idaho","ID"],["Illinois","IL"],["Indiana","IN"],["Iowa","IA"],["Kansas","KS"],["Kentucky","KY"],["Louisiana","LA"],["Maine","ME"],["Maryland","MD"],["Massachusetts","MA"],["Michigan","MI"],["Minnesota","MN"],["Mississippi","MS"],["Missouri","MO"],["Montana","MT"],["Nebraska","NE"],["Nevada","NV"],["New Hampshire","NH"],["New Jersey","NJ"],["New Mexico","NM"],["New York","NY"],["North Carolina","NC"],["North Dakota","ND"],["Ohio","OH"],["Oklahoma","OK"],["Oregon","OR"],["Pennsylvania","PA"],["Rhode Island","RI"],["South Carolina","SC"],["South Dakota","SD"],["Tennessee","TN"],["Texas","TX"],["Utah","UT"],["Vermont","VT"],["Virginia","VA"],["Washington","WA"],["West Virginia","WV"],["Wisconsin","WI"],["Wyoming","WY"]]).value("TIMEZONES",[["(GMT -12:00) International Dateline West","-720"],["(GMT -11:00) Midway Island, Samoa","-660"],["(GMT -10:00) Hawaii","-600"],["(GMT -09:00) Alaska","-540"],["(GMT -08:00) Pacific Time (US & Canada], Tijuana","-480"],["(GMT -07:00) Mountain Time (US & Canada)","-420"],["(GMT -06:00) Central Time (US & Canada)","-360"],["(GMT -05:00) Eastern Time (US & Canada)","-300"],["(GMT -04:00) Atlantic Time (Canada)","-240"],["(GMT -03:30) NewfoundLand Time (Canada)","-210"],["(GMT -03:00) Buenos Aires, Georgetown","-180"],["(GMT -02:00) Mid-Atlantic","-120"],["(GMT -01:00) Cape Verde Is.","-60"],["(GMT  00:00) Dublin, Edinburgh, Lisbon, London","0"],["(GMT +01:00) Amsterdam, Berlin, Bern, Rome, Paris, Stockholm, Vienna","60"],["(GMT +02:00) Athens, Bucharest, Istanbul, Minsk","120"],["(GMT +03:00) Moscow, St. Petersburg, Volgograd","180"],["(GMT +03:30) Tehran","210"],["(GMT +04:00) Abu Dhabi, Muscat","240"],["(GMT +04:30) Kabul","270"],["(GMT +05:00) Islamabad, Karachi, Tashkent","300"],["(GMT +05:30) Calcutta, Chennai, Mumbai,New Delhi","330"],["(GMT +05:45) Kathmandu","345"],["(GMT +06:00) Astana,Almaty, Dhaka, Novosibirsk","360"],["(GMT +06:30) Rangoon (Yangon, Burma)","390"],["(GMT +07:00) Bangkok, Hanoi, Jakarta","420"],["(GMT +08:00) Beijing, Chongqing, Hong Kong, Urumqi","480"],["(GMT +09:00) Osaka, Sapporo, Tokyo","540"],["(GMT +09:30) Adelaide, Darwin","570"],["(GMT +10:00) Canberra, Melbourne, Sydney, Vladvostok","600"],["(GMT +11:00) Magadan, Solomon Is., New Caledonia","660"],["(GMT +12:00) Auckland, Fiji, Kamchatka, Marshall Is.","720"],["(GMT +13:00) Nuku'alofa","780"]]),function(e){"use strict";e.module("risevision.ui-flow",["LocalStorageModule"]).constant("uiStatusDependencies",{_dependencies:{},_retries:{},addDependencies:function(n){e.extend(this._dependencies,n)},setMaximumRetryCount:function(e,n){if(n<1)throw"Retry count for "+e+" must be equal to or greater than 1.";void 0===this._retries[e]&&(this._retries[e]=n)}}).factory("uiFlowManager",["$log","$q","$injector","uiStatusDependencies","$rootScope","localStorageService",function(n,t,o,a,s,i){var r,l,c,u=null,d=a._dependencies,m=function(){return function(){var e=t.defer();return e.resolve(!0),e.promise}},p=function(e){var t;try{t=o.get(e)}catch(a){n.debug("Generating dummy status",e),t=m()}return t},g=function(o){var a;n.debug("Attempting to reach status",o,"...");var s=d[o];if(s){s instanceof Array||(s=[s]);var i=t.defer(),r=i;e.forEach(s,function(e){var s=t.defer();i.promise.then(s.resolve,function(){g(e).then(function(){d[e]&&n.debug("Deps for status",e,"satisfied."),p(o)().then(function(){n.debug("Status",o,"satisfied."),s.resolve(!0)},function(){n.debug("Status",o,"not satisfied."),s.reject(o)})},function(t){d[e]?(n.debug("Failed to reach status",e," because its dependencies are not satisfied. Last rejected dep: ",t),s.reject(t)):s.reject(e)})}),a=i=s}),r.reject()}else a=t.defer(),p(o)().then(function(){n.debug("Termination status",o,"satisfied."),a.resolve(!0)},function(){n.debug("Termination status",o,"not satisfied."),a.reject(o)});return a.promise},f=!0,h=function(o){if(!o&&!l){var s=t.defer();return s.resolve(),s.promise}return!l&&f&&(l=o,u=e.copy(a._retries),c=t.defer(),f=!1),l&&(c=t.defer(),g(l).then(function(e){l&&(r=l),c.resolve(e),l=null,f=!0},function(e){r=e,void 0!==u[e]&&(0===u[e]?(n.debug("Maximum allowed retries for status",e,"reached. Validation will cancel."),b()):u[e]--),f=!0,c.reject(e)})),c&&c.promise},v=function(e){return r="pendingCheck",h(e)},y=function(){i.set("risevision.ui-flow.state",{goalStatus:l,retriesLeft:u})},b=function(){r="",l="",u=null,f=!0,s.$broadcast("risevision.uiStatus.validationCancelled"),n.debug("UI status validation cancelled.")};if(i.get("risevision.ui-flow.state")){var C=i.get("risevision.ui-flow.state");C&&C.goalStatus&&(l=C.goalStatus,n.debug("uiFlowManager.goalStatus restored to",C.goalStatus,C.retriesLeft),u=C.retriesLeft,c=t.defer(),f=!1),i.remove("risevision.ui-flow.state")}var S={invalidateStatus:v,cancelValidation:b,getStatus:function(){return r},isStatusUndetermined:function(){return"pendingCheck"===r},persist:y};return S}])}(angular),function(e){"use strict";e.module("risevision.common.account",["risevision.common.gapi","risevision.core.userprofile","risevision.core.cache"]).factory("agreeToTerms",["$q","riseAPILoader","$log","userInfoCache",function(e,n,t,o){return function(){t.debug("agreeToTerms called.");var a=e.defer();return n().then(function(e){var n=e.account.agreeToTerms();n.execute(function(e){t.debug("agreeToTerms resp",e),o.removeAll(),e.error?a.reject(e.error):a.resolve()})}),a.promise}}]).factory("agreeToTermsAndUpdateUser",["$q","$log","agreeToTerms","updateUser",function(e,n,t,o){return function(a,s){n.debug("registerAccount called.",a,s);var i=e.defer();return t().then()["finally"](function(){o(a,s).then(function(e){e.result?i.resolve():i.reject()},i.reject)["finally"]("registerAccount ended")}),i.promise}}]).factory("registerAccount",["$q","$log","addAccount","updateUser",function(e,n,t,o){return function(a,s){n.debug("registerAccount called.",a,s);var i=e.defer();return t().then()["finally"](function(){o(a,s).then(function(e){e.result?i.resolve():i.reject()},i.reject)["finally"]("registerAccount ended")}),i.promise}}]).factory("addAccount",["$q","riseAPILoader","$log",function(e,n,t){return function(){t.debug("addAccount called.");var o=e.defer();return n().then(function(e){var n=e.account.add();n.execute(function(e){t.debug("addAccount resp",e),e.result?o.resolve():o.reject("addAccount")})}),o.promise}}]).factory("getAccount",["$q","riseAPILoader","$log",function(e,n,t){return function(){t.debug("getAccount called.");var o=e.defer();return n().then(function(e){var n=e.account.get();n.execute(function(e){t.debug("getAccount resp",e),e.item?o.resolve(e.item):o.reject("getAccount")})}),o.promise}}])}(angular),function(e){"use strict";e.module("risevision.common.registration",["risevision.common.components.userstate","risevision.ui-flow","risevision.core.userprofile","risevision.common.gapi"]).config(["uiStatusDependencies",function(e){e.addDependencies({registerdAsRiseVisionUser:"signedInWithGoogle",registeredAsRiseVisionUser:"signedInWithGoogle",registrationComplete:["notLoggedIn","registeredAsRiseVisionUser"]}),e.setMaximumRetryCount("signedInWithGoogle",1)}]).factory("signedInWithGoogle",["$q","userState",function(e,n){return function(){var t=e.defer();return n.isLoggedIn()?t.resolve():t.reject("signedInWithGoogle"),t.promise}}]).factory("notLoggedIn",["$q","$log","signedInWithGoogle",function(e,n,t){return function(){var n=e.defer();return t().then(function(){n.reject("notLoggedIn")},n.resolve),n.promise}}]).factory("registeredAsRiseVisionUser",["$q","getUserProfile","cookieStore","$log","userState",function(n,t,o,a,s){return function(){var i=n.defer();return t(s.getUsername()).then(function(n){e.isDefined(n.email)&&e.isDefined(n.mailSyncEnabled)?i.resolve(n):o.get("surpressRegistration")?i.resolve({}):i.reject("registeredAsRiseVisionUser")},function(e){o.get("surpressRegistration")?i.resolve({}):(a.debug("registeredAsRiseVisionUser rejected",e),i.reject("registeredAsRiseVisionUser"))}),i.promise}}])}(angular),angular.module("risevision.common.support",["risevision.widget.common.subscription-status"]).factory("supportFactory",["getSubscriptionStatus","$q","SUPPORT_PRODUCT_CODE","STORE_SERVER_URL","userState","$modal","$templateCache","$window","segmentAnalytics","zendesk","$log",function(e,n,t,o,a,s,i,r,l,c,u){var d={},m="Premium",p="Free";d.handleGetSupportAction=function(){g().then(function(){d.openZendeskForm()},function(){h()})};var g=function(){var t=n.defer();return e().then(function(e){var n=!1;if("subscribed"===e.statusCode)n=!0;else if("cancelled"===(e.statusCode||"").toLowerCase()){console.log(e);var o=new Date(e.expiry);n=o>new Date}n?(f(m),t.resolve(e)):(f(p),t.reject(e))},function(e){u.debug("Could not retrieve a subscription status",e),t.reject()}),t.promise},f=function(e){l.identify(a.getUsername(),{plan:e})};d.openZendeskForm=function(){c.showWidget()};var h=function(){u.debug("opening send us a note popup"),s.open({template:i.get("help-send-us-a-note-modal.html"),controller:"HelpSendUsANoteModalCtrl"})};return d}]).factory("getSubscriptionStatus",["SUPPORT_PRODUCT_CODE","userState","$q","subscriptionStatusService","$log",function(e,n,t,o,a){return function(){var s=t.defer();return e&&n.getSelectedCompanyId()?o.get(e,n.getSelectedCompanyId()).then(function(e){a.debug("subscriptionStatus",e),s.resolve(e)},function(e){a.debug("Could not retrieve a subscription status",e),s.reject(e)}):s.reject(),s.promise}}]),function(e){"use strict";e.module("risevision.common.support").factory("zendesk",["getSubscriptionStatus","segmentAnalytics","userState","$window","$q","$location","$log",function(e,n,t,o,a,s,i){function r(){if(!h){o.zESettings={webWidget:{helpCenter:{title:{"*":"Let's Find You an Answer"},searchPlaceholder:{"*":"Let's find you an answer"},messageButton:{"*":"Open a Support Ticket"}},chat:{suppress:!0},contactForm:{title:{"*":"Open a Support Ticket"},messageButton:{"*":"Open a Support Ticket"}}}};var e=a.defer(),n='window.zEmbed||function(e,t){var n,o,d,i,s,a=[],r=document.createElement("iframe");window.zEmbed=function(){a.push(arguments)},window.zE=window.zE||window.zEmbed,r.src="javascript:false",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="display: none",d=document.getElementsByTagName("script"),d=d[d.length-1],d.parentNode.insertBefore(r,d),i=r.contentWindow,s=i.document;try{o=s}catch(e){n=document.domain,r.src=\'javascript:var d=document.open();d.domain="\'+n+\'";void(0);\',o=s}o.open()._l=function(){var o=this.createElement("script");n&&(this.domain=n),o.id="js-iframe-async",o.src=e,this.t=+new Date,this.zendeskHost=t,this.zEQueue=a,this.body.appendChild(o)},o.write(\'<body onload="document._l();">\'),o.close()}("https://assets.zendesk.com/embeddable_framework/main.js","risevision.zendesk.com");',t=o.document.createElement("script");return t.innerText=n,o.document.body.appendChild(t),h=!0,o.zE(function(){o.zE.hide(),e.resolve()}),e.promise}return a.when()}function l(){var i=a.defer();return o.zE(function(){var o=t.getUsername(),a={email:t.getUserEmail(),rise_vision_company_id:t.getUserCompanyId()};e().then(function(e){e&&"subscribed"===e.statusCode?s.search("cHJpb3JpdHktc3VwcG9ydA",1):s.search("cHJpb3JpdHktc3VwcG9ydA",null),n.identify(o,a),i.resolve()})["catch"](i.reject)}),i.promise}function c(){return r().then(l).then(function(){s.search("c2VuZC11cy1hLW5vdGU",null)}).then(d)}function u(){return r().then(l).then(function(){s.search("c2VuZC11cy1hLW5vdGU",1),s.search("cHJpb3JpdHktc3VwcG9ydA",null)}).then(d)}function d(){var e=t.getUsername(),n={email:e};o.zE.identify(n),p(),o.zE.activate(),m()}function m(){v("iframe[class^=zEWidget]").contents().find(".Container").css("border","1px solid #4ab767")}function p(){if(!f){var n=t.getUsername(),o=t.getSelectedCompanyId();f=setInterval(function(){var t=v("iframe.zEWidget-webWidget--active");if(t&&t.contents){var a=t.contents().find("input[name=email]");a&&a.length>0&&(a.val(n),a.prop("disabled",!0),a.parents("label").parent().hide());var s=t.contents().find("input[name=24893323]");s&&s.length>0&&(e().then(function(e){var t=!1;i.info("Subscription status is",e),e&&"subscribed"===e.statusCode&&(t=1),s.val(JSON.stringify({riseVisionCompanyId:o,riseVisionUsername:n,prioritySupport:t}))})["catch"](function(e){i.error("error: ",e)}),s.prop("disabled",!0),s.parents("label").parent().hide(),i.debug("ZD form found!"),clearInterval(f),f=null)}},1e3)}}function g(){o.zE&&o.zE.hide&&(o.zE.hide(),f&&(clearInterval(f),f=null))}var f,h=!1,v=o.$;return{ensureScript:r,showWidget:c,showSendNote:u,forceCloseAll:g}}]).run(["$rootScope","zendesk",function(e,n){e.$on("$stateChangeSuccess",function(){n.forceCloseAll()})}])}(angular),function(e){"use strict";e.module("risevision.core.cache",[]).factory("userInfoCache",["$cacheFactory",function(e){return e("user-info-cache")}])}(angular),function(e){"use strict";e.module("risevision.core.util",[]).factory("pick",function(){var n=Array.prototype,t=n.slice,o=n.concat,a=function(e,n,t){if(void 0===n)return e;switch(null===t?3:t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,o){return e.call(n,t,o)};case 3:return function(t,o,a){return e.call(n,t,o,a)};case 4:return function(t,o,a,s){return e.call(n,t,o,a,s)}}return function(){return e.apply(n,arguments)}};return function(n,s,i){var r,l={};if(null===n)return l;if(e.isFunction(s)){s=a(s,i);for(r in n){var c=n[r];s(c,r,n)&&(l[r]=c)}}else{var u=o.apply([],t.call(arguments,1));n=new Object(n);for(var d=0,m=u.length;d<m;d++)r=u[d],r in n&&(l[r]=n[r])}return l}})}(angular),function(e){"use strict";e.module("risevision.core.userprofile",["risevision.common.gapi","risevision.core.oauth2"]).value("userRoleMap",{ce:"Content Editor",cp:"Content Publisher",da:"Display Administrator",ua:"System Administrator",pu:"Store Purchaser",sa:"Rise System Administrator",ba:"Rise Store Administrator"}).constant("USER_WRITABLE_FIELDS",["mailSyncEnabled","email","firstName","lastName","telephone","roles","status","companyRole","dataCollectionDate"]).factory("getUserProfile",["oauth2APILoader","coreAPILoader","$q","$log",function(e,n,t,o){var a,s={};return function(i,r){var l;if(i===a&&!r&&null!==s[i])return s[i].promise;if(a=i,s[i]=l=t.defer(),i){var c={};i&&(c.username=i),o.debug("getUserProfile called",c),t.all([e(),n()]).then(function(e){var n=e[1];n.user.get(c).execute(function(e){e.error||!e.result?l.reject(e):(o.debug("getUser resp",e),l.resolve(e.item))})},l.reject)}else l.reject("getUserProfile failed: username param is required."),o.debug("getUserProfile failed: username param is required.");return l.promise}}]).factory("updateUser",["$q","coreAPILoader","$log","getUserProfile","pick","USER_WRITABLE_FIELDS",function(e,n,t,o,a,s){return function(i,r){var l=e.defer();return r=a(r,s),t.debug("updateUser called",i,r),n().then(function(e){var n=e.user.patch({username:i,data:r});n.execute(function(e){t.debug("updateUser resp",e),e.error?l.reject(e):e.result?o(i,!0).then(function(){l.resolve(e)}):l.reject("updateUser")})},l.reject),l.promise}}]).factory("addUser",["$q","coreAPILoader","$log","pick","getUserProfile",function(e,n,t,o,a){return function(s,i,r){var l=e.defer();return n().then(function(e){r=o(r,"mailSyncEnabled","email","firstName","lastName","telephone","roles","status");var n=e.user.add({username:i,companyId:s,data:r});n.execute(function(e){t.debug("addUser resp",e),e.result?a(i,!0).then(function(){l.resolve(e)}):l.reject(e)})}),l.promise}}]).factory("deleteUser",["$q","coreAPILoader","$log",function(e,n,t){return function(o){var a=e.defer();return n().then(function(e){var n=e.user["delete"]({username:o});n.execute(function(e){t.debug("deleteUser resp",e),e.result?a.resolve(e):a.reject("deleteUser")})}),a.promise}}]).factory("getUsers",["$q","coreAPILoader","$log",function(e,n,t){return function(o){t.debug("getUsers",o);var a=e.defer();return n().then(function(e){var n=e.user.list(o);n.execute(function(e){t.debug("getUsers resp",e),e.result?a.resolve(e.items):a.reject("getUsers")})},a.reject),a.promise}}])}(angular),function(e){"use strict";e.module("risevision.core.company",["risevision.common.gapi","risevision.core.cache","risevision.core.util"]).constant("COMPANY_WRITABLE_FIELDS",["name","street","unit","city","province","country","postalCode","timeZoneOffset","telephone","fax","companyStatus","mailSyncEnabled","sellerId","isTest","shipToUseCompanyAddress","shipToName","shipToStreet","shipToUnit","shipToCity","shipToProvince","shipToPostalCode","shipToCountry","website","companySize","companyIndustry"]).constant("ALERTS_WRITABLE_FIELDS",["alertSettings"]).constant("COMPANY_SEARCH_FIELDS",["name","id","street","unit","city","province","country","postalCode","telephone","fax","shipToName","shipToStreet","shipToCity","shipToPostalCode"]).factory("company",["$q","$log","coreAPILoader","pick","ALERTS_WRITABLE_FIELDS",function(e,n,t,o,a){var s={updateAlerts:function(s,i){var r=e.defer(),l=o.apply(this,[i].concat(a)),c={id:s,data:l};return n.debug("updateAlerts called",s,l),t().then(function(e){return e.company.patch(c)}).then(function(e){n.debug("update Alerts resp",e),r.resolve(e.result)}).then(null,function(e){n.error("Failed to update Alerts.",e),r.reject(e)}),r.promise}};return s}]).factory("createCompany",["$q","coreAPILoader","COMPANY_WRITABLE_FIELDS","pick",function(e,n,t,o){return function(a,s){var i=e.defer();return n().then(function(e){var n=o.apply(this,[s].concat(t)),r=e.company.add({parentId:a,data:n});r.execute(function(e){e.result?i.resolve(e.item):i.reject(e)},i.reject)}),i.promise}}]).factory("getCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(o){t.debug("getCompany called",o);var a=n.defer();return e().then(function(e){var n={};o&&(n.id=o);var s=e.company.get(n);s.execute(function(e){t.debug("getCompany resp",e),e.result?a.resolve(e.item):a.reject(e)})}),a.promise}}]).factory("lookupCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(o){t.debug("lookupCompany called",o);var a=n.defer();return e().then(function(e){var n=e.company.lookup({authKey:o});n.execute(function(e){t.debug("lookupCompany resp",e),e.result?a.resolve(e.item):a.reject(e)})}),a.promise}}]).factory("moveCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(o,a){var s=n.defer();return e().then(function(e){var n=e.company.move({authKey:o,newParentId:a});n.execute(function(e){t.debug("moveCompany resp",e),e.result?s.resolve(e.item):s.reject(e)})}),s.promise}}]).factory("updateCompany",["$q","$log","coreAPILoader","pick","COMPANY_WRITABLE_FIELDS",function(e,n,t,o,a){return function(s,i){var r=e.defer();return i=o.apply(this,[i].concat(a)),n.debug("updateCompany called",s,i),t().then(function(e){var t=e.company.patch({id:s,data:i});t.execute(function(e){n.debug("updateCompany resp",e),e.result?r.resolve(e):r.reject(e)})}),r.promise}}]).factory("regenerateCompanyField",["$q","$log","coreAPILoader",function(e,n,t){return function(o,a){var s=e.defer();return n.debug("regenerateField called",o,a),t().then(function(e){var t=e.company.regenerateField({id:o,fieldName:a});t.execute(function(e){n.debug("regenerateField resp",e),e.error?s.reject(e.message):s.resolve(e)},function(e){s.reject("call failed "+e)})}),s.promise}}]).factory("deleteCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(o){t.debug("deleteCompany called",o);var a=n.defer();return e().then(function(e){var n={};o&&(n.id=o);var s=e.company["delete"](n);s.execute(function(e){t.debug("deleteCompany resp",e),e.result?a.resolve(e.item):a.reject(e)})}),a.promise}}]).service("companyService",["coreAPILoader","$q","$log","getCompany","COMPANY_SEARCH_FIELDS",function(e,n,t,o,a){var s=function(e,n){for(var t="",o=0;o<e.length;o++)t+="OR "+e[o]+":~'"+n+"' ";return t=t?t.substring(3):"",t.trim()};this.getCompanies=function(o,i,r,l,c){var u=n.defer(),d=i?s(a,i):"",m={companyId:o,search:d,cursor:r,count:l,sort:c};return t.debug("getCompanies called with",m),e().then(function(e){var n=e.company.list(m);n.execute(function(e){t.debug("getCompanies resp",e),u.resolve(e)})}),u.promise},this.loadSelectedCompany=function(e,t){var a=n.defer();return e&&e!==t.id?o(e).then(function(e){0===e.code&&e.item?a.resolve(e.item):a.resolve(t)}):a.resolve(t),a.promise}}]).filter("fullAddress",function(){return function(e){var n=(e.street?e.street+", ":"")+(e.city?e.city+", ":"")+(e.province?e.province+", ":"")+(e.country?e.country+", ":"")+(e.postalCode?e.postalCode+", ":"");return n&&(n=n.substr(0,n.length-2)),n}})}(angular),function(e){"use strict";e.module("risevision.core.oauth2",["risevision.common.gapi","risevision.core.cache"]).factory("getOAuthUserInfo",["oauth2APILoader","$q","userInfoCache","$log",function(e,n,t,o){return function(){var a,s=n.defer();return(a=t.get("oauth2UserInfo"))?a.error?s.reject(a.error):s.resolve(a):e().then(function(e){e.userinfo.get().execute(function(e){o.debug("getOAuthUserInfo oauth2.userinfo.get() resp",e),e?e.hasOwnProperty("error")?(t.remove("oauth2UserInfo"),s.reject(e.error)):(t.put("oauth2UserInfo",e),s.resolve(e)):(t.remove("oauth2UserInfo"),s.reject())})},s.reject),s.promise}}])}(angular),function(e){"use strict";e.module("risevision.core.systemmessages",["risevision.common.gapi"]).factory("getCoreSystemMessages",["gapiLoader","$q","$log",function(e,n,t){return function(o){var a=n.defer();return e().then(function(e){var n=e.client.core.systemmessage.list({companyId:o});n.execute(function(e){var n=e;n instanceof Array||!n.items||(n=n.items),t.debug("getCoreSystemMessage resp",n),a.resolve(n)})}),a.promise}}])}(angular),function(e){"use strict";e.module("risevision.core.countries",["risevision.common.gapi"]).factory("getCoreCountries",["coreAPILoader","$q","$log","$filter",function(e,n,t,o){var a;return function(){return a?a.promise:(a=n.defer(),e().then(function(e){return e.country.list()}).then(function(e){var n=e.result?e.result.items:[];n instanceof Array&&(n=o("orderBy")(n,"name")),a.resolve(n)}).then(null,function(e){t.debug("getCoreCountries failed",e),a.reject(e),a=null}),a.promise)}}]).factory("COUNTRIES",["getCoreCountries",function(e){var n=[];return e().then(function(e){Array.prototype.push.apply(n,e)}),n}])}(angular),angular.module("risevision.common.fastpass",[]).factory("loadFastpass",["$q","$http","$document","$timeout","GSFP_URL","$log",function(e,n,t,o,a,s){var i=function(n){var o=e.defer(),a=t[0].createElement("script");return a.onload=a.onreadystatechange=function(e){o.resolve(e)},a.onerror=function(e){o.reject(e)},a.src=n,t[0].body.appendChild(a),o.promise};return function(t,o){var r=e.defer();s.debug("loadFastpass called",t,o);var l=function(e){s.error("loadFastpass rejected",e),r.reject("loadFastpass rejected "+e)};return n.get(a+"/geturl?userEmail="+o+"&userName="+t).then(function(e){i(e.data).then(function(e){s.debug("loadFastpass result",e),r.resolve(!0)},l)["catch"](l)},r.reject),r.promise}}]),angular.module("risevision.common.header.directives").directive("fastpass",["loadFastpass","userState",function(e,n){return{restrict:"AE",scope:{},link:function(t){t.$watch(function(){return n.getUserEmail()},function(t){t&&e(n.getUsername(),n.getUserEmail())})}}}]),angular.module("risevision.common.header.directives").directive("linkCid",["userState",function(e){return{link:function(n,t,o){var a="",s=function(e){var n,t=o.href.indexOf("cid=");n=t>-1?o.href.substring(0,t+4)+e:o.href+(o.href.indexOf("?")===-1?"?":"&")+"cid="+e,a=e,o.$set("href",n)};n.$watch(function(){return e.getSelectedCompanyId()},function(e){e&&e!==a&&s(e)})}}}]),function(e){"use strict";e.module("risevision.common.shoppingcart",["risevision.common.gapi","risevision.common.components.userstate"]).factory("shoppingCart",["storeAPILoader","$log","$q","userState",function(n,t,o,a){var s=[],i={items:s,useBillToAddress:!1,shipToAttention:"",couponCode:""},r=function(){var e=o.defer();return a.isLoggedIn()?n().then(function(n){var o={id:a.getUsername()},s=n.cart.get(o);s.execute(function(n){n.error?(t.warn("Error loading cart items. Error: "+n.error),e.resolve()):(u(),d(n.items),i.useBillToAddress=n.useBillToAddress,i.shipToAttention=n.shipToAttention?n.shipToAttention:"",i.couponCode=n.couponCode,e.resolve())})}):(u(),e.resolve()),e.promise},l=function(){var e=o.defer();return a.isLoggedIn()&&n().then(function(n){try{var o={data:{jsonItems:p(s),shipToAttention:i.shipToAttention,useBillToAddress:i.useBillToAddress,couponCode:i.couponCode}},a=n.cart.put(o);a.execute(function(n){n.error?(t.warn("Error persisting cart items. Error: "+n.error),e.resolve()):e.resolve()})}catch(r){e.resolve(),console.error("[persistToStorage] - Unimplemented API method "+r.message)}}),e.promise},c=function(){i.useBillToAddress=!1,i.shipToAttention="",i.couponCode="",u()},u=function(){for(;s.length>0;)s.pop()},d=function(e){if(e)for(var n=0;n<e.length;n++)s.push(e[n])},m=function(e){for(var n,t=[],o=0;o<e.length;o++)n={productId:e[o].productId,qty:e[o].qty,accountingId:e[o].selected.accountingId,licensedDisplays:e[o].licensedDisplays},t.push(n);return t},p=function(e){var n=m(e);return JSON.stringify(n)},g=null,f=null,h={get:function(){if(null!==g&&a.checkUsername(f))return g;f=a.getUsername(),c(),g=o.defer();var e=g;return r().then(function(){e.resolve(i)}),e},clear:function(){u(),l(),t.debug("Shopping cart cleared.")},getItems:function(){return s},setItems:function(e){return t.debug("Setting cart items",e),e!==s&&(u(),d(e)),l()},getShipToAttention:function(){return i.shipToAttention},getUseBillToAddress:function(){return i.useBillToAddress},setAddressFields:function(e,n){return i.shipToAttention=e,i.useBillToAddress=n,l()},getCouponCode:function(){return i.couponCode},setCouponCode:function(e){return t.debug("Setting coupon code",e),i.couponCode=e,l()},getItemCount:function(){return null!==s?s.length:0},removeItem:function(e){if(e){for(var n=0;n<s.length;n++)if(s[n].productId===e.productId){s.splice(n,1);break}l()}},adjustItemQuantity:function(e,n){e&&$.isNumeric(n)&&n>0&&l()},addItem:function(n,t,o){if(a.isRiseVisionUser()){var i=this.findItem(n);(!i||"Subscription"!==n.paymentTerms&&"Metered"!==n.paymentTerms)&&n&&$.isNumeric(t)&&n.orderedPricing.length>o&&(i?i.qty=parseInt(i.qty)+parseInt(t):(i=e.copy(n),i.qty=t,s.push(i)),i.selected=n.orderedPricing[o],l())}},findItem:function(e){if(e)for(var n=0;n<s.length;n++)if(e.productId===s[n].productId)return s[n];return null},itemExists:function(e){return!(!a.isRiseVisionUser()||!e||null===this.findItem(e))}};return h}])}(angular),function(e){"use strict";e.module("risevision.common.currency",["risevision.common.gapi"]).factory("currencyService",["$q","storeAPILoader","$log",function(e,n,t){var o=null,a={defaultItem:null},s=function(e){this.country=e.country,this.currencyCode=e.currencyCode,this.description=e.description,this.bankAccountCode=e.bankAccountCode,this.bankAccountDescription=e.bankAccountDescription,this.getName=function(){return this.currencyCode.toUpperCase()},this.pickPrice=function(e,n){switch(this.currencyCode.toUpperCase()){case"CAD":return n;default:return e}}};return a.getByCountry=function(e){if(e)for(var n=0;n<this.items.length;n++)if(this.items[n].country&&this.items[n].country.toUpperCase()===e.toUpperCase())return this.items[n];return this.defaultItem},a.setItems=function(e){this.items=[];for(var n=0;n<e.length;n++){var t=new s(e[n]);this.items.push(t),t.country||(this.defaultItem=t)}},function(){return null!==o?o.promise:(o=e.defer(),t.debug("currencyService called"),n().then(function(e){var n=e.currency.list();n.execute(function(e){t.debug("currencyService resp",e),e.error?(console.error("currencyService error: ",e.error),o.reject(e.error)):(a.setItems(e.items),o.resolve(a))})}),o.promise)}}])}(angular);var gapiLoadingStatus=null,handleClientJSLoad=function(){gapiLoadingStatus="loaded",console.debug("ClientJS is loaded.");var e=document.createEvent("Events");e.initEvent("gapi.loaded",!0,!0),window.dispatchEvent(e)};angular.module("risevision.common.gapi",[]).factory("gapiLoader",["$q","$window",function(e,n){var t=e.defer();return function(){var e;if("loaded"===n.gapiLoadingStatus)t.resolve(n.gapi);else if(!n.gapiLoadingStatus){n.gapiLoadingStatus="loading";var o=n.gapiSrc||"//apis.google.com/js/client.js?onload=handleClientJSLoad",a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src",o),"undefined"!=typeof a&&document.getElementsByTagName("body")[0].appendChild(a),e=function(){t.resolve(n.gapi),n.removeEventListener("gapi.loaded",e,!1)},n.addEventListener("gapi.loaded",e,!1)}return t.promise}}]).factory("gapiClientLoaderGenerator",["$q","gapiLoader","$log",function(e,n,t){
return function(o,a,s){return function(){var i=e.defer();return n().then(function(e){e.client[o]?i.resolve(e.client[o]):e.client.load.apply(this,[o,a].concat([function(){if(e.client[o])t.debug(o+"."+a+" Loaded"),i.resolve(e.client[o]);else{var n=o+"."+a+" Load Failed";t.error(n),i.reject(n)}},s]))}),i.promise}}}]).factory("oauth2APILoader",["gapiClientLoaderGenerator",function(e){return e("oauth2","v2")}]).factory("coreAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("core","v1",o)}]).factory("riseAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("rise","v0",o)}]).factory("storeAPILoader",["STORE_ENDPOINT_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().store_api_base_url?t.search().store_api_base_url+"/_ah/api":e;return n("store","v0.01",o)}]).factory("storageAPILoader",["STORAGE_ENDPOINT_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().storage_api_base_url?t.search().storage_api_base_url+"/_ah/api":e;return n("storage","v0.01",o)}]).factory("discoveryAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("discovery","v1",o)}]).factory("monitoringAPILoader",["MONITORING_SERVICE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("monitoring","v0",o)}]),function(e){"use strict";e.module("risevision.common.systemmessages",[]).factory("systemMessages",["$log","$q",function(n,t){function o(e,t){n.debug("pushing message",e),t.push(e)}var a=[],s=[];return a.addMessages=function(n){n&&n instanceof Array&&(n=function(n){var t=[],o=new Date;return e.forEach(n,function(e){var n=new Date(e.endDate||"2199-12-31"),a=new Date(e.startDate||0);n.setDate(n.getDate()+1),o>a&&o<n&&t.push(e)}),t}(n),n.forEach(function(e){var n=!1;a.forEach(function(t){t.text===e.text&&(n=!0)}),n||o(e,a)}),a.sort(function(e,n){return!e.startDate||e.startDate>n.startDate?1:e.startDate&&e.startDate===n.startDate?0:-1}).reverse())},a.clear=function(){a.length=0,n.debug("System message cleared.")},a.registerRetriever=function(e){s.push(e)},a.resetAndGetMessages=function(){a.clear();var e=s.map(function(e){return e.call()});return t.all(e).then(function(e){e.forEach(a.addMessages)})},a}])}(angular),angular.module("risevision.store.data-gadgets",[]).service("gadgetsService",["$q",function(e){this.closeIFrame=function(){var n=e.defer();return gadgets.rpc.call("","rscmd_closeSettings",function(){n.resolve(!0)}),n.promise},this.sendProductCode=function(n){var t=e.defer(),o={params:n};return gadgets.rpc.call("","rscmd_saveSettings",function(){t.resolve(!0)},o),t.promise}}]),angular.module("risevision.common.cookie",["risevision.common.config"]).service("cookieTester",["$q","$document","$http","COOKIE_CHECK_URL",function(e,n,t,o){var a={};return a.checkCookies=function(){var n=e.defer();return e.all([a.checkLocalCookiePermission(),a.checkThirdPartyCookiePermission()]).then(function(){n.resolve()},function(){n.reject()}),n.promise},a.checkLocalCookiePermission=function(){return n[0].cookie="rv-test-local-cookie=yes",n[0].cookie.indexOf("rv-test-local-cookie")>-1?e.when(!0):e.reject(!1)},a.checkThirdPartyCookiePermission=function(){var n=e.defer();return t.get(o+"/createThirdPartyCookie",{withCredentials:!0}).then(function(){return t.get(o+"/checkThirdPartyCookie",{withCredentials:!0})}).then(function(e){"true"===e.data.check?n.resolve(!0):n.reject(!1)}).then(null,function(){n.resolve(!1)}),n.promise},a}]),angular.module("risevision.common.email",["risevision.common.gapi"]).constant("EMAIL_FROM","support@risevision.com").constant("EMAIL_FROM_NAME","Rise Vision Support").service("email",["$q","$log","riseAPILoader","EMAIL_FROM","EMAIL_FROM_NAME",function(e,n,t,o,a){var s={send:function(s,i,r){var l=e.defer(),c={from:o,fromName:a,recipients:s,subject:i,data:{text:r}};return t().then(function(e){return e.email.send(c)}).then(function(e){n.debug("email sent",e),l.resolve(e.result)}).then(null,function(e){console.error("Failed to send email.",e),l.reject(e)}),l.promise}};return s}]),angular.module("risevision.common.email").service("userEmail",["$templateCache","userState","email","$q",function(e,n,t,o){var a={};return a.sendingEmail=!1,a.send=function(s,i){if(!s||!i)return o.reject("Missing required parameters");var r=e.get("add-user-email.html");return r=r.replace("{{user.username}}",s),r=r.replace("{{user.companyName}}",n.getSelectedCompanyName()),a.sendingEmail=!0,t.send(i,"You've been added to a Rise Vision account!",r)["finally"](function(){a.sendingEmail=!1})},a}]),angular.module("risevision.common.header").value("COMPANY_ROLE_FIELDS",[["it_network_administrator","IT/Network Administrator"],["facilities","Facilities"],["professor_instructor_teacher","Professor/Instructor/Teacher"],["marketing","Marketing"],["designer","Designer"],["executive_business_owner","Executive/Business Owner"],["reseller_integrator","Reseller/Integrator"],["architect_consultant","Architect/Consultant"],["administrator_volunteer_intern","Administrator/Volunteer/Intern"],["developer","Developer"],["other","Other"]]).value("COMPANY_INDUSTRY_FIELDS",[["LIBRARIES","Arts / Libraries","https://cdn2.hubspot.net/hubfs/2700250/Assets%20May%5B17%5D/teamwork.svg"],["AUTOMOTIVE","Automotive","https://cdn2.hubspot.net/hubfs/2700250/automobile-1.svg"],["PHILANTHROPY","Charity","https://cdn2.hubspot.net/hubfs/2700250/Assets%20May%5B17%5D/donation-1.svg"],["RELIGIOUS_INSTITUTIONS","Faith-based","https://www.risevision.com/hubfs/Assets%20May%5B17%5D/religious.svg?t=1502211789708"],["FINANCIAL_SERVICES","Financial Services","https://www.risevision.com/hubfs/Assets%20May%5B17%5D/finance.svg?t=1502211789708"],["HIGHER_EDUCATION","Higher Education","https://www.risevision.com/hubfs/mortarboard-2.svg?t=1502211789708"],["LEGAL_SERVICES","Legal","https://cdn2.hubspot.net/hubfs/2700250/Assets%20May%5B17%5D/video-call.svg"],["MARKETING_AND_ADVERTISING","Marketing Agency","https://cdn2.hubspot.net/hubfs/2700250/Assets%20May%5B17%5D/telemarketer.svg"],["HOSPITAL_HEALTH_CARE","Medical","https://www.risevision.com/hubfs/hospitality-2.svg?t=1502211789708"],["PRIMARY_SECONDARY_EDUCATION","Primary/Secondary Education","https://cdn2.hubspot.net/hubfs/2700250/Assets%20May%5B17%5D/university.svg"],["RESTAURANTS","Restaurant","https://cdn2.hubspot.net/hubfs/2700250/Assets%20May%5B17%5D/restaurants.svg"],["RETAIL","Retail","https://www.risevision.com/hubfs/business-1.svg"],["HEALTH_WELLNESS_AND_FITNESS","Wellness / Fitness","https://www.risevision.com/hubfs/health-2.svg?t=1502211789708"],["OTHER","Other","https://cdn2.hubspot.net/hubfs/2700250/Assets%20May%5B17%5D/tick.svg"]]).value("COMPANY_SIZE_FIELDS",[["1","Solo"],["2","Fewer than 20 employees"],["21","21-50 employees"],["51","51-250 employees"],["250","More than 250 employees"]]).constant("USER_ICP_WRITABLE_FIELDS",["companyRole","dataCollectionDate"]).constant("COMPANY_ICP_WRITABLE_FIELDS",["name","companySize","companyIndustry"]).factory("companyIcpFactory",["$rootScope","$q","$log","userState","updateCompany","updateUser","$modal","pick","USER_ICP_WRITABLE_FIELDS","COMPANY_ICP_WRITABLE_FIELDS",function(e,n,t,o,a,s,i,r,l,c){var u={};u.init=function(){var n=e.$on("risevision.company.selectedCompanyChanged",function(){n(),p()})};var d=function(e){var o=e.company,i=e.user,u=o.id,d=i.username;i.dataCollectionDate=new Date,o=r(o,c),i=r(i,l);var m=a(u,o),p=s(d,i);n.all([m,p]).then(function(){t.debug("User & Company Profiles updated")})},m=function(e){s(e.username,{dataCollectionDate:new Date}).then(function(){t.debug("User Data Collection Date updated")})},p=function(){var e=o.getCopyOfProfile(!0),n=o.getCopyOfUserCompany(!0),t=new Date(e.dataCollectionDate||e.creationDate),a=new Date;if(a.setDate(a.getDate()-14),!o.isSubcompanySelected()&&!(t.getTime()>=a.getTime()||e.companyRole&&n.name&&n.companySize&&n.companyIndustry)){var s=i.open({templateUrl:"company-icp-modal.html",controller:"CompanyIcpModalCtrl",size:"lg",backdrop:!0,resolve:{user:function(){return e},company:function(){return n}}});s.result.then(function(e,n){d(e,n)},function(e){m(e)})}};return u}]),function(e){"use strict";try{e.module("risevision.common.config")}catch(n){e.module("risevision.common.config",[])}e.module("risevision.common.config").value("ENABLE_EXTERNAL_LOGGING",!0).value("CORE_URL","https://rvaserver2.appspot.com/_ah/api"),e.module("risevision.common.components.util",[]),e.module("risevision.common.components.logging",[]),e.module("risevision.common.components.rvtokenstore",["risevision.common.components.util","LocalStorageModule","ngBiscuit"]),e.module("risevision.common.components.userstate",["ui.router","risevision.common.components.util","risevision.common.components.rvtokenstore","risevision.common.components.logging","risevision.common.config","risevision.common.gapi","LocalStorageModule","risevision.core.cache","risevision.core.oauth2","risevision.core.company","risevision.core.util","risevision.core.userprofile","risevision.common.loading","risevision.ui-flow"]).config(["$urlRouterProvider","$stateProvider","$locationProvider",function(e,n,t){t.html5Mode(!0),e.otherwise("/"),n.state("apps",{template:"<div ui-view></div>"}).state("apps.launcher",{"abstract":!0,template:'<div class="app-launcher" ui-view></div>'}).state("apps.launcher.unauthorized",{templateProvider:["$templateCache",function(e){return e.get("userstate/login.html")}],controller:"LoginCtrl"}).state("apps.launcher.createaccount",{templateProvider:["$templateCache",function(e){return e.get("userstate/create-account.html")}],controller:"LoginCtrl"}).state("apps.launcher.unregistered",{templateProvider:["$templateCache",function(e){return e.get("userstate/signup.html")}],controller:"SignUpCtrl"}).state("apps.launcher.signin",{url:"/signin",controller:"SignInCtrl"})}]).run(["$rootScope","$state",function(e,n){e.$on("risevision.user.signedOut",function(){n.go("apps.launcher.unauthorized")});var t;e.$on("$stateChangeStart",function(e,n,o){n&&n.name.indexOf("apps.launcher.un")===-1&&(t=n)}),e.$on("risevision.user.authorized",function(){t&&n.current.name.indexOf("apps.launcher.un")!==-1&&n.go(t)})}]).value("CLIENT_ID","614513768474.apps.googleusercontent.com")}(angular),angular.module("risevision.common.components.userstate").factory("canAccessApps",["$q","userState","userAuthFactory","$state",function(e,n,t,o){return function(){var a=e.defer();return t.authenticate(!1).then(function(){return n.isRiseVisionUser()?void a.resolve():e.reject()}).then(null,function(){n.isLoggedIn()?o.go("apps.launcher.unregistered"):o.go("apps.launcher.unauthorized"),a.reject()}),a.promise}}]),angular.module("risevision.common.components.logging").factory("bigQueryLogging",["externalLogging","userState",function(e,n){var t={};return t.logEvent=function(t,o,a,s,i){return e.logEvent(t,o,a,s||n.getUsername(),i||n.getSelectedCompanyId())},t}]),function(e){"use strict";e.module("risevision.common.components.userstate").factory("companyState",["$location","getCompany","objectHelper","$rootScope","$log","$q",function(n,t,o,a,s,i){var r,l={userCompany:{},selectedCompany:{}},c=function(){o.clearObj(l.selectedCompany),o.clearObj(l.userCompany),s.debug("Company state has been reset.")};n.search().cid&&(s.debug("cid",n.search().cid,"saved for later processing."),r=n.search().cid);var u=function(){var e=i.defer();return t().then(function(e){var n=m.getSelectedCompanyId()?m.getSelectedCompanyId():r;return o.clearAndCopy(e,l.userCompany),d(n)}).then(null,function(){m.resetCompany()})["finally"](function(){r=null,e.resolve(null)}),e.promise},d=function(e){var n=i.defer();return e&&e!==l.userCompany.id?t(e).then(function(e){o.clearAndCopy(e,l.selectedCompany),n.resolve(),a.$broadcast("risevision.company.selectedCompanyChanged")}).then(null,function(e){console.error("Failed to load selected company.",e),n.reject(e)}):(m.resetCompany(),n.resolve()),n.promise},m={init:u,switchCompany:d,updateCompanySettings:function(e){e&&e.id===m.getSelectedCompanyId()&&o.clearAndCopy(e,l.selectedCompany),e&&e.id===m.getUserCompanyId()&&o.clearAndCopy(e,l.userCompany),a.$broadcast("risevision.company.updated",{companyId:e.id})},resetCompany:function(){o.clearAndCopy(l.userCompany,l.selectedCompany),a.$broadcast("risevision.company.selectedCompanyChanged")},resetCompanyState:c,getUserCompanyId:function(){return l.userCompany&&l.userCompany.id||null},getUserCompanyName:function(){return l.userCompany&&l.userCompany.name||null},getSelectedCompanyId:function(){return l.selectedCompany&&l.selectedCompany.id||null},getSelectedCompanyName:function(){return l.selectedCompany&&l.selectedCompany.name||null},getSelectedCompanyCountry:function(){return l.selectedCompany&&l.selectedCompany.country||null},getCopyOfUserCompany:function(n){return n?e.extend({},l.userCompany):o.follow(l.userCompany)},getCopyOfSelectedCompany:function(n){return n?e.extend({},l.selectedCompany):o.follow(l.selectedCompany)},isSubcompanySelected:function(){return l.selectedCompany&&l.selectedCompany.id!==(l.userCompany&&l.userCompany.id)},isTestCompanySelected:function(){return l.selectedCompany&&l.selectedCompany.isTest===!0},isSeller:function(){return!(!l.selectedCompany||!l.selectedCompany.sellerId)},isRootCompany:function(){return l.userCompany&&!l.userCompany.parentId}};return m}])}(angular),function(e){"use strict";e.module("risevision.common.components.userstate").factory("customAuthFactory",["$q","$log","gapiLoader","userauth","userState",function(e,n,t,o,a){var s={};return s.authenticate=function(n){var s=e.defer(),i=a._state;return n&&n.username&&n.password?e.all([t(),o.login(n.username,n.password)]).then(function(e){var t=e[0],o=e[1]&&e[1].result;if(o&&o.item){var a={access_token:o.item,expires_in:"3600",token_type:"Bearer"};t.auth.setToken(a),s.resolve({email:n.username,token:a})}else s.reject()}).then(null,function(){s.reject()}):i.userToken&&i.userToken.token?t().then(function(e){e.auth.setToken(i.userToken.token),s.resolve(i.userToken)}):s.reject(),s.promise},s.addUser=function(n){var t=e.defer();return n&&n.username&&n.password?o.add(n.username,n.password).then(function(e){t.resolve()}).then(null,function(){t.reject()}):t.reject(),t.promise},s}])}(angular),angular.module("risevision.common.components.logging").constant("EXTERNAL_LOGGER_SERVICE_URL","https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Apps_Events/tables/TABLE_ID/insertAll").constant("EXTERNAL_LOGGER_REFRESH_URL","https://www.googleapis.com/oauth2/v3/token?client_id=1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com&client_secret=nlZyrcPLg6oEwO9f9Wfn29Wh&refresh_token=1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT&grant_type=refresh_token").factory("externalLogging",["$http","$window","$q","$log","EXTERNAL_LOGGER_REFRESH_URL","EXTERNAL_LOGGER_SERVICE_URL","ENABLE_EXTERNAL_LOGGING",function(e,n,t,o,a,s,i){var r,l,c={},u=function(){var e=new Date,n=e.getUTCFullYear(),t=e.getUTCMonth()+1,o=e.getUTCDate();return t<10&&(t="0"+t),o<10&&(o="0"+o),n.toString()+t.toString()+o.toString()},d={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,templateSuffix:u(),rows:[{insertId:"",json:{event:"",event_details:"",event_value:0,host:"",ts:0,user_id:"",company_id:""}}]};return c.logEvent=function(a,r,l,u,m){if(o.debug("BQ log",a,r,l,u,m),i===!1)return void o.debug("External Logging DISABLED");var p=t.defer();return c.getToken().then(function(t){var i=JSON.parse(JSON.stringify(d)),c=s.replace("TABLE_ID","apps_events");i.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),i.rows[0].json.event=a,r&&(i.rows[0].json.event_details=r),l&&(i.rows[0].json.event_value=l),i.rows[0].json.user_id=u||"",i.rows[0].json.company_id=m||"",i.rows[0].json.host=n.location.hostname,i.rows[0].json.ts=(new Date).toISOString(),e.post(c,i,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then(function(e){p.resolve(e)},function(e){o.debug("error posting to BQ",e),p.reject(e)})},function(e){o.debug("BQ token ERROR",e),p.reject(e)}),p.promise},c.getToken=function(){var n=t.defer();return r&&(new Date).getTime()-l<358e4?n.resolve(r):e.post(a).then(function(e){r=e.data.access_token,l=(new Date).getTime(),n.resolve(e.data.access_token)},function(){n.reject()}),n.promise},c}]),function(e){"use strict";e.module("risevision.common.components.userstate").value("OAUTH2_SCOPES","https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile").value("GOOGLE_OAUTH2_URL","https://accounts.google.com/o/oauth2/auth").run(["$location","$window","userState","$log","stripLeadingSlash","parseParams",function(e,n,t,o,a,s){var i=e.path(),r=s(a(i));if(o.debug("URL params",r),t._restoreState(),r.access_token&&t._setUserToken(r),r.state){var l=JSON.parse(decodeURIComponent(r.state));l.p||l.s?(t._persistState(),n.location.replace(l.p+l.s+l.u)):e.$$html5?e.path(""):n.location.hash=l.u}}]).factory("googleAuthFactory",["$q","$log","$location","$rootScope","$interval","$window","$http","gapiLoader","getOAuthUserInfo","uiFlowManager","getBaseDomain","userState","CLIENT_ID","OAUTH2_SCOPES","GOOGLE_OAUTH2_URL",function(e,n,t,o,a,s,i,r,l,c,u,d,m,p,g){var f=null,h=function(){a.cancel(f),f=a(function(){a.cancel(f),y()},33e5)},v=function(o){var a=e.defer(),s=d._state,l={client_id:m,scope:p,cookie_policy:t.protocol()+"://"+u()};return"dummy"!==s.userToken?l.authuser=s.userToken.email:l.authuser=i.get("https://www.googleapis.com/oauth2/v1/userinfo?access_token="+s.params.access_token).then(function(e){return e.data.email},function(e){return n.debug("Error retrieving userinfo"),l.authuser}),o?l.immediate=!0:l.prompt="select_account",e.all([r(),l.authuser]).then(function(e){var n=e[0];return l.authuser=e[1],n.auth.setToken(s.params),n.auth.authorize(l)}).then(function(e){n.debug("authResult"),e&&!e.error?(s.params&&delete s.params,h(),a.resolve(e)):a.reject(e.error||"failed to authorize user")}).then(null,a.reject),a.promise},y=function(n){var t,o=e.defer();return v(!n).then(function(e){return t=e,l()}).then(function(e){o.resolve(e)}).then(null,function(e){o.reject(e)}),o.promise},b=function(n){if(n){var t,a,i,r;o.redirectToRoot===!1?t=s.location.href.substr(0,s.location.href.indexOf("#"))||s.location.href:(t=s.location.origin+"/",a=s.location.pathname?s.location.pathname.substring(1):"",i=s.location.search),r=encodeURIComponent(encodeURIComponent(JSON.stringify({p:a,u:s.location.hash,s:i}))),d._persistState(),c.persist(),s.location.href=g+"?response_type=token&scope="+encodeURIComponent(p)+"&client_id="+m+"&redirect_uri="+encodeURIComponent(t)+"&prompt=select_account&state="+r;var l=e.defer();return l.promise}return y(n)},C={authenticate:d._state.inRVAFrame?y:b};return C}])}(angular),function(e){"use strict";e.module("risevision.common.components.rvtokenstore").service("rvTokenStore",["$log","$location","cookieStore","getBaseDomain",function(e,n,t,o){var a=function(){var e=t.get("rv-token");try{return JSON.parse(e)}catch(n){return e}},s=function(e){var n=o();"localhost"===n?t.put("rv-token",JSON.stringify(e),{path:"/"}):t.put("rv-token",JSON.stringify(e),{domain:n,path:"/"})},i=function(){var e=o();"localhost"===e?t.remove("rv-token",{path:"/"}):t.remove("rv-token",{domain:e,path:"/"})},r={read:a,write:s,clear:i};return r}])}(angular),function(e){"use strict";e.module("risevision.common.components.userstate").run(["$rootScope","userState","selectedCompanyUrlHandler",function(e,n,t){e.$on("risevision.company.selectedCompanyChanged",function(e){e&&t.updateUrl()}),e.$on("$stateChangeSuccess",t.updateSelectedCompanyFromUrl),e.$on("$routeChangeSuccess",t.updateSelectedCompanyFromUrl),e.$on("$locationChangeSuccess",t.locationChangeSuccess)}]).service("selectedCompanyUrlHandler",["$state","$stateParams","$location","userState",function(e,n,t,o){this.updateUrl=function(){var a=o.getSelectedCompanyId();a&&t.search().cid!==a&&!e.transition&&(n.cid=a,e.params.cid=a,t.search("cid",a))},this.updateSelectedCompanyFromUrl=function(){var a=t.search().cid;if(a&&o.getUserCompanyId()&&a!==o.getSelectedCompanyId())o.switchCompany(a);else if(!a&&o.getSelectedCompanyId()){var s=t.absUrl();n.cid=o.getSelectedCompanyId(),e.params.cid=o.getSelectedCompanyId(),t.search("cid",o.getSelectedCompanyId()),s===t.destUrl&&t.replace()}},this.locationChangeSuccess=function(e,n){t.destUrl=n}}])}(angular),function(e){"use strict";e.module("risevision.common.components.userstate").factory("userAuthFactory",["$q","$log","$location","$rootScope","$loading","$window","$document","gapiLoader","objectHelper","rvTokenStore","externalLogging","userState","googleAuthFactory","customAuthFactory",function(n,t,o,a,s,i,r,l,c,u,d,m,p,g){var f,h,v=m._state,y=!0,b=function(e){if(y){y=!1;try{var n=(new Date).getTime()-i.performance.timing.navigationStart;d.logEvent("page load time",e,n,m.getUsername(),m.getSelectedCompanyId())}catch(o){t.debug("Error logging load time")}}},C=function(e){v.userToken=e,u.write(v.userToken)},S=function(){},w=function(){t.debug("Clearing user token..."),S(),v.userToken=null,u.clear()},$=function(){var n=u.read();e.equals(n,v.userToken)?v.userToken&&(h=null,E(!1)["finally"](function(){v.userToken||(t.debug("Authentication failed. Reloading..."),i.location.reload())})):i.location.reload()},A=function(){var e,n=r[0];"undefined"!=typeof n.hidden?e="visibilityState":"undefined"!=typeof n.mozHidden?e="mozVisibilityState":"undefined"!=typeof n.msHidden?e="msVisibilityState":"undefined"!=typeof n.webkitHidden&&(e="webkitVisibilityState"),t.debug("visibility: "+n[e]),"visible"===n[e]&&$()},I=function(){var e,n=r[0];return"undefined"!=typeof n.hidden?e="visibilitychange":"undefined"!=typeof n.mozHidden?e="mozvisibilitychange":"undefined"!=typeof n.msHidden?e="msvisibilitychange":"undefined"!=typeof n.webkitHidden&&(e="webkitvisibilitychange"),e},k=function(){document.addEventListener(I(),A)},L=function(){document.removeEventListener(I(),A)};k();var _=function(e){var t=!1;return f?f.promise:e?v.user.username&&v.profile.username&&v.user.username===e.email?n.resolve():(f=n.defer(),c.clearAndCopy({userId:e.id,username:e.email,picture:e.picture},v.user),C(e),m.refreshProfile()["finally"](function(){f.resolve(),a.$broadcast("risevision.user.authorized"),t||a.$broadcast("risevision.user.userSignedIn"),f=void 0}),f.promise):(c.clearObj(v.user),n.reject("No user"))},E=function(o,a){var i;if(o&&(h=null,m._resetState()),h)return h.promise;h=n.defer(),i=h,t.debug("authentication called");var r=function(){var n=e.isDefined(v.userToken)&&null!==v.userToken;if(t.debug("userAuthed",n),o||n===!0){var r;r=a||v.userToken&&v.userToken.token?g.authenticate(a):p.authenticate(o),r.then(_).then(function(){i.resolve()}).then(null,function(e){w(),t.debug("Authentication Error: "+e),i.reject(e)})["finally"](function(){s.stopGlobal("risevision.user.authenticate"),b("authenticated user")})}else{var l="user is not authenticated";t.debug(l),i.reject(l),c.clearObj(v.user),s.stopGlobal("risevision.user.authenticate"),b("unauthenticated user")}};return l()["finally"](r),o&&s.startGlobal("risevision.user.authenticate"),i.promise},R=function(e){return l().then(function(n){e&&(i.logoutFrame.location="https://accounts.google.com/Logout"),n.auth.signOut(),h=null,w(),m._resetState(),a.$broadcast("risevision.user.signedOut"),t.debug("User is signed out.")})},U={authenticate:E,authenticatePopup:function(){return E(!0)},signOut:R,addEventListenerVisibilityAPI:k,removeEventListenerVisibilityAPI:L};return U}])}(angular),function(){"use strict";angular.module("risevision.common.components.userstate").service("userauth",["$q","$log","riseAPILoader",function(e,n,t){var o={add:function(o,a){var s=e.defer(),i={username:o,password:a};return t().then(function(e){return e.userauth.add(i)}).then(function(e){n.debug("added user credentials",e),s.resolve(e.result)}).then(null,function(e){console.error("Failed to add credentials.",e),s.reject(e)}),s.promise},update:function(o,a){var s=e.defer(),i={username:o,password:a};return t().then(function(e){return e.userauth.update(i)}).then(function(e){n.debug("update user credentials resp",e),s.resolve(e.result)}).then(null,function(e){console.error("Failed to update credentials.",e),s.reject(e)}),s.promise},login:function(o,a){var s=e.defer(),i={username:o,password:a};return t().then(function(e){return e.userauth.login(i)}).then(function(e){n.debug("login successful",e),s.resolve(e)}).then(null,function(e){console.error("Failed to login user.",e),s.reject(e)}),s.promise},refreshToken:function(o,a){var s=e.defer(),i={username:o,token:a};return t().then(function(e){return e.userauth.refreshToken(i)}).then(function(e){n.debug("token refresh successful",e),s.resolve(e)}).then(null,function(e){console.error("Failed to refresh token.",e),s.reject(e)}),s.promise}};return o}])}(),function(e){"use strict";e.module("risevision.common.components.userstate").value("DEFAULT_PROFILE_PICTURE","http://api.randomuser.me/portraits/med/men/33.jpg").factory("userState",["$q","$rootScope","$window","$log","$location","userInfoCache","getUserProfile","companyState","objectHelper","localStorageService","rvTokenStore","DEFAULT_PROFILE_PICTURE",function(n,t,o,a,s,i,r,l,c,u,d,m){var p={profile:{},user:{},roleMap:{},userToken:d.read(),inRVAFrame:e.isDefined(s.search().inRVA)},g=function(){var e=n.defer();return r(p.user.username,!0).then(function(e){return S.updateUserProfile(e),l.init()}).then(function(){e.resolve()},e.reject),e.promise},f=function(){return!!p.user.username},h=function(){return null!==p.profile.username&&void 0!==p.profile.username},v=function(n){return e.isDefined(p.roleMap[n])},y=function(){return o.gapi?o.gapi.auth.getToken():null},b=function(){var n=u.get("risevision.common.userState");n&&(e.extend(p,n),u.remove("risevision.common.userState"),a.debug("userState restored with",n))},C=function(){i.removeAll(),c.clearObj(p.user),c.clearObj(p.profile),p.roleMap={},l.resetCompanyState(),a.debug("User state has been reset.")},S={getUsername:function(){return p.user&&p.user.username||null},getUserEmail:function(){return p.profile.email},getCopyOfProfile:function(n){return n?e.extend({},p.profile):c.follow(p.profile)},getUserPicture:function(){return p.user.picture||m},hasRole:v,inRVAFrame:function(){return p.inRVAFrame},isRiseAdmin:function(){return v("sa")&&l.isRootCompany()},isRiseStoreAdmin:function(){return v("ba")&&l.isRootCompany()},isUserAdmin:function(){return v("ua")},isPurchaser:function(){return v("pu")},isSeller:l.isSeller,isRiseVisionUser:h,isLoggedIn:f,getAccessToken:y,checkUsername:function(e){return(e||!1)&&(S.getUsername()||!1)&&e.toUpperCase()===S.getUsername().toUpperCase()},updateUserProfile:function(n){S.checkUsername(n.username)&&(c.clearAndCopy(e.extend({username:p.user.username},n),p.profile),p.roleMap={},p.profile.roles&&p.profile.roles.forEach(function(e){p.roleMap[e]=!0}),t.$broadcast("risevision.user.updated"))},refreshProfile:g,getUserCompanyId:l.getUserCompanyId,getUserCompanyName:l.getUserCompanyName,getSelectedCompanyId:l.getSelectedCompanyId,getSelectedCompanyName:l.getSelectedCompanyName,getSelectedCompanyCountry:l.getSelectedCompanyCountry,getCopyOfUserCompany:l.getCopyOfUserCompany,getCopyOfSelectedCompany:l.getCopyOfSelectedCompany,isSubcompanySelected:l.isSubcompanySelected,isTestCompanySelected:l.isTestCompanySelected,isRootCompany:l.isRootCompany,updateCompanySettings:l.updateCompanySettings,updateUserCompanySettings:l.updateUserCompanySettings,resetCompany:l.resetCompany,switchCompany:l.switchCompany,_restoreState:b,_resetState:C,_setUserToken:function(e){p.params=e,p.userToken="dummy"},_persistState:function(){u.set("risevision.common.userState",p)},_state:p};return S}])}(angular),function(e){"use strict";e.module("risevision.common.components.util").value("humanReadableError",function(e){var n;return n=e.message?e.message:e.error?e.error.message?e.error.message:e.error:e,JSON.stringify(n)}).factory("dateIsInRange",[function(){return function(e,n,t){var o,a,s=!0;try{n&&(o=n.match(/(\d{4})\-(\d{2})\-(\d{2})/),a=new Date(o[1],parseInt(o[2])-1,o[3],0,0,0,0),s=e>=a),s&&t&&(o=t.match(/(\d{4})\-(\d{2})\-(\d{2})/),a=new Date(o[1],parseInt(o[2])-1,o[3],0,0,0,0),s=e<=a)}catch(i){s=!1}return s}}]).factory("objectHelper",[function(){var n={};return n.follow=function(e){var n=function(){};return n.prototype=e,new n},n.clearObj=function(e){for(var n in e)delete e[n]},n.clearAndCopy=function(t,o){n.clearObj(o),e.extend(o,t)},n}]).factory("getBaseDomain",["$log","$location",function(e,n){var t=function(e){return!!/^([0-9])+\.([0-9])+\.([0-9])+\.([0-9])+$/.test(e)};return function(){var o;if(!o){var a=n.host();if(t(a))o=a;else{var s=a.split(".");o=s.length>1?"appspot"===s[s.length-2]?s.slice(s.length-3).join("."):s.slice(s.length-2).join("."):a}e.debug("baseDomain",o)}return o}}]).value("stripLeadingSlash",function(e){return"/"===e[0]&&(e=e.slice(1)),e}).value("parseParams",function(e){var n={};return e.split("&").forEach(function(e){var t=e.split("=");n[t[0]]=t[1]}),n})}(angular),angular.module("risevision.common.components.userstate").controller("LoginCtrl",["$scope","$loading","userAuthFactory","customAuthFactory","uiFlowManager",function(e,n,t,o,a){e.forms={},e.credentials={},e.errors={},e.googleLogin=function(e){n.startGlobal("auth-buttons-login"),t.authenticate(!0)["finally"](function(){n.stopGlobal("auth-buttons-login"),a.invalidateStatus(e)})},e.customLogin=function(o){e.errors={},e.forms.loginForm.$valid&&(n.startGlobal("auth-buttons-login"),t.authenticate(!0,e.credentials).then(function(){}).then(null,function(){e.errors.loginError=!0})["finally"](function(){n.stopGlobal("auth-buttons-login"),a.invalidateStatus(o)}))},e.createAccount=function(t){e.errors={},e.forms.loginForm.$valid&&(n.startGlobal("auth-buttons-login"),o.addUser(e.credentials).then(function(){e.errors.confirmationRequired=!0}).then(null,function(){e.errors.duplicateError=!0})["finally"](function(){n.stopGlobal("auth-buttons-login"),a.invalidateStatus(t)}))}}]),angular.module("risevision.common.components.userstate").controller("SignUpCtrl",["$scope","userAuthFactory","uiFlowManager","$loading",function(e,n,t,o){e.login=function(e){o.startGlobal("auth-buttons-login"),n.authenticate(!0).then()["finally"](function(){o.stopGlobal("auth-buttons-login"),t.invalidateStatus(e)})}}]),function(e){try{e=angular.module("risevision.common.components.userstate")}catch(n){e=angular.module("risevision.common.components.userstate",[])}e.run(["$templateCache",function(e){e.put("userstate/auth-form.html",'<form id="forms.loginForm" name="forms.loginForm" role="form" novalidate=""><div><div class="panel-body bg-danger u_margin-sm-top" style="display: block;" ng-show="errors.duplicateError"><p class="u_remove-bottom"><i class="fa fa-warning icon-left"></i> <span>This email address is already registered. You can <a href="#">sign in</a>with this address.</span></p></div><div class="panel-body bg-danger u_margin-sm-top" style="display: block;" ng-show="errors.loginError"><p class="u_remove-bottom"><i class="fa fa-warning icon-left"></i> <span>Your email address (or password) is not found. <a href="#"></a></span></p></div><div class="panel-body bg-danger u_margin-sm-top" style="display: block;" ng-show="errors.unconfirmedError"><p class="u_remove-bottom"><i class="fa fa-warning icon-left"></i> <span>Your email address has not been confirmed.<br><a href="#">Resend Email Confirmation</a></span></p></div><div class="panel-body bg-info u_margin-sm-top" style="display: block;" ng-show="errors.confirmationRequired"><p class="u_remove-bottom"><i class="fa fa-warning icon-left"></i> <span>We\'ve sent a confirmation email to {{credentials.username}}.<br>Please check your inbox to complete your account registration.</span></p></div></div><div class="u_margin-sm-top"><div class="form-group" ng-class="{\'has-error\': (forms.loginForm.$submitted && forms.loginForm.username.$invalid)}" show-errors=""><label class="control-label">Email</label> <input type="text" class="form-control" placeholder="Enter Username" id="username" name="username" ng-model="credentials.username" required="" focus-me="true"><p class="text-danger" ng-show="forms.loginForm.$submitted && forms.loginForm.username.$invalid">Please enter an Email</p></div><div class="form-group" ng-class="{\'has-error\': (forms.loginForm.$submitted && forms.loginForm.password.$invalid)}" show-errors=""><label class="control-label">Password</label> <input type="password" class="form-control" placeholder="Enter Password" id="password" name="password" ng-model="credentials.password" required=""><p class="text-danger" ng-show="forms.loginForm.$submitted && forms.loginForm.password.$invalid">Please enter a Password</p></div></div></form>');
}])}(),function(e){try{e=angular.module("risevision.common.components.userstate")}catch(n){e=angular.module("risevision.common.components.userstate",[])}e.run(["$templateCache",function(e){e.put("userstate/create-account.html",'<div class="app-launcher-login"><div class="container"><div class="panel"><div class="row"><div class="col-sm-6 col-xs-12"><div class="rise-logo"><img src="https://s3.amazonaws.com/Rise-Images/Website/rise-logo.svg"></div></div><div class="col-sm-6 col-xs-12"><h1 class="u_remove-top">Get Started For Free</h1><p class="lead text-muted">No commitments or contracts</p><div class="col-xs-12 col-md-8"><button class="btn btn-google-auth btn-hg" ng-click="googleLogin(\'registrationComplete\')"><span><img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg"> Sign up with Google</span></button></div><div class="section-divider col-xs-12 col-md-8 u_margin-md-top"><div></div><span>OR</span><div></div></div><div class="col-md-8 col-xs-12"><div ng-include="\'userstate/auth-form.html\'"></div><div class="form-group"><button class="btn btn-primary btn-hg" type="submit" form="forms.loginForm" ng-click="createAccount(\'registrationComplete\')"><span translate="Sign Up"></span></button></div></div><br><div class="col-xs-12 u_margin-lg-top"><p class="text-muted">Already have an account? <a id="sign-in-link" href="#" ui-sref="apps.launcher.unauthorized">Sign in</a></p></div></div></div></div></div></div>')}])}(),function(e){try{e=angular.module("risevision.common.components.userstate")}catch(n){e=angular.module("risevision.common.components.userstate",[])}e.run(["$templateCache",function(e){e.put("userstate/login.html",'<div class="app-launcher-login"><div class="container"><div class="panel"><div class="row"><div class="col-sm-6 col-xs-12"><div class="rise-logo"><img src="https://s3.amazonaws.com/Rise-Images/Website/rise-logo.svg"></div></div><div class="col-sm-6 col-xs-12"><h1 class="u_remove-top">Sign In</h1><p class="lead text-muted">to your Rise Vision account</p><div class="col-xs-12 col-md-8"><button class="btn btn-google-auth btn-hg" ng-click="googleLogin(\'registrationComplete\')"><span><img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg"> Sign in with Google</span></button></div><div class="section-divider col-xs-12 col-md-8 u_margin-md-top"><div></div><span>OR</span><div></div></div><div class="col-md-8 col-xs-12"><div ng-include="\'userstate/auth-form.html\'"></div><div class="form-group"><button class="btn btn-primary btn-hg" type="submit" form="forms.loginForm" ng-click="customLogin(\'registrationComplete\')"><span translate="Sign In"></span></button></div></div><br><div class="col-xs-12 u_margin-lg-top"><p class="text-muted"><a id="sign-in-link" href="#" ui-sref="apps.launcher.protoreset">Forgot your password?</a></p><p class="text-muted">Don\'t have an account? <a id="sign-in-link" href="#" ui-sref="apps.launcher.createaccount">Sign up</a></p></div></div></div></div></div></div>')}])}(),function(e){try{e=angular.module("risevision.common.components.userstate")}catch(n){e=angular.module("risevision.common.components.userstate",[])}e.run(["$templateCache",function(e){e.put("userstate/signup.html",'<div class="app-launcher-login"><div class="container"><div class="panel"><div class="row"><div class="col-sm-4 col-xs-12"><div class="rise-logo"><img src="https://s3.amazonaws.com/Rise-Images/Website/rise-logo.svg"></div></div><div class="col-sm-8 col-xs-12"><h1 class="u_remove-top" translate="">common.signUp</h1><p class="lead text-muted" translate="">launcher.createAccount</p><button ng-controller="RegisterButtonCtrl" ng-click="register()" class="btn btn-danger btn-hg u_margin-md-bottom" translate="">common.completeRegistration</button><br><p class="text-muted u_margin-md-top"><a id="sign-in-link" href="" ng-controller="SignOutButtonCtrl" ng-click="logout()" translate="">common.signOut</a></p></div></div></div></div></div>')}])}(),function(){"use strict";angular.module("risevision.common.components.last-modified",[]).directive("lastModified",["$templateCache",function(e){return{restrict:"E",scope:{changeDate:"=",changedBy:"="},template:e.get("last-modified/last-modified.html"),link:function(e){e.$watch("changedBy",function(n){e.changedBy=n?n:"N/A"})}}}])}(),function(){"use strict";angular.module("risevision.common.components.last-modified").filter("username",function(){return function(e){var n=e;return e&&e.indexOf("@")!==-1&&(n=e.substring(0,e.indexOf("@"))),n}})}(),function(e){try{e=angular.module("risevision.common.components.last-modified")}catch(n){e=angular.module("risevision.common.components.last-modified",[])}e.run(["$templateCache",function(e){e.put("last-modified/last-modified.html","<span class=\"text-muted\"><small>Saved {{changeDate | date:'d-MMM-yyyy h:mm a'}} by {{changedBy | username}}</small></span>")}])}(),angular.module("risevision.common.components.search-filter",[]).directive("searchFilter",["$timeout",function(e){return{restrict:"E",scope:{filterConfig:"=",search:"=",doSearch:"="},templateUrl:"search-filter/search-filter.html",link:function(n){n.delay=function(){var n=null;return function(t,o){e.cancel(n),n=e(t,o)}}(),n.reset=function(){n.search.query&&(n.search.query="",n.doSearch())}}}}]),function(e){try{e=angular.module("risevision.common.components.search-filter")}catch(n){e=angular.module("risevision.common.components.search-filter",[])}e.run(["$templateCache",function(e){e.put("search-filter/search-filter.html",'<div class="input-group"><span class="input-group-addon" ng-click="doSearch()"><i class="fa fa-search"></i></span> <input id="{{ filterConfig.id }}" type="text" class="form-control" placeholder="{{ filterConfig.placeholder }}" ng-model="search.query" ng-enter="delay(doSearch, 0)" ng-change="delay(doSearch, 1000)"> <span class="input-group-addon" ng-click="reset()"><i class="fa fa-times"></i></span></div>')}])}(),function(e){"use strict";e.module("risevision.common.components.scrolling-list",["rvScrollEvent"]).value("BaseList",function(e){this.list=[],this.maxCount=e?e:40,this.cursor=null,this.endOfList=!1,this.searchString="",this.clear=function(){this.list=[],this.cursor=null,this.endOfList=!1},this.concat=function(e){this.list=this.list.concat(e)},this.add=function(e,n){this.cursor=n,this.endOfList=e.length<this.maxCount,this.concat(e)}})}(angular),function(e){"use strict";var n=150;e.module("rvScrollEvent",[]).directive("rvScrollEvent",["$parse","$window",function(e,t){return{scope:!1,link:function(o,a,s){var i,r,l=e(s.rvScrollEvent),c=a[0],u="scroll",d={x:0,y:0},m=function(){r=function(e){d.x=c.scrollLeft,d.y=c.scrollTop,p(e),g(),f(e,!1)},a.bind(u,r)},p=function(e){i=t.setInterval(function(){d.x===c.scrollLeft&&d.y===c.scrollTop?(t.clearInterval(i),m(),f(e,!0)):(d.x=c.scrollLeft,d.y=c.scrollTop)},n)},g=function(){a.unbind(u,r)},f=function(e,n){o.$apply(function(){l(o,{$event:e,isEndEvent:n})})};m()}}}])}(angular),function(e){"use strict";e.module("risevision.common.components.scrolling-list").directive("scrollingList",["$parse","$compile",function(e,n){return{restrict:"A",replace:!1,terminal:!0,priority:1e3,link:function(t,o,a){var s=e(a.scrollingList);t.handleScroll=function(e,n){n&&e.target.scrollTop&&e.target.scrollHeight-e.target.clientHeight-e.target.scrollTop<20&&s(t)},o.attr("rv-scroll-event","handleScroll($event, isEndEvent)"),o.removeAttr("scrolling-list"),n(o)(t)}}}])}(angular),angular.module("risevision.common.components.stop-event",[]).directive("stopEvent",function(){return{restrict:"A",link:function(e,n,t){n.on(t.stopEvent,function(e){e.stopPropagation()})}}}),function(e){"use strict";e.module("risevision.common.components.analytics",[]).value("SEGMENT_API_KEY","AFtY3tN10BQj6RbnfpDDp9Hx8N1modKN").factory("segmentAnalytics",["$rootScope","$window","$log","$location",function(e,n,t,o){function a(e){e&&(n.intercomSettings=n.intercomSettings||{},n.intercomSettings.widget={activator:"#IntercomDefaultWidget"})}function s(){e.$on("$viewContentLoaded",function(){r.location!==o.path()&&(r.location=o.path(),r.pageview(r.location))})}var i,r={};n.analytics=n.analytics||[];var l=n.analytics;l.SNIPPET_VERSION="4.0.0",l.factory=function(e){function a(n,t){"track"===e&&t&&t.length>1&&t[1]&&"object"==typeof t[1]&&(t[1].url=o.host())}return function(){var o=Array.prototype.slice.call(arguments);return a(e,o),o.unshift(e),n.analytics.push(o),t.debug("Segment Tracker",o),n.analytics}},l.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];for(var c=0;c<l.methods.length;c++){var u=l.methods[c];r[u]=l.factory(u)}return r.load=function(e,n){if(e&&!i){a(n),s();var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(t,o),i=!0}},r}]).factory("analyticsEvents",["$rootScope","segmentAnalytics","userState",function(e,n,t){var o={};return o.identify=function(){if(t.getUsername()){var e=t.getCopyOfProfile(),o={email:e.email,firstName:e.firstName?e.firstName:"",lastName:e.lastName?e.lastName:""};t.getUserCompanyId()&&(o.companyId=t.getUserCompanyId(),o.companyName=t.getUserCompanyName(),o.company={id:t.getUserCompanyId(),name:t.getUserCompanyName()}),n.identify(t.getUsername(),o)}},o.initialize=function(){e.$on("risevision.user.authorized",function(){o.identify()})},o}])}(angular),angular.module("risevision.common.components.message-box.services",[]).factory("messageBox",["$q","$log","$modal","$templateCache",function(e,n,t,o){return function(e,n,a){t.open({template:o.get("message-box/message-box.html"),controller:"messageBoxInstance",size:"md",resolve:{title:function(){return e},message:function(){return n},button:function(){return a||"common.ok"}}})}}]),angular.module("risevision.common.components.message-box",["risevision.common.components.message-box.services"]).controller("messageBoxInstance",["$scope","$modalInstance","title","message","button",function(e,n,t,o,a){e.title=t,e.message=o,e.button=a?a:"common.close",e.dismiss=function(){n.dismiss()}}]),function(e){try{e=angular.module("risevision.common.components.message-box")}catch(n){e=angular.module("risevision.common.components.message-box",[])}e.run(["$templateCache",function(e){e.put("message-box/message-box.html",'<form id="messageForm"><div class="modal-header"><button type="button" class="close" ng-click="dismiss()" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i></button><h3 class="modal-title" translate="">{{title}}</h3></div><div class="modal-body" stop-event="touchend"><p translate="">{{message}}</p></div><div class="modal-footer"><button class="btn btn-primary" ng-click="dismiss()"><span translate="{{button}}"></span> <i class="fa fa-white fa-check icon-right"></i></button></div></form>')}])}(),angular.module("risevision.common.components.svg",[]).constant("iconsList",{icons1:{riseLogo:"M0 32h32V0L0 32z M15 31v-7h6L15 31z M23 32v-9h9L23 32z M24 21v-6h7L24 21z",riseStore:"M13.1 24h13.5 0.1c1 0 1.7-0.8 1.9-1.8l2.6-13.5C31.3 8.4 31 8 30.6 8h-21L13.1 24z",riseStorage:"M8 32h20.2c2.1 0 3.8-1.7 3.8-3.8V9L8 32zM19 29v-4h4.3L19 29zM25 23v-4h4.3L25 23zM24 31v-7h7.3L24 31z",riseDisplays:"M8 26h20.2c2.1 0 3.8-1.7 3.8-3.8V3L8 26zM19 23v-4h4.3L19 23zM25 17v-4h4.3L25 17zM24 25v-7h7.3L24 25z",riseSchedules:"M8 32h20.2c2.1 0 3.8-1.7 3.8-3.8V9L8 32zM19 29v-4h4.3L19 29zM25 23v-4h4.3L25 23zM24 31v-7h7.3L24 31z",riseEditor:"M30.7 1.8C29.1 0.3 26.5 0.5 25 2l-1.1 1.1c-0.1 0.1-0.1 0.3 0 0.4l5.3 5.3c0.1 0.1 0.3 0.1 0.4 0l1.2-1.2C32.4 6 32.4 3.4 30.7 1.8zM9.6 17.5l-1.4 7.1 7.1-1.5 12.5-12.5c0.1-0.1 0.1-0.3 0-0.4L22.5 5c-0.1-0.1-0.3-0.1-0.4 0L9.6 17.5z",riseSupport:"M23.5 0.8c-4.7 0-8.5 3.8-8.5 8.5 0 4.7 3.8 8.5 8.5 8.5S32 14 32 9.3C32 4.6 28.2 0.8 23.5 0.8zM27.7 8.1c-0.1 0.3-0.2 0.5-0.3 0.7 -0.1 0.2-0.3 0.4-0.5 0.6 -0.2 0.2-0.4 0.3-0.6 0.4 -0.1 0.1-0.3 0.2-0.6 0.3 -0.3 0.2-0.5 0.3-0.7 0.6 -0.2 0.2-0.2 0.8-0.6 0.8h-2.3c-0.1 0-0.4 0-0.4-0.2v-0.4c0-0.5 0.2-1 0.7-1.5 0.4-0.5 0.9-0.8 1.4-1 0.4-0.2 0.7-0.4 0.8-0.5 0.2-0.2 0.2-0.4 0.2-0.7 0-0.3-0.1-0.5-0.4-0.7 -0.3-0.2-0.6-0.3-1-0.3 -0.4 0-0.8 0.1-1 0.3 -0.3 0.2-0.6 0.6-1 1.1 -0.1 0.1-0.2 0.1-0.3 0.1 -0.1 0-0.2 0-0.2-0.1l-1.6-1.2C19 6.2 19 6 19.1 5.8c1-1.7 2.5-2.6 4.5-2.6 0.7 0 1.4 0.2 2 0.5 0.7 0.3 1.2 0.8 1.7 1.4 0.4 0.6 0.7 1.3 0.7 2C27.9 7.4 27.8 7.8 27.7 8.1zM24.2 15.5h-2.1c-0.3 0-0.5-0.2-0.5-0.5v-2.1c0-0.3 0.2-0.5 0.5-0.5h2.1c0.3 0 0.5 0.2 0.5 0.5V15C24.7 15.3 24.5 15.5 24.2 15.5z",riseAlerts:"M31.5 12.3C31 11.8 30 11.6 30 11.6V4.8c0-0.6-0.4-1.2-0.8-1.6 -0.5-0.5-1.1-0.7-1.7-0.7C23.3 6 19.1 8.1 15 8.9v9.9c4 0.8 8.2 3 12.4 6.5 0.6 0 1.3-0.2 1.8-0.7 0.5-0.5 0.8-1 0.8-1.6v-6.9c0 0 1-0.2 1.5-0.7 0.4-0.4 0.7-1 0.7-1.6S31.9 12.7 31.5 12.3z",riseDevelopers:"M8 32h20.2c2.1 0 3.8-1.7 3.8-3.8V9L8 32zM19 29v-4h4.3L19 29zM25 23v-4h4.3L25 23zM24 31v-7h7.3L24 31z",riseDocumentation:"M8 32h20.2c2.1 0 3.8-1.7 3.8-3.8V9L8 32zM19 29v-4h4.3L19 29zM25 23v-4h4.3L25 23zM24 31v-7h7.3L24 31z",riseCommunity:"M24 12.6v4.7c0 1.4 0.4 2.3 1.3 2.6v5.4h5.3v-5.4c0.9-0.3 1.3-1.1 1.3-2.6v-4.7H24zM28 11.3c1.5 0 2.7-1.2 2.7-2.7 0-1.5-1.2-2.7-2.7-2.7s-2.7 1.2-2.7 2.7C25.3 10.1 26.3 11.3 28 11.3zM0 17.3c0 1.4 0.4 2.3 1.3 2.6v5.4h5.3v-5.4c1-0.3 1.4-1.2 1.4-2.6v-4.7H0V17.3zM4 11.3c1.7 0 2.7-1.2 2.7-2.7 0-1.5-1.2-2.7-2.7-2.7S1.3 7.1 1.3 8.6C1.3 10.1 2.5 11.3 4 11.3z",riseStorageGraphic:"M29.4 5.9V4c0-0.1-0.1-0.2-0.2-0.2h-10L0.6 22.1 7.7 25l2.9 7 18.9-18.6V7.2h1.3v7.9L16.8 28.8l0.9 0.9L32 15.6V5.9H29.4z",iconNewFolder:"M30.7 8c-0.8-0.8-1.9-1-3.1-1H15V5.9c0-1.2-0.5-2-1.4-2.8C12.8 2.2 11.7 2 10.5 2H4.3C3.1 2 2.1 2.2 1.3 3.1 0.4 3.9 0 4.7 0 5.9v18.5c0 1.2 0.4 2.3 1.3 3.2C2.1 28.5 3.1 29 4.3 29h23.3c1.2 0 2.2-0.5 3.1-1.4 0.9-0.9 1.3-2 1.3-3.2V10.8C32 9.6 31.6 8.9 30.7 8zM23 20h-5v5h-4v-5H9v-4h5v-5h4v5h5V20",iconPresentation:"M28.5,3.1H3.3c-1.6,0-2.8,1.3-2.8,2.8v20.5c0,1.6,1.3,2.8,2.8,2.8h25.1c1.6,0,2.8-1.3,2.8-2.8V5.9 C31.3,4.4,30,3.1,28.5,3.1z M5.4,21l5.1-10.2L15.6,21H5.4z M26.1,20.9h-7.4c-0.4,0-0.7-0.3-0.7-0.7c0-0.4,0.3-0.7,0.7-0.7h7.4 c0.4,0,0.7,0.3,0.7,0.7C26.8,20.6,26.5,20.9,26.1,20.9z M26.1,16.8h-7.4c-0.4,0-0.7-0.3-0.7-0.7c0-0.4,0.3-0.7,0.7-0.7h7.4 c0.4,0,0.7,0.3,0.7,0.7C26.8,16.5,26.5,16.8,26.1,16.8z M26.1,12.7h-7.4c-0.4,0-0.7-0.3-0.7-0.7s0.3-0.7,0.7-0.7h7.4 c0.4,0,0.7,0.3,0.7,0.7S26.5,12.7,26.1,12.7z",iconWebsite:"M0 8v16c0 0.6 0.4 1 1 1h31V7H1C0.4 7 0 7.4 0 8zM29 11h2v10h-2V11zM26.3 17c0.4 0 0.8 0.4 0.8 0.8 0 0.4-0.4 0.8-0.8 0.8 -0.4 0-0.8-0.4-0.8-0.8C25.5 17.4 25.9 17 26.3 17zM3.9 13l0.8 3.7L5.7 13h1.1l0.9 3.7L8.5 13h1.5 0.1 1.5l0.8 3.7 0.9-3.7h1.1l0.9 3.7 0.8-3.7h1.5 0.1 1.5l0.8 3.7 0.9-3.7h1.1l0.9 3.7 0.8-3.7h1.6l-1.6 5h-1.5l-0.8-3.5L20.9 18h-1.5l-1.5-5.4L16.4 18h-1.5L14 14.5 13.2 18h-1.5l-1.5-5.4L8.6 18H7l-0.8-3.5L5.4 18H3.9l-1.6-5H3.9z",riseWidgetImage:"M21,13.8l-6.1,7l-4.3-4.4l-0.1-0.2l-7,8.2H28L21,13.8z M7.2,9c1.2,0,2.2,1,2.2,2.2s-1,2.2-2.2,2.2S5,12.4,5,11.2S6,9,7.2,9z M0,3.8v24.3h32V3.8H0z M29.8,26.4H2.3V5.7h27.6L29.8,26.4L29.8,26.4z",riseWidgetVideo:"M31,7l-7.37,4.26V9.55a3.25,3.25,0,0,0-3.24-3.24H4.24A3.25,3.25,0,0,0,1,9.55V22.45a3.25,3.25,0,0,0,3.24,3.24H20.38a3.25,3.25,0,0,0,3.24-3.24V20.76L31,25V7h0Z",riseWidgetText:"M10.47,10.47h4.15V21.53H10.47V24.3H21.53V21.53H17.38V10.47h4.15v2.77H24.3V7.7H7.7v5.53h2.77V10.47Zm-8.3-8.3V29.83H29.83V2.17H2.17Zm24.9,24.9H4.93V4.93H27.07V27.07Z",riseWidgetMore:"M26.62,9.55H25.48v3.87a0.65,0.65,0,0,1-.63.63H17.52a0.65,0.65,0,0,1-.63-0.63V7.15a0.65,0.65,0,0,1,.63-0.63h5.26V4.66H16.43A1.42,1.42,0,0,0,15,6.09v8.29a1.42,1.42,0,0,0,1.43,1.43H26a1.42,1.42,0,0,0,1.43-1.43V9.55h-0.8ZM28.89,1V3.61H31.5V5.76H28.89V8.37H26.74V5.76H24.17V3.61h2.57V1h2.15m-27,9.81L3,10.89l0-4a0.65,0.65,0,0,1,.63-0.63H11a0.65,0.65,0,0,1,.63.63v6.27a0.77,0.77,0,0,1-.67.72H5.64l0.09,0.76v1h6.36a1.42,1.42,0,0,0,1.43-1.43V6a1.42,1.42,0,0,0-1.43-1.43H2.53A1.42,1.42,0,0,0,1.1,6v4.84H1.9ZM12.72,9.42l-1.09-.09,0,4a0.65,0.65,0,0,1-.63.63H3.63A0.65,0.65,0,0,1,3,13.3V7a0.73,0.73,0,0,1,.65-0.69L9,6.31l-0.1-.76v-1H2.53A1.42,1.42,0,0,0,1.1,6v8.29A1.42,1.42,0,0,0,2.53,15.7h9.56a1.42,1.42,0,0,0,1.43-1.43V9.42h-0.8ZM1.9,23.39L3,23.47l0-4a0.65,0.65,0,0,1,.63-0.63H11a0.65,0.65,0,0,1,.63.63v6.27a0.77,0.77,0,0,1-.67.72H5.64l0.09,0.76v1h6.36a1.42,1.42,0,0,0,1.43-1.43V18.55a1.42,1.42,0,0,0-1.43-1.43H2.53A1.42,1.42,0,0,0,1.1,18.55v4.84H1.9ZM12.72,22l-1.09-.09,0,4a0.65,0.65,0,0,1-.63.63H3.63A0.65,0.65,0,0,1,3,25.88V19.6a0.73,0.73,0,0,1,.65-0.69l5.34,0-0.1-.76v-1H2.53A1.42,1.42,0,0,0,1.1,18.55v8.29a1.42,1.42,0,0,0,1.43,1.43h9.56a1.42,1.42,0,0,0,1.43-1.43V22h-0.8Zm3.07,1.39,1.09,0.08,0-4a0.65,0.65,0,0,1,.63-0.63h7.33a0.65,0.65,0,0,1,.63.63v6.27a0.77,0.77,0,0,1-.67.72H19.53l0.09,0.76v1H26a1.42,1.42,0,0,0,1.43-1.43V18.55A1.42,1.42,0,0,0,26,17.12H16.43A1.42,1.42,0,0,0,15,18.55v4.84h0.8ZM26.62,22l-1.09-.09,0,4a0.65,0.65,0,0,1-.63.63H17.52a0.65,0.65,0,0,1-.63-0.63V19.6a0.73,0.73,0,0,1,.65-0.69l5.34,0-0.1-.76v-1H16.43A1.42,1.42,0,0,0,15,18.55v8.29a1.42,1.42,0,0,0,1.43,1.43H26a1.42,1.42,0,0,0,1.43-1.43V22h-0.8Z",riseWidgetImageMulti:"M16.41,16.77l-4.89,5.6L8.13,18.86l0-.17-5.6,6.52H22ZM5.45,13a1.71,1.71,0,1,1-1.71,1.71A1.71,1.71,0,0,1,5.45,13ZM12.6,28.39H26.1L26.15,8.49H12.56v2H24.14l0,15.89H12.56ZM3.51,5.6V7.82h1.8V7.11H27.22V23.5H26.42V25H29V5.6H3.51Zm3-2.72V5.1H8.29V4.39H30.24V20.78H29.45v1.51H32V2.89H6.54Zm7,23.5H2L2,10.49H13.58v-2H0L0.05,28.39h13.5Z",riseWidgetFolder:"M28.61,8.77H13.92L11,6.16a0.85,0.85,0,0,0-.57-0.22H3.67a0.88,0.88,0,0,0-1,.71V24.22a1.11,1.11,0,0,0,1,1H28.61a0.88,0.88,0,0,0,.71-1V9.48A0.63,0.63,0,0,0,28.61,8.77Z"},icons2:{riseLogo:"",riseStore:"M26.6 26H11.5L6.7 4H1.6c-0.6 0-1 0.4-1 1s0.4 1 1 1h3.5l4.4 20.3c-0.9 0.4-1.6 1.4-1.6 2.5 0 1.5 1.2 2.7 2.7 2.7s2.7-1.2 2.7-2.7c0-0.2 0-0.5-0.1-0.7H24c-0.1 0.2-0.1 0.5-0.1 0.7 0 1.5 1.2 2.7 2.7 2.7s2.7-1.2 2.7-2.7S28.1 26 26.6 26z",riseStorage:"M1.8 9.1c1.2 0.7 2.9 1.3 5 1.7 2.1 0.4 4.4 0.6 6.9 0.6 2.5 0 4.8-0.2 6.9-0.6 2.1-0.4 3.5-1 4.8-1.7C26.6 8.4 27 7.7 27 6.9V4.6c0-0.8-0.4-1.6-1.6-2.3 -1.2-0.7-2.8-1.3-4.9-1.7C18.4 0.2 16.1 0 13.7 0c-2.5 0-4.7 0.2-6.8 0.6C4.7 1 3 1.6 1.8 2.3 0.6 3 0 3.7 0 4.6v2.3C0 7.7 0.6 8.4 1.8 9.1zM1.8 16c1.2 0.7 2.9 1.3 5 1.7 2.1 0.4 4.4 0.6 6.9 0.6 2 0 3.9-0.1 5.7-0.4l6.6-6.4c-1.2 0.6-2.7 1.1-4.5 1.5 -2.5 0.5-5.1 0.8-7.9 0.8 -2.8 0-5.5-0.3-7.9-0.8C3.3 12.4 1 11.7 0 10.7v3C0 14.5 0.6 15.3 1.8 16zM1.8 22.9c1.2 0.7 2.9 1.3 5 1.7 1.6 0.3 3.3 0.5 5.1 0.6l4.8-4.6c-1 0.1-2 0.1-3 0.1 -2.8 0-5.5-0.3-7.9-0.8C3.3 19.3 1 18.5 0 17.5v3C0 21.4 0.6 22.2 1.8 22.9zM5.8 26.7C3.3 26.1 1 25.4 0 24.4v3c0 0.8 0.6 1.6 1.9 2.3 1 0.6 2.3 1 3.8 1.4l4-3.9C8.3 27.1 7 26.9 5.8 26.7z",riseDisplays:"M9 22H4V4h24v0l3.5-3.3C31.1 0.3 30.6 0 30 0H2C0.9 0 0 0.9 0 2v22c0 1.1 0.9 2 2 2h2.8L9 22zM23.5 30.7l-4.5-2V28h-6v0.7l-4.5 2c-0.4 0-0.6 0.3-0.6 0.7 0 0.4 0.4 0.7 0.8 0.7h14.7c0.4 0 0.7-0.3 0.7-0.7C24 31 23.9 30.7 23.5 30.7z",riseSchedules:"M14 23.3V20h3.4l2.6-2.4V14h3.8l2.1-2H6v14h5.1L14 23.3zM14 14h4v4h-4V14zM8 14h4v4H8V14zM8 20h4v4H8V20zM31.5 6.7C31.1 6.3 30.6 6 30 6h-2V4c0-0.5-0.5-1-1-1h-6c-0.5 0-1 0.5-1 1v2h-8V4c0-0.5-0.5-1-1-1H5C4.5 3 4 3.5 4 4v2H2C0.9 6 0 6.9 0 8v22c0 1.1 0.9 2 2 2h2.8L9 28H4V10h24v0L31.5 6.7zM10 8H6V5h4V8zM26 8h-4V5h4V8z",riseEditor:"M22 28H4V17h3.3l2.2-2.2 1.8-1.8H2c-1.1 0-2 0.7-2 1.8v15C0 30.9 0.9 32 2 32h11.3 5.3H24c1.1 0 2-1.1 2-2.2V15.3l-4 4V28z",riseSupport:"M25 26.2c0 0-0.2-0.1-0.4-0.2l-5.1-3.1c-0.2-0.2-0.3-0.1-0.5-0.1s-0.5 0.2-0.9 0.5c-0.4 0.3-0.7 0.7-1 1.1 -0.3 0.4-0.6 0.8-0.9 1.1S15.6 26 15.4 26c-0.1 0-2.5-0.9-5.7-3.8 -2.9-2.6-3.8-5.6-3.8-5.7 0-0.2 0.2-0.5 0.5-0.8 0.3-0.3 0.7-0.6 1.1-0.9s0.8-0.6 1.1-1c0.3-0.4 0.5-0.7 0.5-0.9 0-0.2 0-0.3-0.1-0.5L5.8 7.1C5.8 7 5.7 6.9 5.7 6.9 5.6 6.8 5.5 6.8 5.3 6.8 5 6.8 4.5 6.8 4 6.9c0 0-4.2 1.5-4 5.9 0 0.3 0 0.7 0.1 1 0 0.3 1.1 6.1 6.5 11.5 5.1 5.1 11.2 6.5 11.5 6.5 0.3 0.1 0.6 0.1 0.9 0.1 0 0 4 0.2 5.7-3.6 0.1-0.2 0.2-0.3 0.2-0.4 0.1-0.6 0.2-1 0.2-1.3C25.1 26.5 25.1 26.3 25 26.2z",riseAlerts:"M11.8 26.4c-0.3-0.4-0.5-0.7-0.6-1s-0.1-0.6-0.1-1 0.2-0.8 0.4-1.2c-0.5-0.5-0.7-1-0.7-1.7 0-0.6 0.2-1.2 0.6-1.8s0.9-1 1.6-1.2c0 0 0 0 0.1 0V9.2c-0.5 0-1.1-0.2-1.6-0.2H2.9c-0.8 0-1.5 0.4-2 1C0.3 10.6 0 11.4 0 12.2v3.4c0 0.8 0.3 1.2 0.8 1.8C1.4 18 2.1 18 2.9 18H5c-0.2 1-0.3 1.5-0.4 2.2 -0.1 0.7-0.1 1.4-0.1 1.9s0.1 1.2 0.3 1.9c0.2 0.7 0.3 1.3 0.4 1.6 0.1 0.4 0.3 0.9 0.6 1.7 0.3 0.8 0.4 1.3 0.5 1.6 0.5 0.5 1.3 0.8 2.4 1 1 0.2 2 0.1 3-0.2s1.6-0.8 2-1.5c-0.5-0.4-0.8-0.7-1.1-0.9S12.1 26.7 11.8 26.4z",riseDevelopers:"M5.2 27.6l2.3-1.4c0.6 0.5 1.4 0.9 2.1 1.2l6.7-6.3c-0.1 0-0.2 0-0.3 0 -2.9 0-5.3-2.4-5.3-5.3 0-2.9 2.4-5.3 5.3-5.3s5.3 2.4 5.3 5.3c0 0.2 0 0.4-0.1 0.6L30.1 8l-2-3.5c-0.1-0.2-0.3-0.4-0.6-0.4 -0.2-0.1-0.5 0-0.7 0.1l-2.3 1.4C23.4 4.7 21 4 21 3.5V0.7C21 0.2 20.5 0 19.9 0h-7.6C11.8 0 11 0.2 11 0.7v2.8c0 0.5-2.3 1.1-3.5 2.1L5.2 4.2c-0.5-0.3-1-0.1-1.2 0.3l-3.8 6.6C0 11.3 0 11.6 0 11.8c0.1 0.2 0.2 0.5 0.4 0.6l2.4 1.4c-0.1 0.7-0.2 1.4-0.2 2.1 0 0.7 0.1 1.4 0.2 2.1l-2.4 1.4c-0.5 0.3-0.6 0.8-0.3 1.3l3.8 6.6C4.2 27.7 4.8 27.8 5.2 27.6",riseDocumentation:"M6 4C5.4 4 5 4.4 5 5s0.4 1 1 1h17c0.6 0 1-0.4 1-1s-0.4-1-1-1H6zM26 11.9V8.8C26 8.2 25.6 8 25 8H6C4.3 8 3 6.7 3 5c0-1.7 1.3-3 3-3h19c0.6 0 1-0.4 1-1 0-0.6-0.4-1-1-1H6C3.2 0 0 2 0 4.8v21c0 2.4 2.5 5.4 4.9 6.1L26 11.9z",riseCommunity:"M9.4 18.9c0 2.4 0.7 3.8 2.2 4.3v9h8.8v-9c1.5-0.4 2.2-1.9 2.2-4.3v-7.7H9.4V18.9zM16 8.9c2.4 0 4.4-2 4.4-4.4s-2-4.4-4.4-4.4 -4.4 2-4.4 4.4S13.6 8.9 16 8.9z",riseStorageGraphic:"M19.8 5.1L2.9 21.7 8.6 24l2.4 5.8 17.1-16.9V5.1H19.8zM22.9 11.7c-1.1 0-1.9-0.9-1.9-1.9 0-1.1 0.9-1.9 1.9-1.9 1.1 0 1.9 0.9 1.9 1.9C24.8 10.9 23.9 11.7 22.9 11.7z",iconNewFolder:"",iconPresentation:"",iconWebsite:"",riseWidgetImage:"",riseWidgetVideo:"",riseWidgetText:"",riseWidgetMore:"",riseWidgetImageMulti:"",riseWidgetFolder:""}}).directive("svgIcon",["iconsList",function(e){return{restrict:"E",scope:{p:"@"},link:function(n,t){var o=function(n){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="'+e.icons1[n]+'"/><path d="'+e.icons2[n]+'"/></svg>'};n.$watch("p",function(e){e&&t.html(o(e))})}}}]),function(){"use strict";try{angular.module("risevision.common.config")}catch(e){angular.module("risevision.common.config",[])}angular.module("risevision.common.config").value("STORE_URL","https://store.risevision.com/").value("STORE_SERVER_URL","https://store-dot-rvaserver2.appspot.com/"),angular.module("risevision.widget.common.subscription-status.config",[]).value("IN_RVA_PATH","product/productId/?cid=companyId").value("ACCOUNT_PATH","account?cid=companyId").value("PATH_URL","v1/company/companyId/product/status?pc=").value("AUTH_PATH_URL","v1/widget/auth?cid=companyId&pc=").value("PATH_URL_BY_DISPLAY_ID","v1/product/productCode/status?displayIds=")}(),function(){"use strict";angular.module("risevision.widget.common.subscription-status",["risevision.common.config","risevision.widget.common.subscription-status.config","risevision.widget.common.subscription-status.service","risevision.widget.common","risevision.common.i18n","ngSanitize","ui.bootstrap"])}(),function(){"use strict";angular.module("risevision.widget.common.subscription-status").directive("appSubscriptionStatus",["$templateCache","$modal","subscriptionStatusService",function(e,n,t){return{restrict:"AE",require:"?ngModel",scope:{productId:"@",productCode:"@",companyId:"@",productPrice:"@"},template:e.get("app-subscription-status-template.html"),link:function(e,o,a,s){function i(){e.productCode&&e.productId&&e.companyId&&t.get(e.productCode,e.companyId).then(function(n){n&&(e.subscriptionStatus=n)},function(){})}e.subscriptionStatus={status:"N/A",statusCode:"na",subscribed:!1,expiry:null},e.$watch("companyId",function(){i()}),s&&e.$watch("subscriptionStatus",function(e){s.$setViewValue(e)}),e.$watch("showStoreModal",function(t){if(t){var o=n.open({templateUrl:"store-iframe-template.html",controller:"StoreModalController",size:"lg",resolve:{productId:function(){return e.productId},companyId:function(){return e.companyId}}});o.result.then(function(){i()},function(){i()})["finally"](function(){e.showStoreModal=!1})}})}}}]).directive("ngDisableRightClick",function(){return function(e,n){n.bind("contextmenu",function(n){e.$apply(function(){n.preventDefault()})})}})}(),function(){"use strict";angular.module("risevision.widget.common.subscription-status").directive("subscriptionStatus",["$rootScope","$templateCache","subscriptionStatusService","STORE_URL","ACCOUNT_PATH","IN_RVA_PATH",function(e,n,t,o,a,s){return{restrict:"AE",require:"?ngModel",scope:{productId:"@",productCode:"@",companyId:"@",displayId:"@",expandedFormat:"@",showStoreModal:"=?",customProductLink:"@",customMessages:"@"},template:n.get("subscription-status-template.html"),link:function(n,i,r,l){function c(){n.productCode&&n.productId&&(n.companyId||n.displayId)&&t.get(n.productCode,n.companyId,n.displayId).then(function(t){t&&(n.subscriptionStatus&&n.subscriptionStatus.status===t.status||e.$emit("subscription-status:changed",t),n.subscriptionStatus=t)},function(){})}n.subscriptionStatus={status:"N/A",statusCode:"na",subscribed:!1,expiry:null},n.messagesPrefix=n.customMessages?n.customMessages:"subscription-status";var u=function(){n.storeAccountUrl=o+a.replace("companyId",n.companyId),n.customProductLink?n.storeUrl=n.customProductLink:n.storeUrl=o+s.replace("productId",n.productId).replace("companyId",n.companyId)};n.$watch("companyId",function(){c(),u()});var d=e.$on("refreshSubscriptionStatus",function(e,t){null!==t&&n.subscriptionStatus.statusCode!==t||c()});n.$on("$destroy",function(){d()}),l&&n.$watch("subscriptionStatus",function(e){l.$setViewValue(e)})}}}]).filter("to_trusted",["$sce",function(e){return function(n){return e.trustAsHtml(n)}}])}(),angular.module("risevision.widget.common.subscription-status").filter("productTrialDaysToExpiry",["$interpolate","$translate",function(e,n){var t=null,o=null;return n(["subscription-status.expires-today","subscription-status.expires-in"],{days:"{{days}}"}).then(function(n){t=e(n["subscription-status.expires-today"]),o=e(n["subscription-status.expires-in"])}),function(e){var n="";try{var a=864e5,s=new Date(e).getTime()-(new Date).getTime(),i=Math.floor(s/a),r={days:i};n=0===i?null!==t?t(r):"":i>0?null!==o?o(r):"":null!==t?t(r):""}catch(l){}return n}}]),function(){"use strict";angular.module("risevision.widget.common.subscription-status.service",["risevision.common.config","risevision.widget.common.subscription-status.config"]).service("subscriptionStatusService",["$http","$q","STORE_SERVER_URL","PATH_URL","AUTH_PATH_URL","PATH_URL_BY_DISPLAY_ID",function(e,n,t,o,a,s){function i(e,n){return Math.floor((n.getTime()-e.getTime())/c)}var r=["On Trial","Trial Expired","Subscribed","Suspended","Cancelled","Free","Not Subscribed","Product Not Found","Company Not Found","Error"],l=["on-trial","trial-expired","subscribed","suspended","cancelled","free","not-subscribed","product-not-found","company-not-found","error"],c=864e5,u=function(o,s){var i=n.defer(),r=t+a.replace("companyId",s)+o;return e.get(r).then(function(e){e&&e.data?i.resolve(e.data.authorized):i.resolve(!1)}),i.promise},d=function(a,c,u){var d=n.defer(),m=t+o.replace("companyId",c)+a;return u&&(m=t+s.replace("productCode",a)+u),e.get(m).then(function(e){if(e&&e.data&&e.data.length){var n=e.data[0];n.plural="";var t=r.indexOf(n.status);t>=0&&(n.statusCode=l[t]),""===n.status?(n.status="N/A",n.statusCode="na",n.subscribed=!1):n.status===r[0]||n.status===r[2]||n.status===r[5]?n.subscribed=!0:n.subscribed=!1,"not-subscribed"===n.statusCode&&n.trialPeriod&&n.trialPeriod>0&&(n.statusCode="trial-available",n.subscribed=!0),n.expiry&&"on-trial"===n.statusCode&&(n.expiry=new Date(n.expiry),n.expiry instanceof Date&&!isNaN(n.expiry.valueOf())&&(n.expiry=i(new Date,n.expiry)),0===n.expiry?n.plural="-zero":n.expiry>1&&(n.plural="-many")),d.resolve(n)}else d.reject("No response")}),d.promise};this.get=function(e,n,t){return d(e,n,t).then(function(t){return t.subscribed===!1?u(e,n).then(function(e){return t.subscribed=e,t}):t})}}])}(),function(e){try{e=angular.module("risevision.widget.common.subscription-status")}catch(n){e=angular.module("risevision.widget.common.subscription-status",[])}e.run(["$templateCache",function(e){"use strict";e.put("app-subscription-status-template.html",'<a id="app-subscription-status" href=""\n  ng-click="showStoreModal = true" class="store-link">\n    <div class="rate">\n      <strong>${{productPrice}}</strong>\n    </div>\n    <div class="subscribe">\n      <strong ng-if="!subscriptionStatus.subscribed"><span translate="subscription-status.get-subscription"></span></strong>\n      <strong ng-if="subscriptionStatus.subscribed"><span translate="subscription-status.continue-to-app"></span></strong>\n    </div>\n</a>\n')}])}(),function(e){try{e=angular.module("risevision.widget.common.subscription-status")}catch(n){e=angular.module("risevision.widget.common.subscription-status",[])}e.run(["$templateCache",function(e){"use strict";e.put("subscription-status-template.html",'<div ng-show="!expandedFormat">\n  <h3 ng-disable-right-click>\n    <span ng-show="subscriptionStatus.statusCode !== \'not-subscribed\'" ng-bind-html="messagesPrefix + \'.\' + subscriptionStatus.statusCode + subscriptionStatus.plural | translate:subscriptionStatus | to_trusted"></span>\n  </h3>\n  \n  <span ng-show="subscriptionStatus.statusCode === \'trial-available\'">\n    <button class="btn btn-primary btn-xs" ng-click="showStoreModal = true;">\n      <span translate="{{messagesPrefix}}.start-trial"></span>\n    </button>\n  </span>\n  <span ng-show="[\'on-trial\', \'trial-expired\', \'cancelled\', \'not-subscribed\'].indexOf(subscriptionStatus.statusCode) >= 0">\n    <a class="btn btn-primary btn-xs" ng-href="{{storeUrl}}" target="_blank">\n      <span translate="{{messagesPrefix}}.subscribe"></span>\n    </a>\n  </span>\n  <span ng-show="[\'suspended\'].indexOf(subscriptionStatus.statusCode) >= 0">\n    <a type="button" class="btn btn-primary btn-xs" ng-href="{{storeAccountUrl}}" target="_blank">\n      <span translate="{{messagesPrefix}}.view-account"></span>\n    </a>\n  </span>\n</div>\n\n<div ng-show="expandedFormat">\n  <div class="subscription-status trial" ng-show="subscriptionStatus.statusCode === \'on-trial\'">\n    <span ng-bind-html="messagesPrefix + \'.expanded-\' + subscriptionStatus.statusCode + subscriptionStatus.plural | translate:subscriptionStatus | to_trusted"></span>\n    <a type="button" class="btn btn-primary u_margin-left" ng-href="{{storeUrl}}" target="_blank">\n      <span translate="{{messagesPrefix}}.subscribe-now"></span>\n    </a>\n  </div>\n  <div class="subscription-status expired" ng-show="subscriptionStatus.statusCode === \'trial-expired\'">\n    <span translate="{{messagesPrefix}}.expanded-expired"></span>\n    <a type="button" class="btn btn-primary u_margin-left" ng-href="{{storeUrl}}" target="_blank">\n      <span translate="{{messagesPrefix}}.subscribe-now"></span>\n    </a>\n  </div>\n  <div class="subscription-status cancelled" ng-show="subscriptionStatus.statusCode === \'cancelled\'">\n   <span translate="{{messagesPrefix}}.expanded-cancelled"></span>\n    <a type="button" class="btn btn-primary u_margin-left" ng-href="{{storeUrl}}" target="_blank">\n      <span translate="{{messagesPrefix}}.subscribe-now"></span>\n    </a>\n  </div>\n  <div class="subscription-status suspended" ng-show="subscriptionStatus.statusCode === \'suspended\'">\n    <span translate="{{messagesPrefix}}.expanded-suspended"></span>\n    <a type="button" class="btn btn-primary u_margin-left" ng-href="{{storeAccountUrl}}" target="_blank">\n      <span translate="{{messagesPrefix}}.view-invoices"></span>\n    </a>\n  </div>\n</div>\n')}])}(),angular.module("risevision.widget.common",[]),angular.module("risevision.widget.common").controller("settingsController",["$scope","settingsSaver","settingsGetter","settingsCloser",function(e,n,t,o){e.settings={params:{},additionalParams:{}},e.alerts=[],e.getAdditionalParam=function(n,t){var o=e.settings.additionalParams[n];
return angular.isUndefined(o)?t:o},e.setAdditionalParam=function(n,t){e.settings.additionalParams[n]=t},e.loadAdditionalParams=function(){t.getAdditionalParams().then(function(n){e.settings.additionalParams=n,e.$broadcast("loadAdditionalParams",n)},function(e){alert(e)})},e.setAdditionalParams=function(n,t){e.settings.additionalParams[n]=t},e.saveSettings=function(){e.alerts=[],e.$broadcast("collectAdditionalParams"),n.saveSettings(e.settings).then(function(){},function(n){e.alerts=n.alerts})},e.closeSettings=function(){o.closeSettings().then(function(){},function(n){e.alerts=n.alerts})},e.settings.params=t.getParams(),e.loadAdditionalParams()}]).directive("scrollOnAlerts",function(){return{restrict:"A",scope:!1,link:function(e,n){e.$watchCollection("alerts",function(e,t){e.length>0&&0===t.length&&$("body").animate({scrollTop:n.offset().top},"fast")})}}}),angular.module("risevision.widget.common").constant("STORAGE_FILE_URL_BASE","storage.googleapis.com/risemedialibrary-").constant("STORAGE_FOLDER_URL_BASE","googleapis.com/storage/").factory("commonSettings",["$log","STORAGE_FILE_URL_BASE","STORAGE_FOLDER_URL_BASE",function(e,n,t){var o={getStorageUrlData:function(e){function o(e){return e.indexOf(n)!==-1?"file":e.indexOf(t)!==-1?"folder":null}function a(e){var n=e.split("risemedialibrary-");return n[1].slice(0,n[1].indexOf("/"))}var s,i,r,l,c={};if("file"===o(e))s=e.split(n)[1],s=decodeURIComponent(s.slice(s.indexOf("/")+1)),i=s.split("/"),c.companyId=a(e),c.fileName=i.pop(),c.folder=i.length>0?i.join("/"):"",""!==c.folder&&(c.folder+="/");else if("folder"===o(e)){r=e.split("?");for(var u=0;u<r.length;u++)if(l=r[u].split("="),"prefix"===l[0]&&"undefined"!=typeof l[1]&&""!==l[1]){c.companyId=a(e),c.folder=decodeURIComponent(l[1]),c.fileName="";break}}return c}};return o}]),angular.module("risevision.widget.common").factory("gadgetsApi",["$window",function(e){return e.gadgets}]),angular.module("risevision.widget.common").factory("googleFontLoader",["$http","angularLoad",function(e,n){function t(){for(var e="",t="",o="",s=[],i=!1,r=",sans-serif;",l="//fonts.googleapis.com/css?family=",c=["Buda","Coda Caption","Open Sans Condensed","UnifrakturCook","Molle"],u=0;u<a.length;u++)e=a[u],c.indexOf(e)===-1&&(o=l+e,n.loadCSS(o),s.push(o),/\s/.test(e)&&(i=!0),t+=i?e+"='"+e+"'"+r:e+"="+e+r);return{fonts:t,urls:s}}var o={},a=[];return o.getGoogleFonts=function(){return 0===a.length?e.get("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyBXxVK_IOV7LNQMuVVo_l7ZvN53ejN86zY&sort=alpha",{cache:!0}).then(function(e){var n=null;if(e.data&&e.data.items){for(var o=0,s=e.data.items.length;o<s;o++)n=e.data.items[o],n.subsets&&1===n.subsets.length&&"khmer"===n.subsets[0].toLowerCase()||a.push(n.family);return t()}}):t()},o.getFontsUsed=function(e){var n=[];return angular.forEach(a,function(t){e.indexOf(t)!==-1&&n.push(t)}),n},o}]),angular.module("risevision.widget.common").service("i18nLoader",["$window","$q",function(e,n){var t=n.defer();e.i18n.init({fallbackLng:"en",resGetPath:"locales/__ns_____lng__.json"},function(){t.resolve(e.i18n)}),this.get=function(){return t.promise}}]),angular.module("risevision.widget.common").factory("imageValidator",["$q",function(e){var n={isImage:function(n){var t=e.defer(),o=new Image;return o.onload=function(){t.resolve(!0)},o.onerror=function(){t.resolve(!1)},o.src=n,t.promise}};return n}]),angular.module("risevision.widget.common").service("settingsSaver",["$q","$log","gadgetsApi","settingsParser",function(e,n,t,o){function a(e){var n=angular.copy(e);return delete n.params.id,delete n.params.companyId,delete n.params.rsW,delete n.params.rsH,n}this.saveSettings=function(s,i){var r=e.defer(),l=[],c="";s=a(s),i&&(l=i(s)),l.length>0&&(n.debug("Validation failed.",l),r.reject({alerts:l})),s.params.hasOwnProperty("layoutURL")&&(c+=s.params.layoutURL+"?",delete s.params.layoutURL),c+=o.encodeParams(s.params);var u=o.encodeAdditionalParams(s.additionalParams);return t.rpc.call("","rscmd_saveSettings",function(e){n.debug("encoded settings",JSON.stringify(e)),n.debug("Settings saved. ",s),r.resolve(e)},{params:c,additionalParams:u}),r.promise}}]).service("settingsGetter",["$q","gadgetsApi","$log","settingsParser","$window","defaultSettings",function(e,n,t,o,a,s){this.getAdditionalParams=function(){var a=e.defer(),i=s.additionalParams||{};return n.rpc.call("","rscmd_getAdditionalParams",function(e){e=e?o.parseAdditionalParams(e):{},t.debug("getAdditionalParams returns ",e),a.resolve($.extend(!0,i,e))}),a.promise},this.getParams=function(){var e=s.params||{};return angular.extend(e,o.parseParams(a.location.search))}}]).service("settingsParser",[function(){function e(e){return 0===e.indexOf("up_")?e.slice(3):null}this.parseAdditionalParams=function(e){return e?JSON.parse(e):{}},this.encodeAdditionalParams=function(e){return JSON.stringify(e)},this.encodeParams=function(e){var n=[];for(var t in e)if(e.hasOwnProperty(t)){var o;o="object"==typeof e[t]?JSON.stringify(e[t]):e[t],n.push("up_"+encodeURIComponent(t)+"="+encodeURIComponent(o))}return n.join("&")},this.parseParams=function(n){"?"===n[0]&&(n=n.slice(1));for(var t={},o=n.split("&"),a=0;a<o.length;a++){var s=o[a].split("="),i=e(decodeURIComponent(s[0]));if(i)try{t[i]=JSON.parse(decodeURIComponent(s[1]))}catch(r){t[i]=decodeURIComponent(s[1])}}return t}}]).service("settingsCloser",["$q","$log","gadgetsApi",function(e,n,t){this.closeSettings=function(){var n=e.defer();return t.rpc.call("","rscmd_closeSettings",function(){n.resolve(!0)}),n.promise}}]).value("defaultSettings",{}),function(e){"use strict";e.module("risevision.widget.common.visualization",[]).factory("visualizationApi",["$q","$window",function(e,n){var t,o=e.defer(),a={get:function(){return t||(t=o.promise,n.google.visualization?o.resolve(n.google.visualization):n.google.setOnLoadCallback(function(){o.resolve(n.google.visualization)})),t}};return a}])}(angular),function(e,n){"function"==typeof define&&define.amd?define([],function(){return n()}):"object"==typeof exports?module.exports=n():n()}(this,function(){function e(e){"use strict";var n=e.storageKey(),t=e.storage(),o=function(){var o=e.preferredLanguage();angular.isString(o)?e.use(o):t.put(n,e.use())};o.displayName="fallbackFromIncorrectStorageValue",t?t.get(n)?e.use(t.get(n))["catch"](o):o():angular.isString(e.preferredLanguage())&&e.use(e.preferredLanguage())}function n(){"use strict";var e,n,t,o=null,a=!1,s=!1;t={sanitize:function(e,n){return"text"===n&&(e=r(e)),e},escape:function(e,n){return"text"===n&&(e=i(e)),e},sanitizeParameters:function(e,n){return"params"===n&&(e=c(e,r)),e},escapeParameters:function(e,n){return"params"===n&&(e=c(e,i)),e},sce:function(e,n,t){return"text"===n?e=l(e):"params"===n&&"filter"!==t&&(e=c(e,i)),e},sceParameters:function(e,n){return"params"===n&&(e=c(e,l)),e}},t.escaped=t.escapeParameters,this.addStrategy=function(e,n){return t[e]=n,this},this.removeStrategy=function(e){return delete t[e],this},this.useStrategy=function(e){return a=!0,o=e,this},this.$get=["$injector","$log",function(i,r){var l={},c=function(e,n,o,a){return angular.forEach(a,function(a){if(angular.isFunction(a))e=a(e,n,o);else if(angular.isFunction(t[a]))e=t[a](e,n,o);else{if(!angular.isString(t[a]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+a+"'");if(!l[t[a]])try{l[t[a]]=i.get(t[a])}catch(s){throw l[t[a]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+a+"'")}e=l[t[a]](e,n,o)}}),e},u=function(){a||s||(r.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),s=!0)};return i.has("$sanitize")&&(e=i.get("$sanitize")),i.has("$sce")&&(n=i.get("$sce")),{useStrategy:function(e){return function(n){e.useStrategy(n)}}(this),sanitize:function(e,n,t,a){if(o||u(),t||null===t||(t=o),!t)return e;a||(a="service");var s=angular.isArray(t)?t:[t];return c(e,n,a,s)}}}];var i=function(e){var n=angular.element("<div></div>");return n.text(e),n.html()},r=function(n){if(!e)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return e(n)},l=function(e){if(!n)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");return n.trustAsHtml(e)},c=function(e,n,t){if(angular.isDate(e))return e;if(angular.isObject(e)){var o=angular.isArray(e)?[]:{};if(t){if(t.indexOf(e)>-1)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else t=[];return t.push(e),angular.forEach(e,function(e,a){angular.isFunction(e)||(o[a]=c(e,n,t))}),t.splice(-1,1),o}return angular.isNumber(e)?e:n(e)}}function t(e,n,t,o){"use strict";var a,s,i,r,l,c,u,d,m,p,g,f,h,v,y,b,C={},S=[],w=e,$=[],A="translate-cloak",I=!1,k=!1,L=".",_=!1,E=!1,R=0,U=!0,x="default",T={"default":function(e){return(e||"").split("-").join("_")},java:function(e){var n=(e||"").split("-").join("_"),t=n.split("_");return t.length>1?t[0].toLowerCase()+"_"+t[1].toUpperCase():n},bcp47:function(e){var n=(e||"").split("_").join("-"),t=n.split("-");return t.length>1?t[0].toLowerCase()+"-"+t[1].toUpperCase():n},"iso639-1":function(e){var n=(e||"").split("_").join("-"),t=n.split("-");return t[0].toLowerCase()}},M="2.13.1",N=function(){if(angular.isFunction(o.getLocale))return o.getLocale();var e,t,a=n.$get().navigator,s=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(a.languages))for(e=0;e<a.languages.length;e++)if(t=a.languages[e],t&&t.length)return t;for(e=0;e<s.length;e++)if(t=a[s[e]],t&&t.length)return t;return null};N.displayName="angular-translate/service: getFirstBrowserLanguage";var P=function(){var e=N()||"";return T[x]&&(e=T[x](e)),e};P.displayName="angular-translate/service: getLocale";var O=function(e,n){for(var t=0,o=e.length;t<o;t++)if(e[t]===n)return t;return-1},F=function(){return this.toString().replace(/^\s+|\s+$/g,"")},D=function(e){if(e){for(var n=[],t=angular.lowercase(e),o=0,a=S.length;o<a;o++)n.push(angular.lowercase(S[o]));if(O(n,t)>-1)return e;if(s){var i;for(var r in s)if(s.hasOwnProperty(r)){var l=!1,c=Object.prototype.hasOwnProperty.call(s,r)&&angular.lowercase(r)===angular.lowercase(e);if("*"===r.slice(-1)&&(l=r.slice(0,-1)===e.slice(0,r.length-1)),(c||l)&&(i=s[r],O(n,angular.lowercase(i))>-1))return i}}var u=e.split("_");return u.length>1&&O(n,angular.lowercase(u[0]))>-1?u[0]:void 0}},V=function(e,n){if(!e&&!n)return C;if(e&&!n){if(angular.isString(e))return C[e]}else angular.isObject(C[e])||(C[e]={}),angular.extend(C[e],z(n));return this};this.translations=V,this.cloakClassName=function(e){return e?(A=e,this):A},this.nestedObjectDelimeter=function(e){return e?(L=e,this):L};var z=function(e,n,t,o){var a,s,i,r;n||(n=[]),t||(t={});for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r=e[a],angular.isObject(r)?z(r,n.concat(a),t,a):(s=n.length?""+n.join(L)+L+a:a,n.length&&a===o&&(i=""+n.join(L),t[i]="@:"+s),t[s]=r));return t};z.displayName="flatObject",this.addInterpolation=function(e){return $.push(e),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(e){return p=e,this},this.useSanitizeValueStrategy=function(e){return t.useStrategy(e),this},this.preferredLanguage=function(e){return e?(H(e),this):a};var H=function(e){return e&&(a=e),a};this.translationNotFoundIndicator=function(e){return this.translationNotFoundIndicatorLeft(e),this.translationNotFoundIndicatorRight(e),this},this.translationNotFoundIndicatorLeft=function(e){return e?(h=e,this):h},this.translationNotFoundIndicatorRight=function(e){return e?(v=e,this):v},this.fallbackLanguage=function(e){return j(e),this};var j=function(e){return e?(angular.isString(e)?(r=!0,i=[e]):angular.isArray(e)&&(r=!1,i=e),angular.isString(a)&&O(i,a)<0&&i.push(a),this):r?i[0]:i};this.use=function(e){if(e){if(!C[e]&&!g)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+e+"'");return l=e,this}return l},this.resolveClientLocale=function(){return P()};var G=function(e){return e?(w=e,this):d?d+w:w};this.storageKey=G,this.useUrlLoader=function(e,n){return this.useLoader("$translateUrlLoader",angular.extend({url:e},n))},this.useStaticFilesLoader=function(e){return this.useLoader("$translateStaticFilesLoader",e)},this.useLoader=function(e,n){return g=e,f=n||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(e){return u=e,this},this.storagePrefix=function(e){return e?(d=e,this):e},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(e){return m=e,this},this.usePostCompiling=function(e){return I=!!e,this},this.forceAsyncReload=function(e){return k=!!e,this},this.uniformLanguageTag=function(e){return e?angular.isString(e)&&(e={standard:e}):e={},x=e.standard,this},this.determinePreferredLanguage=function(e){var n=e&&angular.isFunction(e)?e():P();return a=S.length?D(n)||n:n,this},this.registerAvailableLanguageKeys=function(e,n){return e?(S=e,n&&(s=n),this):S},this.useLoaderCache=function(e){return e===!1?y=void 0:e===!0?y=!0:"undefined"==typeof e?y="$translationCache":e&&(y=e),this},this.directivePriority=function(e){return void 0===e?R:(R=e,this)},this.statefulFilter=function(e){return void 0===e?U:(U=e,this)},this.postProcess=function(e){return b=e?e:void 0,this},this.keepContent=function(e){return E=!!e,this},this.$get=["$log","$injector","$rootScope","$q",function(e,n,t,o){var s,d,x,T=n.get(p||"$translateDefaultInterpolation"),N=!1,B={},q={},W=function(e,n,t,r,c){!l&&a&&(l=a);var m=c&&c!==l?D(c)||c:l;if(c&&ue(c),angular.isArray(e)){var p=function(e){for(var a={},s=[],i=function(e){var s=o.defer(),i=function(n){a[e]=n,s.resolve([e,n])};return W(e,n,t,r,c).then(i,i),s.promise},l=0,u=e.length;l<u;l++)s.push(i(e[l]));return o.all(s).then(function(){return a})};return p(e)}var g=o.defer();e&&(e=F.apply(e));var f=function(){var e=a?q[a]:q[m];if(d=0,u&&!e){var n=s.get(w);if(e=q[n],i&&i.length){var t=O(i,n);d=0===t?1:0,O(i,a)<0&&i.push(a)}}return e}();if(f){var h=function(){c||(m=l),ie(e,n,t,r,m).then(g.resolve,g.reject)};h.displayName="promiseResolved",f["finally"](h)}else ie(e,n,t,r,m).then(g.resolve,g.reject);return g.promise},Y=function(e){return h&&(e=[h,e].join(" ")),v&&(e=[e,v].join(" ")),e},K=function(e){l=e,u&&s.put(W.storageKey(),l),t.$emit("$translateChangeSuccess",{language:e}),T.setLocale(l);var n=function(e,n){B[n].setLocale(l)};n.displayName="eachInterpolatorLocaleSetter",angular.forEach(B,n),t.$emit("$translateChangeEnd",{language:e})},Z=function(e){if(!e)throw"No language key specified for loading.";var a=o.defer();t.$emit("$translateLoadingStart",{language:e}),N=!0;var s=y;"string"==typeof s&&(s=n.get(s));var i=angular.extend({},f,{key:e,$http:angular.extend({},{cache:s},f.$http)}),r=function(n){var o={};t.$emit("$translateLoadingSuccess",{language:e}),angular.isArray(n)?angular.forEach(n,function(e){angular.extend(o,z(e))}):angular.extend(o,z(n)),N=!1,a.resolve({key:e,table:o}),t.$emit("$translateLoadingEnd",{language:e})};r.displayName="onLoaderSuccess";var l=function(e){t.$emit("$translateLoadingError",{language:e}),a.reject(e),t.$emit("$translateLoadingEnd",{language:e})};return l.displayName="onLoaderError",n.get(g)(i).then(r,l),a.promise};if(u&&(s=n.get(u),!s.get||!s.put))throw new Error("Couldn't use storage '"+u+"', missing get() or put() method!");if($.length){var J=function(e){var t=n.get(e);t.setLocale(a||l),B[t.getInterpolationIdentifier()]=t};J.displayName="interpolationFactoryAdder",angular.forEach($,J)}var X=function(e){var n=o.defer();if(Object.prototype.hasOwnProperty.call(C,e))n.resolve(C[e]);else if(q[e]){var t=function(e){V(e.key,e.table),n.resolve(e.table)};t.displayName="translationTableResolver",q[e].then(t,n.reject)}else n.reject();return n.promise},Q=function(e,n,t,a){var s=o.defer(),i=function(o){if(Object.prototype.hasOwnProperty.call(o,n)){a.setLocale(e);var i=o[n];if("@:"===i.substr(0,2))Q(e,i.substr(2),t,a).then(s.resolve,s.reject);else{var r=a.interpolate(o[n],t,"service");r=ce(n,o[n],r,t,e),s.resolve(r)}a.setLocale(l)}else s.reject()};return i.displayName="fallbackTranslationResolver",X(e).then(i,s.reject),s.promise},ee=function(e,n,t,o,a){var s,i=C[e];if(i&&Object.prototype.hasOwnProperty.call(i,n)){if(o.setLocale(e),s=o.interpolate(i[n],t,"filter",a),s=ce(n,i[n],s,t,e,a),!angular.isString(s)&&angular.isFunction(s.$$unwrapTrustedValue)){var r=s.$$unwrapTrustedValue();if("@:"===r.substr(0,2))return ee(e,r.substr(2),t,o,a)}else if("@:"===s.substr(0,2))return ee(e,s.substr(2),t,o,a);o.setLocale(l)}return s},ne=function(e,t,o,a){return m?n.get(m)(e,l,t,o,a):e},te=function(e,n,t,a,s){var r=o.defer();if(e<i.length){var l=i[e];Q(l,n,t,a).then(function(e){r.resolve(e)},function(){return te(e+1,n,t,a,s).then(r.resolve,r.reject)})}else if(s)r.resolve(s);else{var c=ne(n,t,s);m&&c?r.resolve(c):r.reject(Y(n))}return r.promise},oe=function(e,n,t,o,a){var s;if(e<i.length){var r=i[e];s=ee(r,n,t,o,a),s||""===s||(s=oe(e+1,n,t,o))}return s},ae=function(e,n,t,o){return te(x>0?x:d,e,n,t,o)},se=function(e,n,t,o){return oe(x>0?x:d,e,n,t,o)},ie=function(e,n,t,a,s){var r=o.defer(),l=s?C[s]:C,c=t?B[t]:T;if(l&&Object.prototype.hasOwnProperty.call(l,e)){var u=l[e];if("@:"===u.substr(0,2))W(u.substr(2),n,t,a,s).then(r.resolve,r.reject);else{var d=c.interpolate(u,n,"service");d=ce(e,u,d,n,s),r.resolve(d)}}else{var p;m&&!N&&(p=ne(e,n,a)),s&&i&&i.length?ae(e,n,c,a).then(function(e){r.resolve(e)},function(e){r.reject(Y(e))}):m&&!N&&p?a?r.resolve(a):r.resolve(p):a?r.resolve(a):r.reject(Y(e))}return r.promise},re=function(e,n,t,o,a){var s,r=o?C[o]:C,l=T;if(B&&Object.prototype.hasOwnProperty.call(B,t)&&(l=B[t]),r&&Object.prototype.hasOwnProperty.call(r,e)){var c=r[e];"@:"===c.substr(0,2)?s=re(c.substr(2),n,t,o,a):(s=l.interpolate(c,n,"filter",a),s=ce(e,c,s,n,o,a))}else{var u;m&&!N&&(u=ne(e,n,a)),o&&i&&i.length?(d=0,s=se(e,n,l,a)):s=m&&!N&&u?u:Y(e)}return s},le=function(e){c===e&&(c=void 0),q[e]=void 0},ce=function(e,t,o,a,s,i){var r=b;return r&&("string"==typeof r&&(r=n.get(r)),r)?r(e,t,o,a,s,i):o},ue=function(e){C[e]||!g||q[e]||(q[e]=Z(e).then(function(e){return V(e.key,e.table),e}))};W.preferredLanguage=function(e){return e&&H(e),a},W.cloakClassName=function(){return A},W.nestedObjectDelimeter=function(){return L},W.fallbackLanguage=function(e){if(void 0!==e&&null!==e){if(j(e),g&&i&&i.length)for(var n=0,t=i.length;n<t;n++)q[i[n]]||(q[i[n]]=Z(i[n]));W.use(W.use())}return r?i[0]:i},W.useFallbackLanguage=function(e){if(void 0!==e&&null!==e)if(e){var n=O(i,e);n>-1&&(x=n)}else x=0},W.proposedLanguage=function(){return c},W.storage=function(){return s},W.negotiateLocale=D,W.use=function(e){if(!e)return l;var n=o.defer();t.$emit("$translateChangeStart",{language:e});var a=D(e);return S.length>0&&!a?o.reject(e):(a&&(e=a),c=e,!k&&C[e]||!g||q[e]?q[e]?q[e].then(function(e){return c===e.key&&K(e.key),n.resolve(e.key),e},function(e){return!l&&i&&i.length>0&&i[0]!==e?W.use(i[0]).then(n.resolve,n.reject):n.reject(e)}):(n.resolve(e),K(e)):(q[e]=Z(e).then(function(t){return V(t.key,t.table),n.resolve(t.key),c===e&&K(t.key),t},function(e){return t.$emit("$translateChangeError",{language:e}),n.reject(e),t.$emit("$translateChangeEnd",{language:e}),o.reject(e)}),q[e]["finally"](function(){le(e)})),n.promise)},W.resolveClientLocale=function(){return P()},W.storageKey=function(){return G()},W.isPostCompilingEnabled=function(){return I},W.isForceAsyncReloadEnabled=function(){return k},W.isKeepContent=function(){return E},W.refresh=function(e){function n(){s.resolve(),t.$emit("$translateRefreshEnd",{language:e})}function a(){s.reject(),t.$emit("$translateRefreshEnd",{language:e})}if(!g)throw new Error("Couldn't refresh translation table, no loader registered!");var s=o.defer();if(t.$emit("$translateRefreshStart",{language:e}),e)if(C[e]){var r=function(t){return V(t.key,t.table),e===l&&K(l),n(),t};r.displayName="refreshPostProcessor",Z(e).then(r,a)}else a();else{var c=[],u={};if(i&&i.length)for(var d=0,m=i.length;d<m;d++)c.push(Z(i[d])),u[i[d]]=!0;l&&!u[l]&&c.push(Z(l));var p=function(e){C={},angular.forEach(e,function(e){V(e.key,e.table)}),l&&K(l),n()};p.displayName="refreshPostProcessor",o.all(c).then(p,a)}return s.promise},W.instant=function(e,n,t,o,s){var r=o&&o!==l?D(o)||o:l;if(null===e||angular.isUndefined(e))return e;if(o&&ue(o),angular.isArray(e)){for(var c={},u=0,d=e.length;u<d;u++)c[e[u]]=W.instant(e[u],n,t,o,s);return c}if(angular.isString(e)&&e.length<1)return e;e&&(e=F.apply(e));var p,g=[];a&&g.push(a),r&&g.push(r),i&&i.length&&(g=g.concat(i));for(var f=0,y=g.length;f<y;f++){var b=g[f];if(C[b]&&"undefined"!=typeof C[b][e]&&(p=re(e,n,t,r,s)),"undefined"!=typeof p)break}if(!p&&""!==p)if(h||v)p=Y(e);else{p=T.interpolate(e,n,"filter",s);var S;m&&!N&&(S=ne(e,n,s)),m&&!N&&S&&(p=S)}return p},W.versionInfo=function(){return M},W.loaderCache=function(){return y},W.directivePriority=function(){return R},W.statefulFilter=function(){return U},W.isReady=function(){return _};var de=o.defer();de.promise.then(function(){_=!0}),W.onReady=function(e){var n=o.defer();return angular.isFunction(e)&&n.promise.then(e),_?n.resolve():de.promise.then(n.resolve),n.promise},W.getAvailableLanguageKeys=function(){return S.length>0?S:null},W.getTranslationTable=function(e){return e=e||W.use(),e&&C[e]?angular.copy(C[e]):null};var me=t.$on("$translateReady",function(){de.resolve(),me(),me=null}),pe=t.$on("$translateChangeEnd",function(){de.resolve(),pe(),pe=null});if(g){if(angular.equals(C,{})&&W.use()&&W.use(W.use()),i&&i.length)for(var ge=function(e){return V(e.key,e.table),t.$emit("$translateChangeEnd",{language:e.key}),e},fe=0,he=i.length;fe<he;fe++){var ve=i[fe];!k&&C[ve]||(q[ve]=Z(ve).then(ge))}}else t.$emit("$translateReady",{language:W.use()});return W}]}function o(e,n){"use strict";var t,o={},a="default";return o.setLocale=function(e){t=e},o.getInterpolationIdentifier=function(){return a},o.useSanitizeValueStrategy=function(e){return n.useStrategy(e),this},o.interpolate=function(t,o,a,s){o=o||{},o=n.sanitize(o,"params",s,a);var i;return angular.isNumber(t)?i=""+t:angular.isString(t)?(i=e(t)(o),i=n.sanitize(i,"text",s,a)):i="",i},o}function a(e,n,t,o,a){"use strict";var i=function(){return this.toString().replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:e.directivePriority(),compile:function(r,l){var c=l.translateValues?l.translateValues:void 0,u=l.translateInterpolation?l.translateInterpolation:void 0,d=r[0].outerHTML.match(/translate-value-+/i),m="^(.*)("+n.startSymbol()+".*"+n.endSymbol()+")(.*)",p="^(.*)"+n.startSymbol()+"(.*)"+n.endSymbol()+"(.*)";return function(r,g,f){r.interpolateParams={},r.preText="",r.postText="",r.translateNamespace=s(r);var h={},v=function(e,n,t){if(n.translateValues&&angular.extend(e,o(n.translateValues)(r.$parent)),d)for(var a in t)if(Object.prototype.hasOwnProperty.call(n,a)&&"translateValue"===a.substr(0,14)&&"translateValues"!==a){var s=angular.lowercase(a.substr(14,1))+a.substr(15);e[s]=t[a]}},y=function(e){if(angular.isFunction(y._unwatchOld)&&(y._unwatchOld(),y._unwatchOld=void 0),angular.equals(e,"")||!angular.isDefined(e)){var t=i.apply(g.text()),o=t.match(m);if(angular.isArray(o)){r.preText=o[1],r.postText=o[3],h.translate=n(o[2])(r.$parent);var a=t.match(p);angular.isArray(a)&&a[2]&&a[2].length&&(y._unwatchOld=r.$watch(a[2],function(e){h.translate=e,A()}))}else h.translate=t?t:void 0}else h.translate=e;A()},b=function(e){f.$observe(e,function(n){h[e]=n,A()})};v(r.interpolateParams,f,l);var C=!0;f.$observe("translate",function(e){"undefined"==typeof e?y(""):""===e&&C||(h.translate=e,A()),C=!1});for(var S in f)f.hasOwnProperty(S)&&"translateAttr"===S.substr(0,13)&&S.length>13&&b(S);if(f.$observe("translateDefault",function(e){r.defaultText=e,A()}),c&&f.$observe("translateValues",function(e){e&&r.$parent.$watch(function(){angular.extend(r.interpolateParams,o(e)(r.$parent))})}),d){var w=function(e){f.$observe(e,function(n){var t=angular.lowercase(e.substr(14,1))+e.substr(15);r.interpolateParams[t]=n})};for(var $ in f)Object.prototype.hasOwnProperty.call(f,$)&&"translateValue"===$.substr(0,14)&&"translateValues"!==$&&w($)}var A=function(){for(var e in h)h.hasOwnProperty(e)&&void 0!==h[e]&&I(e,h[e],r,r.interpolateParams,r.defaultText,r.translateNamespace)},I=function(n,t,o,a,s,i){t?(i&&"."===t.charAt(0)&&(t=i+t),e(t,a,u,s,o.translateLanguage).then(function(e){k(e,o,!0,n)},function(e){k(e,o,!1,n)})):k(t,o,!1,n)},k=function(n,o,a,s){if(a||"undefined"!=typeof o.defaultText&&(n=o.defaultText),"translate"===s){(a||!a&&!e.isKeepContent()&&"undefined"==typeof f.translateKeepContent)&&g.empty().append(o.preText+n+o.postText);var i=e.isPostCompilingEnabled(),r="undefined"!=typeof l.translateCompile,c=r&&"false"!==l.translateCompile;(i&&!r||c)&&t(g.contents())(o)}else{var u=f.$attr[s];"data-"===u.substr(0,5)&&(u=u.substr(5)),u=u.substr(15),g.attr(u,n)}};(c||d||f.translateDefault)&&r.$watch("interpolateParams",A,!0),r.$on("translateLanguageChanged",A);var L=a.$on("$translateChangeSuccess",A);g.text().length?y(f.translate?f.translate:""):f.translate&&y(f.translate),A(),r.$on("$destroy",L)}}}}function s(e){"use strict";return e.translateNamespace?e.translateNamespace:e.$parent?s(e.$parent):void 0}function i(e,n){"use strict";return{restrict:"A",priority:e.directivePriority(),link:function(t,o,a){var s,i,l={},c=function(){angular.forEach(s,function(n,s){n&&(l[s]=!0,t.translateNamespace&&"."===n.charAt(0)&&(n=t.translateNamespace+n),e(n,i,a.translateInterpolation,void 0,t.translateLanguage).then(function(e){o.attr(s,e)},function(e){o.attr(s,e)}))}),angular.forEach(l,function(e,n){s[n]||(o.removeAttr(n),delete l[n])})};r(t,a.translateAttr,function(e){s=e},c),r(t,a.translateValues,function(e){i=e},c),a.translateValues&&t.$watch(a.translateValues,c,!0),t.$on("translateLanguageChanged",c);var u=n.$on("$translateChangeSuccess",c);c(),t.$on("$destroy",u)}}}function r(e,n,t,o){"use strict";n&&("::"===n.substr(0,2)?n=n.substr(2):e.$watch(n,function(e){t(e),o()},!0),t(e.$eval(n)))}function l(e,n){"use strict";return{compile:function(t){var o=function(){t.addClass(e.cloakClassName())},a=function(){t.removeClass(e.cloakClassName())};return e.onReady(function(){a()}),o(),function(t,s,i){i.translateCloak&&i.translateCloak.length&&(i.$observe("translateCloak",function(n){e(n).then(a,o)}),n.$on("$translateChangeSuccess",function(){e(i.translateCloak).then(a,o)}))}}}}function c(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(e,n,t){e.translateNamespace=s(e),e.translateNamespace&&"."===t.translateNamespace.charAt(0)?e.translateNamespace+=t.translateNamespace:e.translateNamespace=t.translateNamespace}}}}}function s(e){"use strict";return e.translateNamespace?e.translateNamespace:e.$parent?s(e.$parent):void 0}function u(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(e,n,t){t.$observe("translateLanguage",function(n){e.translateLanguage=n}),e.$watch("translateLanguage",function(){e.$broadcast("translateLanguageChanged")})}}}}function d(e,n){"use strict";var t=function(t,o,a,s){return angular.isObject(o)||(o=e(o)(this)),n.instant(t,o,a,s)};return n.statefulFilter()&&(t.$stateful=!0),t}function m(e){"use strict";return e("translations")}return e.$inject=["$translate"],t.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],o.$inject=["$interpolate","$translateSanitization"],a.$inject=["$translate","$interpolate","$compile","$parse","$rootScope"],i.$inject=["$translate","$rootScope"],l.$inject=["$translate","$rootScope"],d.$inject=["$parse","$translate"],m.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(e),e.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",n),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",t),t.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",o),o.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",a),a.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateAttr",i),i.displayName="translateAttrDirective",angular.module("pascalprecht.translate").directive("translateCloak",l),l.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",c),c.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",u),u.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",d),d.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",m),m.displayName="$translationCache","pascalprecht.translate"}),function(e,n){"function"==typeof define&&define.amd?define([],function(){return n()}):"object"==typeof exports?module.exports=n():n()}(this,function(){function e(e,n){"use strict";return function(t){if(!(t&&(angular.isArray(t.files)||angular.isString(t.prefix)&&angular.isString(t.suffix))))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");t.files||(t.files=[{prefix:t.prefix,suffix:t.suffix}]);for(var o=function(o){if(!o||!angular.isString(o.prefix)||!angular.isString(o.suffix))throw new Error("Couldn't load static file, no prefix or suffix specified!");var a=[o.prefix,t.key,o.suffix].join("");return angular.isObject(t.fileMap)&&t.fileMap[a]&&(a=t.fileMap[a]),n(angular.extend({url:a,method:"GET",params:""},t.$http)).then(function(e){return e.data},function(){return e.reject(t.key)})},a=[],s=t.files.length,i=0;i<s;i++)a.push(o({prefix:t.files[i].prefix,key:t.key,suffix:t.files[i].suffix}));return e.all(a).then(function(e){for(var n=e.length,t={},o=0;o<n;o++)for(var a in e[o])t[a]=e[o][a];return t})}}return e.$inject=["$q","$http"],angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",e),e.displayName="$translateStaticFilesLoader","pascalprecht.translate"}),angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",["$q","$http",function(e,n){function t(e,o){n(angular.extend({url:[e.prefix,e.key.toLowerCase(),e.suffix].join(""),method:"GET",params:""},e.$http)).then(function(e){o.resolve(e.data)},function(){if(e.key.indexOf("_")>=0){var n=e.key.substr(0,e.key.lastIndexOf("_")),a=angular.extend({},e,{key:n});t(a,o)}else o.resolve("{}")})}return function(n){if(!n||!angular.isString(n.prefix)||!angular.isString(n.suffix))throw new Error('Couldn"t load static files, no prefix or suffix specified!');var o=e.defer();return t(n,o),o.promise}}]),angular.module("risevision.common.i18n",["pascalprecht.translate","risevision.common.i18n.config"]).config(["$translateProvider","LOCALES_PREFIX","LOCALES_SUFIX",function(e,n,t){e.useStaticFilesLoader({prefix:n,suffix:t}),e.determinePreferredLanguage().fallbackLanguage("en").useSanitizeValueStrategy(null)}]),function(e){"use strict";try{e.module("risevision.common.config")}catch(n){e.module("risevision.common.config",[])}e.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json"),e.module("risevision.common.config").value("ENABLE_INTERCOM_MESSAGING",!1).value("ENABLE_EXTERNAL_LOGGING",!0).value("CORE_URL","https://rvaserver2.appspot.com/_ah/api").value("COOKIE_CHECK_URL","//storage-dot-rvaserver2.appspot.com").value("STORE_URL","https://store.risevision.com/").value("STORE_SERVER_URL","https://store-dot-rvaserver2.appspot.com/").value("STORE_ENDPOINT_URL","https://store-dot-rvaserver2.appspot.com/_ah/api").value("STORAGE_ENDPOINT_URL","https://storage-dot-rvaserver2.appspot.com/_ah/api").value("GSFP_URL","https://gsfp-dot-rvaserver2.appspot.com/fp").value("SUPPORT_PRODUCT_CODE","4c8c2f1a481d0ad84c6b16a9c6e90e2fc2252944").value("SUPPORT_PRODUCT_ID","14").value("SUPPORT_PRODUCT_URL","https://store.risevision.com/products/?cat=compareSupport").value("APPS_URL","https://apps.risevision.com");
}(angular);