!function(e){"use strict";e.module("risevision.common.components.analytics",[]).value("SEGMENT_API_KEY","AFtY3tN10BQj6RbnfpDDp9Hx8N1modKN").value("GA_LINKER_USE_ANCHOR",!0).factory("segmentAnalytics",["$rootScope","$window","$log","$location","GA_LINKER_USE_ANCHOR",function(e,t,a,n,i){function o(){e.$on("$viewContentLoaded",function(){if(c.location!==n.path()){c.location=n.path();var e={};e.url=n.path(),e.path=n.path(),n.search().nooverride&&(e.referrer=""),c.page(e)}})}var r,c={};t.analytics=t.analytics||[];var s=t.analytics;s.SNIPPET_VERSION="4.0.0",s.factory=function(e){function i(t,a){"track"===e&&a&&a.length>1&&a[1]&&"object"==typeof a[1]&&(a[1].url=n.host())}return function(){var n=Array.prototype.slice.call(arguments);return i(e,n),n.unshift(e),t.analytics.push(n),a.debug("Segment Tracker",n),t.analytics}},s.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];for(var m=0;m<s.methods.length;m++){var l=s.methods[m];c[l]=s.factory(l)}return c.ready(function(){var e=t.ga;e("require","linker"),e("linker:autoLink",["community.risevision.com","store.risevision.com","help.risevision.com","apps.risevision.com","risevision.com","preview.risevision.com","rva.risevision.com"],i)}),c.load=function(e){if(e&&!r){o();var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a),r=!0}},c}]).factory("analyticsEvents",["$rootScope","segmentAnalytics","userState",function(e,t,a){var n={};return n.identify=function(){if(a.getUsername()){var e=a.getCopyOfProfile(),n={email:e.email,firstName:e.firstName?e.firstName:"",lastName:e.lastName?e.lastName:""};a.getUserCompanyId()&&(n.companyId=a.getUserCompanyId(),n.companyName=a.getUserCompanyName(),n.company={id:a.getUserCompanyId(),name:a.getUserCompanyName()}),t.identify(a.getUsername(),n)}},n.initialize=function(){e.$on("risevision.user.authorized",function(){n.identify()})},n}])}(angular);