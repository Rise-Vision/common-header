!function(t){"use strict";t.module("risevision.common.components.analytics",[]).value("SEGMENT_API_KEY","AFtY3tN10BQj6RbnfpDDp9Hx8N1modKN").value("GA_LINKER_USE_ANCHOR",!0).factory("segmentAnalytics",["$rootScope","$window","$log","$location","GA_LINKER_USE_ANCHOR",function(t,e,n,a,i){function o(){t.$on("$viewContentLoaded",function(){if(c.location!==a.path()){c.location=a.path();var t={};t.url=a.path(),t.path=a.path(),a.search().nooverride&&(t.referrer=""),c.page(t)}})}var r,c={};e.analytics=e.analytics||[];var s=e.analytics;s.SNIPPET_VERSION="4.0.0",s.factory=function(t){function i(e,n){"track"===t&&n&&n.length>1&&n[1]&&"object"==typeof n[1]&&(n[1].url=a.host())}return function(){var a=Array.prototype.slice.call(arguments);return i(t,a),a.unshift(t),e.analytics.push(a),n.debug("Segment Tracker",a),e.analytics}},s.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];for(var m=0;m<s.methods.length;m++){var l=s.methods[m];c[l]=s.factory(l)}return c.ready(function(){var t=e.ga;t("require","linker"),t("linker:autoLink",["community.risevision.com","store.risevision.com","help.risevision.com","apps.risevision.com","risevision.com","preview.risevision.com","rva.risevision.com"],i)}),c.load=function(t){if(t&&!r){o();var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n),r=!0}},c}]).factory("analyticsEvents",["$rootScope","segmentAnalytics","userState",function(t,e,n){var a={};return a.identify=function(){if(n.getUsername()){var t=n.getCopyOfProfile(),a={email:t.email,firstName:t.firstName?t.firstName:"",lastName:t.lastName?t.lastName:""};if(n.getUserCompanyId()){var i=n.getCopyOfUserCompany();a.companyId=i.id,a.companyName=i.name,a.companyIndustry=i.companyIndustry,a.company={id:i.id,name:i.name,companyIndustry:i.companyIndustry}}e.identify(n.getUsername(),a)}},a.initialize=function(){t.$on("risevision.user.authorized",function(){a.identify()})},a}])}(angular);