<!DOCTYPE html>
<html ng-app="test-app">
  <head>
    <!-- <link href="../../src/css/glyphicons.min.css" rel="stylesheet" type="text/css"> -->
    <link href="//s3.amazonaws.com/rise-common-test/styles/glyphicons/glyphicons.min.css" rel="stylesheet" type="text/css">

    <!-- build:css css/style.css -->
    <link href="../../components/bootstrap/dist/css/bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="../../components/rv-common-style/dist/css/rise.min.css" rel="stylesheet" type="text/css" />
    <link href="../../components/JSONedit/css/styles.css" rel="stylesheet" type="text/css" />
    <!-- endbuild -->

    <style>

    /*Lets start with the cloud formation rather*/

/*The container will also serve as the SKY*/

*{ margin: 0; padding: 0;}


body{
  background-color: transparent;
}

#clouds{
  position: fixed;
  z-index: -1;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
	padding: 100px 0;
	background: #c9dbe9;
	background: -webkit-linear-gradient(top, #c9dbe9 0%, #fff 100%);
	background: -linear-gradient(top, #c9dbe9 0%, #fff 100%);
	background: -moz-linear-gradient(top, #c9dbe9 0%, #fff 100%);
}

/*Time to finalise the cloud shape*/
.cloud {
	width: 200px; height: 60px;
	background: #fff;

	border-radius: 200px;
	-moz-border-radius: 200px;
	-webkit-border-radius: 200px;

	position: relative;
}

.cloud:before, .cloud:after {
	content: '';
	position: absolute;
	background: #fff;
	width: 100px; height: 80px;
	position: absolute; top: -15px; left: 10px;

	border-radius: 100px;
	-moz-border-radius: 100px;
	-webkit-border-radius: 100px;

	-webkit-transform: rotate(30deg);
	transform: rotate(30deg);
	-moz-transform: rotate(30deg);
}

.cloud:after {
	width: 120px; height: 120px;
	top: -55px; left: auto; right: 15px;
}

/*Time to animate*/
.x1 {
	-webkit-animation: moveclouds 150s linear infinite;
	-moz-animation: moveclouds 150s linear infinite;
	-o-animation: moveclouds 150s linear infinite;
  opacity: 0.6; /*opacity proportional to the size*/

}

/*variable speed, opacity, and position of clouds for realistic effect*/
.x2 {
	left: 200px;

	-webkit-transform: scale(0.6);
	-moz-transform: scale(0.6);
	transform: scale(0.6);
	opacity: 0.3; /*opacity proportional to the size*/

	/*Speed will also be proportional to the size and opacity*/
	/*More the speed. Less the time in 's' = seconds*/
	-webkit-animation: moveclouds 250s linear infinite;
	-moz-animation: moveclouds 250s linear infinite;
	-o-animation: moveclouds 250s linear infinite;
}

.x3 {
	left: -750px; top: -100px;

	-webkit-transform: scale(0.8);
	-moz-transform: scale(0.8);
	transform: scale(0.8);
	opacity: 0.5; /*opacity proportional to the size*/

	-webkit-animation: moveclouds 200s linear infinite;
	-moz-animation: moveclouds 200s linear infinite;
	-o-animation: moveclouds 200s linear infinite;
}

.x4 {
	left: -170px; top: -50px;

	-webkit-transform: scale(0.75);
	-moz-transform: scale(0.75);
	transform: scale(0.75);
	opacity: 0.4; /*opacity proportional to the size*/

	-webkit-animation: moveclouds 180s linear infinite;
	-moz-animation: moveclouds 180s linear infinite;
	-o-animation: moveclouds 180s linear infinite;
}

.x5 {
	left: -400px; top: -80px;

	-webkit-transform: scale(0.8);
	-moz-transform: scale(0.8);
	transform: scale(0.8);
	opacity: 0.6; /*opacity proportional to the size*/

	-webkit-animation: moveclouds 200s linear infinite;
	-moz-animation: moveclouds 200s linear infinite;
	-o-animation: moveclouds 200s linear infinite;
}

@-webkit-keyframes moveclouds {
	0% {margin-left: 1000px;}
	100% {margin-left: -1000px;}
}
@-moz-keyframes moveclouds {
	0% {margin-left: 1000px;}
	100% {margin-left: -1000px;}
}
@-o-keyframes moveclouds {
	0% {margin-left: 1000px;}
	100% {margin-left: -1000px;}
}
    </style>
  </head>
  <body ng-controller="MainController">
    <common-header
      nav-options="navOptions"
      auth-status="0"
      is-admin="true"
      sub-company-selected="true"
      company-loaded="true"
      selected-company-name="'Rise Vision'"
      user-profile-picture="'http://api.randomuser.me/portraits/med/men/33.jpg'"
      user-profile-name="'Alfredo Sanchez'"
      user-profile-email="'alfredo.sanchez90@example.com'"
      messages="messages"
    ></common-header>

    <ng-view>Loading...</ng-view>

    <script type="text/ng-template" id="fake-google.html">
      <h1>Fake Google Cloud Server</h1>

      This app was built for the sole purpose of testing & demoing common header.
      Set server latency to <input type="number" ng-model="db.serverDelay" id="server-delay" /> ms.
      <button class="btn" ng-click="resetDb()">Reset DB</button>
      <div class="container">
        <div class="row">
          <div class="col-md-1"></div>
          <div class="jsonView col-md-5" defocus>
            <h3 class="inline">User in Fake Google DB</h3>
            <button class="btn" ng-click="deleteUser()">Delete</button>
            <button class="btn" ng-click="resetUser()">Reset</button>

            <div><json child="db.currentUser.item" default-collapsed="false" type="'object'">
            </json></div>
          </div>
          <div class="col-md-5 jsonView" defocus>
            <h3 class="inline">All Companies in Fake Google DB</h3>
            <button class="btn" ng-click="clearCompanies()">Clear</button>
            <button class="btn" ng-click="resetCompanies()">Reset</button>
            <div><json child="db.companies" default-collapsed="false" type="'array'">
            </json></div>
          </div>
          <div class="col-md-1"></div>
        </div>
      </div>

      <div id="clouds">
        <div class="cloud x1"></div>
        <!-- Time for multiple clouds to dance around -->
        <div class="cloud x2"></div>
        <div class="cloud x3"></div>
        <div class="cloud x4"></div>
        <div class="cloud x5"></div>
      </div>

    </script>

    <script type="text/ng-template" id="fake-store.html">
    <h1>Store!</h1>

    <button class="btn" id="buy-product-1" ng-click="buyProduct('p1')">Put Product 1 to Cart</button>
    <button class="btn" id="buy-product-2" ng-click="buyProduct('p2')">Put Product 2 to Cart</button>
    <button class="btn" id="buy-product-3" ng-click="buyProduct('p3')">Put Product 3 to Cart</button>

    <br /><br />
    <button class="btn" id="clear-cart" ng-click="clearCart()">Clear Cart</button>

    </script>

    <!-- build:js js/main.js -->
    <script type="text/javascript" src="../../components/jQuery/dist/jquery.js"></script>
    <script type="text/javascript" src="../../components/angular/angular.js"></script>
    <script type="text/javascript" src="../../components/angular-route/angular-route.js"></script>

    <script type="text/javascript" src="../../components/bootstrap/dist/js/bootstrap.js"></script>
    <script type="text/javascript" src="../../components/angular-bootstrap/ui-bootstrap.js"></script>
    <script type="text/javascript" src="../../components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
    <script type="text/javascript" src="../../components/ngstorage/ngStorage.js"></script>
    <script type="text/javascript" src="../../components/angular-spinner/angular-spinner.js"></script>
    <script type="text/javascript" src="../../components/spin.js/spin.js"></script>
    <script type="text/javascript" src="../../components/rv-loading/loading.js"></script>
    <script type="text/javascript" src="../../components/ng-biscuit/dist/ng-biscuit.js"></script>
    <script type="text/javascript" src="../../src/templates.js"></script>
    <script type="text/javascript" src="../../src/js/dtv-common-header.js"></script>
    <script type="text/javascript" src="../../src/js/controllers/ctr-auth-buttons.js"></script>
    <script type="text/javascript" src="../../src/js/controllers/ctr-company-buttons.js"></script>
    <script type="text/javascript" src="../../src/js/controllers/ctr-shoppingcart.js"></script>
    <script type="text/javascript" src="../../src/js/controllers/ctr-system-messages.js"></script>
    <script type="text/javascript" src="../../src/js/controllers/ctr-modals.js"></script>
    <script type="text/javascript" src="../../src/js/controllers/ctr-terms-conditions.js"></script>
    <script type="text/javascript" src="../../src/js/controllers/ctr-login.js"></script>
    <script type="text/javascript" src="../../src/js/controllers/ctr-company-modals.js"></script>
    <script type="text/javascript" src="../../src/js/svc-util.js"></script>
    <script type="text/javascript" src="../../src/js/svc-geodata.js"></script>
    <script type="text/javascript" src="../../src/js/svc-auth.js"></script>
    <script type="text/javascript" src="../../src/js/svc-registration.js"></script>
    <script type="text/javascript" src="../../src/js/svc-cache.js"></script>
    <script type="text/javascript" src="../../src/js/svc-profile.js"></script>
    <script type="text/javascript" src="../../src/js/svc-shoppingcart.js"></script>
    <script type="text/javascript" src="../../src/js/svc-system-messages.js"></script>
    <script type="text/javascript" src="../../src/js/svc-oauth2.js"></script>
    <script type="text/javascript" src="../../src/js/svc-company.js"></script>
    <script type="text/javascript" src="../../src/js/config/config.js"></script>
    <script type="text/javascript" src="../../src/js/svc-config.js"></script>
    <script type="text/javascript" src="../../src/js/svc-gapi.js"></script>
    <script type="text/javascript" src="../../src/js/svc-localstorage.js"></script>
    <script type="text/javascript" src="../../src/js/svc-system-messages.js"></script>
    <script type="text/javascript" src="../../components/lodash/dist/lodash.js"></script>
    <script type="text/javascript" src="../../components/angular-ui-sortable/sortable.js"></script>
    <script type="text/javascript" src="../../components/jquery-ui/ui/jquery-ui.js"></script>

    <!-- <script type="text/javascript" src="https://apis.google.com/js/client.js?onload=handleClientJSLoad"></script> -->

    <script type="text/javascript" src="../../components/JSONedit/js/JSONEdit.js"></script>
    <script type="text/javascript" src="../gapi-mock.js"></script>
    <!-- endbuild -->

    <style>

    .jsonView .deleteKeyBtn, .jsonView .moveArrayItemBtn {
      z-index: 800;
    }

    .inline {
      display: inline-block;
    }
    </style>
    <script type="text/javascript">
      angular.module("test-app", ["ngRoute", "risevision.common.header", "JSONedit"])
      .config(['$routeProvider', function($routeProvider) {
        $routeProvider.
          when('/home', {templateUrl: 'fake-google.html',   controller: "FakeGoogleController"}).
          when('/fake-store', {templateUrl: 'fake-store.html',   controller: "FakeStoreController"}).
          otherwise({redirectTo: '/home'});
      }])

      .controller("MainController", function($rootScope) {
        $rootScope.navOptions = [{
          title: 'Fake Google Dashboard',
          link: '#/'
        }, {
          title: 'Fake Store',
          link: '#/fake-store'
        }, {
          title: 'Platform',
          link: 'http://rva.risevision.com/',
          target: '_blank'
        }];
      })

      .controller("FakeGoogleController", function ($scope, $rootScope, apiAuth) {
          $scope.db = window.gapi._fakeDb;

          $scope.deleteUser = function () {
            delete window.gapi._fakeDb.currentUser;
          }
          $scope.resetUser = function () {
            window.gapi.resetUser();
          }
          $scope.resetDb = function () {
            window.gapi.resetDb();
          }
          $scope.resetCompanies = function () {
            window.gapi.resetCompanies();
          }
          $scope.clearCompanies = function () {
            window.gapi.clearCompanies();
          }

          $scope.$watch("db", function (newVal) {
            localStorage.setItem("fakeGoogleDb", JSON.stringify(newVal));
          }, true);
      })

      .controller("FakeStoreController", function ($scope, shoppingCart) {
        $scope.buyProduct = function (id) {
          shoppingCart.addItem({id: id, orderedPricing: [200]}, 1, 0);
        };

        $scope.clearCart = function () {
          shoppingCart.clear();
        }
      });


    </script>

  </body>
</html>
